<!DOCTYPE html><html><head><title>Falter Inferno</title><meta charset=utf-8><meta name=viewport content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"><link href="http://cloud.webtype.com/css/8f613dda-d512-4fdd-bca2-acb81e79adf2.css" rel=stylesheet type=text/css><style type=text/css>body,html{overflow:hidden}body,canvas,html{height:100%}body{margin:0;background-color:#0d0d0d}canvas{width:100%}@font-face{font-family:bodyFont;src:url(fonts/maisonneue-book-webfont.woff) format('woff')}#noWebGl{font-family:bodyFont;font-size:2.2vmin;text-transform:lowercase;font-variant:small-caps;text-align:center;margin-top:36vh}#noWebGlMessageTitle{font-family:"Parkinson Cond";font-size:6.5vmin;font-weight:400;text-transform:uppercase;margin-bottom:3vmin}#noWebGlMessageText{font-family:bodyFont;font-size:1.2vmin;line-height:2.7vmin;-webkit-font-smoothing:antialiased;letter-spacing:.14em;text-transform:uppercase}#noWebGlMessageText a{font-size:1.2vmin;border-bottom:solid 1.5px #fff;padding-bottom:.5px}#video{display:block;margin:5vmin auto}.hidden{opacity:0}.fadeIn{opacity:1}.fadeIn,.fadeOut{transition:opacity 2s ease-out;-moz-transition:opacity 2s ease-out;-webkit-transition:opacity 2s ease-out}.fadeOut{opacity:0}.quickFadeIn{opacity:1!important;transition:opacity .7s ease-out!important;-moz-transition:opacity .7s ease-out!important;-webkit-transition:opacity .7s ease-out!important}.quickFadeOut{opacity:0!important;transition:opacity .3s ease-out;-moz-transition:opacity .3s ease-out;-webkit-transition:opacity .3s ease-out}#goDownInstructions{position:absolute;top:17vh;left:50vw;text-align:center;max-width:150px}#goDownInstructions div{text-transform:uppercase;letter-spacing:.03em;margin-left:-100%;font-size:20px;font-family:"Parkinson Cond";color:#fff;text-decoration:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}#topBanner{position:absolute;left:0;top:0;z-index:1}@media (min-width:900px) and (min-height:800px){#topBanner img{width:230px;height:auto}}#headTextCanvas,#mainTextCanvas{position:absolute;top:0;left:0;height:1px;width:1px;opacity:.01}</style><style type=text/css>.level,.section-titles,a,div,p{font-family:bodyFont}.level,.nav-outer,.open-scene.simple-button,.section-title{opacity:0;visibility:hidden}.falter-nav,.section-titles{text-transform:uppercase}#falter-nav{position:absolute;top:0;left:0;width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;-webkit-font-smoothing:antialiased;z-index:1}#falter-nav,a,div,p{color:#fff;-webkit-user-select:none}a,div,p{font-size:10px;text-decoration:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.nav-outer{width:50%;min-height:10px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:start;align-items:flex-start}.gradient{height:1px;background:linear-gradient(to right,transparent 1%,rgba(255,255,255,.4)40%,transparent 90%);width:100%}.gradient.opaque-right{transform-origin:100% 0;background:linear-gradient(to right,transparent 2%,rgba(255,255,255,.4)20%)}.gradient.opaque-left{transform-origin:0 0;background:linear-gradient(to right,rgba(255,255,255,.4),rgba(255,255,255,.4),transparent)}.open-scene.simple-button,.section-numbers{position:absolute;transform:translateX(-50%);text-align:center}.section-titles{letter-spacing:.2em;white-space:nowrap;display:-ms-flexbox;display:flex;margin-top:-3px;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.section-title{overflow:hidden;line-height:10px;cursor:default}@media (max-width:450px){.section-title{display:none}}.section-numbers{font-size:40px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;line-height:150px;z-index:1;cursor:default;margin:0;width:400px;top:0;left:0}.open-scene.simple-button{cursor:pointer;text-transform:uppercase;letter-spacing:.1em;left:50%;bottom:10vh;display:inline-block;margin:0;padding:15px 0;z-index:5;background:0 0;border:1px solid #fff;color:#fff}.level,.ui{letter-spacing:.2em;text-transform:uppercase}.open-scene.simple-button:hover{color:#000}.section-dots{width:10px;z-index:5;display:none}.section-dots .dot{margin-bottom:-5px;display:inline-block;width:20px;height:20px;padding:5px 0;overflow:hidden;cursor:pointer;position:relative}.section-dots .dot:before{content:" ";background:#fff;border-radius:4px;width:4px;height:4px;left:8px;top:8px;position:absolute;display:inline-block}.level{transform:translate(-50%,-50%)rotate(-90deg);position:absolute;top:62px;font-size:8px}.section-number{font-weight:400;font-style:normal;font-family:"Parkinson Cond";transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0;cursor:pointer}.section-number.active{opacity:1}.close-button-animated{position:absolute;top:60px;opacity:0;visibility:hidden;left:50%;cursor:pointer;margin-left:-10px}.close-button-animated .close-line{display:inline-block;position:absolute;height:1px;width:20px;background:#fff}.close-about-button .close-line{background:#000}.close-button-animated .hitarea{position:absolute;top:-5px;left:-5px;width:30px;height:30px;transform:translateY(-50%)}.close-button-animated .close-line.left{transform:rotate(-45deg)}.close-button-animated .close-line.right{transform:rotate(45deg)}.nav-container{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%;position:relative;top:150%;transform:translateY(-50%);height:calc(100% + 75px)}.section-images,.section-images .section-image{position:absolute;opacity:0;visibility:hidden;width:100%;left:0}.section-images{top:0;height:100%}.section-images .section-image{background-size:cover;background-position:center;top:-5%;height:110%}.section-overlay{top:0;left:0;width:100%;height:100%;background:#000;opacity:.8}.section-overlay,.arrow,.ui{position:absolute;visibility:hidden}.arrow,.ui{opacity:0}.arrow{width:5px;height:4px;margin-left:-12px;background-size:5px 4px;background-repeat:no-repeat;background-position:center;cursor:pointer;padding:10px;z-index:3}.ui.about,.ui.social,.ui.top.right{z-index:1}.arrow.up{top:-45px;background-image:url(assets/images/arrow_up.png)}.arrow.down{top:22px;background-image:url(assets/images/arrow_down.png)}.ui .social-link{margin-right:15px}.ui .site-audio{display:inline-block;margin-left:5px;width:15px;position:relative;cursor:pointer}.ui .site-audio .eq-bar{width:1px;height:13px;display:block;margin:0 0 0 2px;float:left;position:relative}.ui .site-audio .eq-bar .filler{position:absolute;bottom:0;left:0;width:100%;height:5%;transform:translateZ(0);background:#FFF}.ui.top{top:40px}.ui.left{left:45px}.ui.bottom{bottom:40px}.ui.right{right:45px}.ui.top.right a{opacity:1}.ui.vert-center{top:50%;transform:translateY(-50%)}.ui.horz-center{left:50%;line-height:15px}.ui.horz-center,.scene-info-group{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.scene-info-group{transform:translateX(-50%);margin-top:-5px}.scene-info{display:inline-block;font-size:10px;font-family:bodyFont;margin:0}.scene-info-button{margin-top:3px}.scene-info br{display:none}.scene-info-more{margin-right:8px}.scene-info-underline{position:relative}.scene-info-underline:after,.scene-info-underline:before{content:'';position:absolute;width:0;bottom:-3px;height:1px}.scene-info-underline:before{left:0;transition:width 0s ease,background .6s cubic-bezier(.95,.05,.795,.035)}.scene-info-underline:after,.scene-info-underline:hover:before{background:#fff;transition:width .6s cubic-bezier(.95,.05,.795,.035)}.scene-info-underline:after{right:0}@media (max-width:850px){p.scene-info{font-size:0}p.scene-info:after{font-family:"Parkinson Cond"!important;font-size:23px!important;content:"INFO"}.scene-info-group{margin-top:-2px}.scene-info-more{display:none}}.scene-info-underline:hover:before{width:100%}.scene-info-underline:hover:after{width:100%;background:0 0;transition:all 0s ease}a{position:relative}a .underline{width:0%;height:1px;background:#fff;display:inline;position:absolute;bottom:-3px;left:0}.nav-hover-icon{display:inline-block;width:20px;left:-10px;top:-6px;position:absolute}.nav-hover-icon .line{max-width:20px;height:1px;background:#fff;display:block;margin-top:3px;width:0}.nav-hover-icon .line.short{max-width:17px}.nav-inner{position:relative}.about-falter{background:#dedede;position:absolute;top:0;left:0;width:100%;height:100%;z-index:5;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;text-align:center;opacity:0;visibility:hidden}.about-falter .copy{max-width:500px;width:80%;margin-top:20px}.about-falter a,.about-falter div,.about-falter p{font-size:12px;color:#000;letter-spacing:.02em;line-height:20px}.about-falter .falter-image{margin-top:4em}.about-falter .social-icons{margin:45px 0}.about-falter .social-link{margin:15px}.about-falter .partner-links{position:absolute;bottom:20px;opacity:.6;text-transform:uppercase;letter-spacing:.02em;width:80%;margin-left:10%}.about-falter .partner-links .partner{font-size:10px}.about-falter .partner-links .partner a{font-size:10px;margin:0 2px}.about-falter .partner-links .partner{display:inline-block;margin:0 5px}.about-falter a .underline{background:#000}.about-falter .falter-image img{width:100%}.about-falter .falter-image{max-width:520px;width:60%}@media (max-height:620px){.about-falter .falter-image img{width:40vh}}@media (max-height:440px){.about-falter .falter-image img{display:none}}#eye-auge{opacity:1}#eye-zwincker{opacity:0}.falter-intro-mobile-container{position:absolute;top:50%;opacity:0;visibility:hidden;left:50%;transform:translate(-50%,-50%);text-align:center}.falter-intro-mobile-description{max-width:190px;margin:auto;text-transform:uppercase;line-height:14px;letter-spacing:.1em}.falter-intro-mobile{width:200px;height:250px;overflow:hidden;pointer-events:none;transform:scale(.5)}.falter-intro{position:absolute;top:60%;left:50%;text-align:center;transform:translate(-50%,-50%);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column}.falter-intro .top-circle{width:50px;height:50px;display:inline-block;position:relative;cursor:pointer;opacity:0}.falter-intro .top-circle .circle{width:50px;height:50px;border-radius:50px;border:1px solid #fff;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.falter-intro .connecting-line{height:160px;width:1px;position:relative}.falter-intro .target-circle{width:50px;height:50px;display:inline-block;cursor:pointer;position:relative}.circle-small-dot,.small-dot{width:1px;height:1px;background:#fff;display:inline-block}.small-dot{position:absolute;left:0;top:0}.circle-small-dot{position:absolute;top:50%;left:50%;transform:translate(-50%,-40%)}.falter-intro .falter-intro-description{margin-top:120px;font-size:10px;letter-spacing:.14em;text-transform:uppercase;max-width:250px;opacity:0;visibility:hidden;line-height:18px}.falter-audio{position:absolute;left:50%;transform:translateX(-50%);bottom:44vh;color:#fff;width:200px;text-align:center;line-height:15px;text-transform:uppercase;letter-spacing:.14em}.falter-audio .audio-icon{width:20px;height:20px;opacity:0;margin:15px auto}.falter-audio .audio-icon-container{width:50px;height:50px;position:relative;margin:15px auto}.falter-audio .audio-icon-description,.final-scene-nav{opacity:0;visibility:hidden}.final-scene-nav{position:absolute;bottom:65px;left:50%;transform:translateX(-50%)!important;text-transform:uppercase;font-size:10px;letter-spacing:.1em;display:-ms-flexbox;display:flex}.simple-button{padding:15px 20px;margin:10px;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;position:relative;background-color:#fff;color:#000;transition:background-color .6s cubic-bezier(.19,1,.22,1);width:170px}.simple-button:hover{background-color:#e3e3e3}.simple-button .icon{margin-right:15px;width:17px;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;z-index:1}.simple-button.no-webgl{display:inline-block;margin:20px auto auto;font-size:13px;letter-spacing:.14em}.simple-button .icon.link-arrow{margin-right:15px;width:6px}.simple-button .icon svg{width:100%;height:100%}.simple-button .copy{z-index:1;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;position:relative;-webkit-font-smoothing:subpixel-antialiased;color:#000}.simple-button .hover-bar{width:0;height:100%;position:absolute;background:#e3e3e3;top:0;left:0;z-index:0}@media (max-width:840px){.final-scene-nav{transform:translate(50%,0)!important}.final-scene-nav .reload{display:none}.final-scene-nav .go-falter{margin-left:-100%}}@media (max-width:670px){.arrow,.gradient.short,.section-titles{display:none}.nav-container{height:calc(100% + 35px)}.ui.top{top:10px}.ui.bottom{bottom:15px}.ui.right{right:10px}.ui.left{left:10px}}@media (max-height:270px){.close-button-animated{top:10px}}</style><link rel=apple-touch-icon sizes=57x57 href="apple-touch-icon-57x57.png"><link rel=apple-touch-icon sizes=60x60 href="apple-touch-icon-60x60.png"><link rel=apple-touch-icon sizes=72x72 href="apple-touch-icon-72x72.png"><link rel=apple-touch-icon sizes=76x76 href="apple-touch-icon-76x76.png"><link rel=apple-touch-icon sizes=114x114 href="apple-touch-icon-114x114.png"><link rel=apple-touch-icon sizes=120x120 href="apple-touch-icon-120x120.png"><link rel=apple-touch-icon sizes=144x144 href="apple-touch-icon-144x144.png"><link rel=apple-touch-icon sizes=152x152 href="apple-touch-icon-152x152.png"><link rel=apple-touch-icon sizes=180x180 href="apple-touch-icon-180x180.png"><link rel=icon type=image/png href="favicon-32x32.png" sizes=32x32><link rel=icon type=image/png href="android-chrome-192x192.png" sizes=192x192><link rel=icon type=image/png href="favicon-96x96.png" sizes=96x96><link rel=icon type=image/png href="favicon-16x16.png" sizes=16x16><meta property=og:title content="Falter Inferno"><meta property=og:type content=website><meta property=og:url content=http://falter-inferno.at><meta property=og:description content="Das Falter Inferno. Wer wagt einen Blick in den Spiegel, die Hölle unserer Zeit?"><meta property=og:image content=http://falter-inferno.at/fbshare.png><meta name=twitter:card content=summary><meta name=twitter:url content=http://falter-inferno.at><meta name=twitter:title content="Falter Inferno"><meta name=twitter:description content="Das Falter Inferno. Wer wagt einen Blick in den Spiegel, die Hölle unserer Zeit?"><meta name=twitter:image content=http://falter-inferno.at/fbshare.png><link rel=manifest href="manifest.json"><link rel=mask-icon href="safari-pinned-tab.svg" color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=msapplication-TileImage content=/mstile-144x144.png><meta name=theme-color content=#ffffff><script src="http://code.jquery.com/jquery-2.1.4.min.js"></script><script>var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},r=function(t,e,i){var s,r,n=t.cycle;for(s in n)r=n[s],t[s]="function"==typeof r?r.call(e[i],i):r[i%r.length];delete t.cycle},n=function(t,e,s){i.call(this,t,e,s),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=n.prototype.render},a=1e-10,o=i._internals,l=o.isSelector,h=o.isArray,_=n.prototype=i.to({},.1,{}),u=[];n.version="1.18.0",_.constructor=n,_.kill()._gc=!1,n.killTweensOf=n.killDelayedCallsTo=i.killTweensOf,n.getTweensOf=i.getTweensOf,n.lagSmoothing=i.lagSmoothing,n.ticker=i.ticker,n.render=i.render,_.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},_.updateTo=function(t,e){var s,r=this.ratio,n=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(s in t)this.vars[s]=t[s];if(this._initted||n)if(e)this._initted=!1,n&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._time;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._time>0||n){this._initted=!1,this._init();for(var o,l=1/(1-r),h=this._firstPT;h;)o=h.s+h.c,h.c*=l,h.s=o-h.c,h=h._next}return this},_.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,r,n,l,h,_,u,c,f=this._dirty?this.totalDuration():this._totalDuration,p=this._time,m=this._totalTime,d=this._cycle,g=this._duration,v=this._rawPrevTime;if(t>=f?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>v||v===a)&&v!==t&&(i=!0,v>a&&(r="onReverseComplete")),this._rawPrevTime=c=!e||t||v===t?t:a)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===g&&v>0)&&(r="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||i)&&(v>=0&&(i=!0),this._rawPrevTime=c=!e||t||v===t?t:a)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(l=g+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!==(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:0>this._time&&(this._time=0)),this._easeType?(h=this._time/g,_=this._easeType,u=this._easePower,(1===_||3===_&&h>=.5)&&(h=1-h),3===_&&(h*=2),1===u?h*=h:2===u?h*=h*h:3===u?h*=h*h*h:4===u&&(h*=h*h*h*h),this.ratio=1===_?1-h:2===_?h:.5>this._time/g?h/2:1-h/2):this.ratio=this._ease.getRatio(this._time/g)),p===this._time&&!i&&d===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=m,this._rawPrevTime=v,this._cycle=d,o.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/g):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===g)&&(e||this._callback("onStart"))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||s)&&this._callback("onUpdate")),this._cycle!==d&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===g&&this._rawPrevTime===a&&c!==a&&(this._rawPrevTime=0))},n.to=function(t,e,i){return new n(t,e,i)},n.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new n(t,e,i)},n.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new n(t,e,s)},n.staggerTo=n.allTo=function(t,e,a,o,_,c,f){o=o||0;var p,m,d,g,v=a.delay||0,y=[],T=function(){a.onComplete&&a.onComplete.apply(a.onCompleteScope||this,arguments),_.apply(f||a.callbackScope||this,c||u)},x=a.cycle,b=a.startAt&&a.startAt.cycle;for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),l(t)&&(t=s(t))),t=t||[],0>o&&(t=s(t),t.reverse(),o*=-1),p=t.length-1,d=0;p>=d;d++){m={};for(g in a)m[g]=a[g];if(x&&r(m,t,d),b){b=m.startAt={};for(g in a.startAt)b[g]=a.startAt[g];r(m.startAt,t,d)}m.delay=v,d===p&&_&&(m.onComplete=T),y[d]=new n(t[d],e,m),v+=o}return y},n.staggerFrom=n.allFrom=function(t,e,i,s,r,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,n.staggerTo(t,e,i,s,r,a,o)},n.staggerFromTo=n.allFromTo=function(t,e,i,s,r,a,o,l){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,n.staggerTo(t,e,s,r,a,o,l)},n.delayedCall=function(t,e,i,s,r){return new n(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:s,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},n.set=function(t,e){return new n(t,0,e)},n.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var c=function(t,e){for(var s=[],r=0,n=t._first;n;)n instanceof i?s[r++]=n:(e&&(s[r++]=n),s=s.concat(c(n,e)),r=s.length),n=n._next;return s},f=n.getAllTweens=function(e){return c(t._rootTimeline,e).concat(c(t._rootFramesTimeline,e))};n.killAll=function(t,i,s,r){null==i&&(i=!0),null==s&&(s=!0);var n,a,o,l=f(0!=r),h=l.length,_=i&&s&&r;for(o=0;h>o;o++)a=l[o],(_||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},n.killChildTweensOf=function(t,e){if(null!=t){var r,a,_,u,c,f=o.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),l(t)&&(t=s(t)),h(t))for(u=t.length;--u>-1;)n.killChildTweensOf(t[u],e);else{r=[];for(_ in f)for(a=f[_].target.parentNode;a;)a===t&&(r=r.concat(f[_].tweens)),a=a.parentNode;for(c=r.length,u=0;c>u;u++)e&&r[u].totalTime(r[u].totalDuration()),r[u]._enabled(!1,!1)}}};var p=function(t,i,s,r){i=i!==!1,s=s!==!1,r=r!==!1;for(var n,a,o=f(r),l=i&&s&&r,h=o.length;--h>-1;)a=o[h],(l||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&a.paused(t)};return n.pauseAll=function(t,e,i){p(!0,t,e,i)},n.resumeAll=function(t,e,i){p(!1,t,e,i)},n.globalTimeScale=function(e){var s=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||a,s._startTime=r-(r-s._startTime)*s._timeScale/e,s=t._rootFramesTimeline,r=i.ticker.frame,s._startTime=r-(r-s._startTime)*s._timeScale/e,s._timeScale=t._rootTimeline._timeScale=e,e):s._timeScale},_.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},_.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},_.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},_.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},_.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},_.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},_.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},_.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},n},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,s,r=this.vars;for(s in r)i=r[s],l(i)&&-1!==i.join("").indexOf("{self}")&&(r[s]=this._swapSelfInParams(i));l(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,n=i._internals,a=s._internals={},o=n.isSelector,l=n.isArray,h=n.lazyTweens,_=n.lazyRender,u=_gsScope._gsDefine.globals,c=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=function(t,e,i){var s,r,n=t.cycle;for(s in n)r=n[s],t[s]="function"==typeof r?r.call(e[i],i):r[i%r.length];delete t.cycle},p=a.pauseCallback=function(){},m=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},d=s.prototype=new e;return s.version="1.18.0",d.constructor=s,d.kill()._gc=d._forcingPlayhead=d._hasPause=!1,d.to=function(t,e,s,r){var n=s.repeat&&u.TweenMax||i;return e?this.add(new n(t,e,s),r):this.set(t,s,r)},d.from=function(t,e,s,r){return this.add((s.repeat&&u.TweenMax||i).from(t,e,s),r)},d.fromTo=function(t,e,s,r,n){var a=r.repeat&&u.TweenMax||i;return e?this.add(a.fromTo(t,e,s,r),n):this.set(t,r,n)},d.staggerTo=function(t,e,r,n,a,l,h,_){var u,p,d=new s({onComplete:l,onCompleteParams:h,callbackScope:_,smoothChildTiming:this.smoothChildTiming}),g=r.cycle;for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],o(t)&&(t=m(t)),n=n||0,0>n&&(t=m(t),t.reverse(),n*=-1),p=0;t.length>p;p++)u=c(r),u.startAt&&(u.startAt=c(u.startAt),u.startAt.cycle&&f(u.startAt,t,p)),g&&f(u,t,p),d.to(t[p],e,u,p*n);return this.add(d,a)},d.staggerFrom=function(t,e,i,s,r,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,s,r,n,a,o)},d.staggerFromTo=function(t,e,i,s,r,n,a,o,l){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,s,r,n,a,o,l)},d.call=function(t,e,s,r){return this.add(i.delayedCall(0,t,e,s),r)},d.set=function(t,e,s){return s=this._parseTimeOrLabel(s,0,!0),null==e.immediateRender&&(e.immediateRender=s===this._time&&!this._paused),this.add(new i(t,0,e),s)},s.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,n,a=new s(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,r=o._first;r;)n=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||a.add(r,r._startTime-r._delay),r=n;return o.add(a,0),a},d.add=function(r,n,a,o){var h,_,u,c,f,p;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&l(r)){for(a=a||"normal",o=o||0,h=n,_=r.length,u=0;_>u;u++)l(c=r[u])&&(c=new s({tweens:c})),this.add(c,h),"string"!=typeof c&&"function"!=typeof c&&("sequence"===a?h=c._startTime+c.totalDuration()/c._timeScale:"start"===a&&(c._startTime-=c.delay())),h+=o;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,n);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,n),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=this,p=f.rawTime()>r._startTime;f._timeline;)p&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},d.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&l(e)){for(var s=e.length;--s>-1;)this.remove(e[s]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},d._remove=function(t,i){e.prototype._remove.call(this,t,i);var s=this._last;return s?this._time>s._startTime+s._totalDuration/s._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},d.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},d.insert=d.insertMultiple=function(t,e,i,s){return this.add(t,e||0,i,s)},d.appendMultiple=function(t,e,i,s){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,s)},d.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},d.addPause=function(t,e,s,r){var n=i.delayedCall(0,p,s,r||this);return n.vars.onComplete=n.vars.onReverseComplete=e,n.data="isPause",this._hasPause=!0,this.add(n,t)},d.removeLabel=function(t){return delete this._labels[t],this},d.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},d._parseTimeOrLabel=function(e,i,s,r){var n;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&l(r)))for(n=r.length;--n>-1;)r[n]instanceof t&&r[n].timeline===this&&this.remove(r[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,s);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(n=e.indexOf("="),-1===n)return null==this._labels[e]?s?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,s):this.duration()}return Number(e)+i},d.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},d.stop=function(){return this.paused(!0)},d.gotoAndPlay=function(t,e){return this.play(t,e)},d.gotoAndStop=function(t,e){return this.pause(t,e)},d.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,a,o,l,u,c=this._dirty?this.totalDuration():this._totalDuration,f=this._time,p=this._startTime,m=this._timeScale,d=this._paused;if(t>=c)this._totalTime=this._time=c,this._reversed||this._hasPausedChild()||(n=!0,o="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>r&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=c+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(o="onReverseComplete",n=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=n=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&n)for(s=this._first;s&&0===s._startTime;)s._duration||(n=!1),s=s._next;t=0,this._initted||(l=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=f)for(s=this._first;s&&t>=s._startTime&&!u;)s._duration||"isPause"!==s.data||s.ratio||0===s._startTime&&0===this._rawPrevTime||(u=s),s=s._next;else for(s=this._last;s&&s._startTime>=t&&!u;)s._duration||"isPause"===s.data&&s._rawPrevTime>0&&(u=s),s=s._prev;u&&(this._time=t=u._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==f&&this._first||i||l||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&0!==this._time&&(e||this._callback("onStart")),this._time>=f)for(s=this._first;s&&(a=s._next,!this._paused||d);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(u===s&&this.pause(),s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;else for(s=this._last;s&&(a=s._prev,!this._paused||d);){if(s._active||f>=s._startTime&&!s._paused&&!s._gc){if(u===s){for(u=s._prev;u&&u.endTime()>this._time;)u.render(u._reversed?u.totalDuration()-(t-u._startTime)*u._timeScale:(t-u._startTime)*u._timeScale,e,i),u=u._prev;u=null,this.pause()}s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)}s=a}this._onUpdate&&(e||(h.length&&_(),this._callback("onUpdate"))),o&&(this._gc||(p===this._startTime||m!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(n&&(h.length&&_(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o)))}},d._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof s&&t._hasPausedChild())return!0;t=t._next}return!1},d.getChildren=function(t,e,s,r){r=r||-9999999999;for(var n=[],a=this._first,o=0;a;)r>a._startTime||(a instanceof i?e!==!1&&(n[o++]=a):(s!==!1&&(n[o++]=a),t!==!1&&(n=n.concat(a.getChildren(!0,e,s)),o=n.length))),a=a._next;return n},d.getTweensOf=function(t,e){var s,r,n=this._gc,a=[],o=0;for(n&&this._enabled(!0,!0),s=i.getTweensOf(t),r=s.length;--r>-1;)(s[r].timeline===this||e&&this._contains(s[r]))&&(a[o++]=s[r]);return n&&this._enabled(!1,!0),a},d.recent=function(){return this._recent},d._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},d.shiftChildren=function(t,e,i){i=i||0;for(var s,r=this._first,n=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(s in n)n[s]>=i&&(n[s]+=t);return this._uncache(!0)},d._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),s=i.length,r=!1;--s>-1;)i[s]._kill(t,e)&&(r=!0);return r},d.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},d.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},d._enabled=function(t,i){if(t===this._gc)for(var s=this._first;s;)s._enabled(t,!0),s=s._next;return e.prototype._enabled.call(this,t,i)},d.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},d.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},d.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,s=0,r=this._last,n=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>n&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):n=r._startTime,0>r._startTime&&!r._paused&&(s-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),n=0),i=r._startTime+r._totalDuration/r._timeScale,i>s&&(s=i),r=e;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},d.paused=function(e){if(!e)for(var i=this._first,s=this._time;i;)i._startTime===s&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},d.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},d.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var s=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,n=e._internals,a=n.lazyTweens,o=n.lazyRender,l=new i(null,null,1,0),h=s.prototype=new t;return h.constructor=s,h.kill()._gc=!1,s.version="1.18.0",h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},h.addCallback=function(t,i,s,r){return this.add(e.delayedCall(0,t,s,r),i)},h.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),s=i.length,r=this._parseTimeOrLabel(e);--s>-1;)i[s]._startTime===r&&i[s]._enabled(!1,!1);return this},h.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},h.tweenTo=function(t,i){i=i||{};var s,r,n,a={ease:l,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)a[r]=i[r];return a.time=this._parseTimeOrLabel(t),s=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,n=new e(this,s,a),a.onStart=function(){n.target.paused(!0),n.vars.time!==n.target.time()&&s===n.duration()&&n.duration(Math.abs(n.vars.time-n.target.time())/n.target._timeScale),i.onStart&&n._callback("onStart")},n},h.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var s=this.tweenTo(e,i);return s.duration(Math.abs(s.vars.time-t)/this._timeScale||.001)},h.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,l,h,_,u,c,f=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,m=this._time,d=this._totalTime,g=this._startTime,v=this._timeScale,y=this._rawPrevTime,T=this._paused,x=this._cycle;if(t>=f)this._locked||(this._totalTime=f,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(n=!0,h="onComplete",_=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>y||y===r)&&y!==t&&this._first&&(_=!0,y>r&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=p,t=p+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==m||0===p&&y!==r&&(y>0||0>t&&y>=0)&&!this._locked)&&(h="onReverseComplete",n=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(_=n=!0,h="onReverseComplete"):y>=0&&this._first&&(_=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=p||!e||t||this._rawPrevTime===t?t:r,0===t&&n)for(s=this._first;s&&0===s._startTime;)s._duration||(n=!1),s=s._next;t=0,this._initted||(_=!0)}else if(0===p&&0>y&&(_=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=p+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,t=p+1e-4):0>this._time?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if(t=this._time,t>=m)for(s=this._first;s&&t>=s._startTime&&!c;)s._duration||"isPause"!==s.data||s.ratio||0===s._startTime&&0===this._rawPrevTime||(c=s),s=s._next;else for(s=this._last;s&&s._startTime>=t&&!c;)s._duration||"isPause"===s.data&&s._rawPrevTime>0&&(c=s),s=s._prev;c&&(this._time=t=c._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==x&&!this._locked){var b=this._yoyo&&0!==(1&x),w=b===(this._yoyo&&0!==(1&this._cycle)),P=this._totalTime,O=this._cycle,S=this._rawPrevTime,k=this._time;if(this._totalTime=x*p,x>this._cycle?b=!b:this._totalTime+=p,this._time=m,this._rawPrevTime=0===p?y-1e-4:y,this._cycle=x,this._locked=!0,m=b?0:p,this.render(m,e,0===p),e||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),w&&(m=b?p+1e-4:-1e-4,this.render(m,!0,!1)),this._locked=!1,this._paused&&!T)return;this._time=k,this._totalTime=P,this._cycle=O,this._rawPrevTime=S}if(!(this._time!==m&&this._first||i||_||c))return void(d!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._totalTime&&(e||this._callback("onStart")),this._time>=m)for(s=this._first;s&&(l=s._next,!this._paused||T);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(c===s&&this.pause(),s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=l;else for(s=this._last;s&&(l=s._prev,!this._paused||T);){if(s._active||m>=s._startTime&&!s._paused&&!s._gc){if(c===s){for(c=s._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,i),c=c._prev;c=null,this.pause()}s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)}s=l}this._onUpdate&&(e||(a.length&&o(),this._callback("onUpdate"))),h&&(this._locked||this._gc||(g===this._startTime||v!==this._timeScale)&&(0===this._time||f>=this.totalDuration())&&(n&&(a.length&&o(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this._callback(h)))},h.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var s,r,n=[],a=this.getChildren(t,e,i),o=0,l=a.length;for(s=0;l>s;s++)r=a[s],r.isActive()&&(n[o++]=r);return n},h.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),s=i.length;for(e=0;s>e;e++)if(i[e].time>t)return i[e].name;return null},h.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},h.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},h.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},s},!0),function(){var t=180/Math.PI,e=[],i=[],s=[],r={},n=_gsScope._gsDefine.globals,a=function(t,e,i,s){this.a=t,this.b=e,this.c=i,this.d=s,this.da=s-t,this.ca=i-t,this.ba=e-t},o=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",l=function(t,e,i,s){var r={a:t},n={},a={},o={c:s},l=(t+e)/2,h=(e+i)/2,_=(i+s)/2,u=(l+h)/2,c=(h+_)/2,f=(c-u)/8;return r.b=l+(t-l)/4,n.b=u+f,r.c=n.a=(r.b+n.b)/2,n.c=a.a=(u+c)/2,a.b=c-f,o.b=_+(s-_)/4,a.c=o.a=(a.b+o.b)/2,[r,n,a,o]},h=function(t,r,n,a,o){var h,_,u,c,f,p,m,d,g,v,y,T,x,b=t.length-1,w=0,P=t[0].a;for(h=0;b>h;h++)f=t[w],_=f.a,u=f.d,c=t[w+1].d,o?(y=e[h],T=i[h],x=.25*(T+y)*r/(a?.5:s[h]||.5),p=u-(u-_)*(a?.5*r:0!==y?x/y:0),m=u+(c-u)*(a?.5*r:0!==T?x/T:0),d=u-(p+((m-p)*(3*y/(y+T)+.5)/4||0))):(p=u-.5*(u-_)*r,m=u+.5*(c-u)*r,d=u-(p+m)/2),p+=d,m+=d,f.c=g=p,f.b=0!==h?P:P=f.a+.6*(f.c-f.a),f.da=u-_,f.ca=g-_,f.ba=P-_,n?(v=l(_,P,g,u),t.splice(w,1,v[0],v[1],v[2],v[3]),w+=4):w++,P=m;f=t[w],f.b=P,f.c=P+.4*(f.d-P),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=P-f.a,n&&(v=l(f.a,P,f.c,f.d),t.splice(w,1,v[0],v[1],v[2],v[3]))},_=function(t,s,r,n){var o,l,h,_,u,c,f=[];if(n)for(t=[n].concat(t),l=t.length;--l>-1;)"string"==typeof(c=t[l][s])&&"="===c.charAt(1)&&(t[l][s]=n[s]+Number(c.charAt(0)+c.substr(2)));if(o=t.length-2,0>o)return f[0]=new a(t[0][s],0,0,t[-1>o?0:1][s]),f;for(l=0;o>l;l++)h=t[l][s],_=t[l+1][s],f[l]=new a(h,0,0,_),r&&(u=t[l+2][s],e[l]=(e[l]||0)+(_-h)*(_-h),i[l]=(i[l]||0)+(u-_)*(u-_));return f[l]=new a(t[l][s],0,0,t[l+1][s]),f},u=function(t,n,a,l,u,c){var f,p,m,d,g,v,y,T,x={},b=[],w=c||t[0];u="string"==typeof u?","+u+",":o,null==n&&(n=1);for(p in t[0])b.push(p);if(t.length>1){for(T=t[t.length-1],y=!0,f=b.length;--f>-1;)if(p=b[f],Math.abs(w[p]-T[p])>.05){y=!1;break}y&&(t=t.concat(),c&&t.unshift(c),t.push(t[1]),c=t[t.length-3])}for(e.length=i.length=s.length=0,f=b.length;--f>-1;)p=b[f],r[p]=-1!==u.indexOf(","+p+","),x[p]=_(t,p,r[p],c);for(f=e.length;--f>-1;)e[f]=Math.sqrt(e[f]),i[f]=Math.sqrt(i[f]);if(!l){for(f=b.length;--f>-1;)if(r[p])for(m=x[b[f]],v=m.length-1,d=0;v>d;d++)g=m[d+1].da/i[d]+m[d].da/e[d],s[d]=(s[d]||0)+g*g;for(f=s.length;--f>-1;)s[f]=Math.sqrt(s[f])}for(f=b.length,d=a?4:1;--f>-1;)p=b[f],m=x[p],h(m,n,a,l,r[p]),y&&(m.splice(0,d),m.splice(m.length-d,d));return x},c=function(t,e,i){e=e||"soft";var s,r,n,o,l,h,_,u,c,f,p,m={},d="cubic"===e?3:2,g="soft"===e,v=[];if(g&&i&&(t=[i].concat(t)),null==t||d+1>t.length)throw"invalid Bezier data";for(c in t[0])v.push(c);for(h=v.length;--h>-1;){for(c=v[h],m[c]=l=[],f=0,u=t.length,_=0;u>_;_++)s=null==i?t[_][c]:"string"==typeof(p=t[_][c])&&"="===p.charAt(1)?i[c]+Number(p.charAt(0)+p.substr(2)):Number(p),g&&_>1&&u-1>_&&(l[f++]=(s+l[f-2])/2),l[f++]=s;for(u=f-d+1,f=0,_=0;u>_;_+=d)s=l[_],r=l[_+1],n=l[_+2],o=2===d?0:l[_+3],l[f++]=p=3===d?new a(s,r,n,o):new a(s,(2*r+s)/3,(2*r+n)/3,n);l.length=f}return m},f=function(t,e,i){for(var s,r,n,a,o,l,h,_,u,c,f,p=1/i,m=t.length;--m>-1;)for(c=t[m],n=c.a,a=c.d-n,o=c.c-n,l=c.b-n,s=r=0,_=1;i>=_;_++)h=p*_,u=1-h,s=r-(r=(h*h*a+3*u*(h*o+u*l))*h),f=m*i+_-1,e[f]=(e[f]||0)+s*s},p=function(t,e){e=e>>0||6;var i,s,r,n,a=[],o=[],l=0,h=0,_=e-1,u=[],c=[];for(i in t)f(t[i],a,e);for(r=a.length,s=0;r>s;s++)l+=Math.sqrt(a[s]),n=s%e,c[n]=l,n===_&&(h+=l,n=s/e>>0,u[n]=c,o[n]=h,l=0,c=[]);return{length:h,lengths:o,segments:u}},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var s,r,n,a,o,l=e.values||[],h={},_=l[0],f=e.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",f===!0?0:Number(f)||0]]:null;
for(s in _)this._props.push(s);for(n=this._props.length;--n>-1;)s=this._props[n],this._overwriteProps.push(s),r=this._func[s]="function"==typeof t[s],h[s]=r?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),o||h[s]!==l[0][s]&&(o=h);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):c(l,e.type,h),this._segCount=this._beziers[s].length,this._timeRes){var m=p(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),n=f.length;--n>-1;){for(a=0;3>a;a++)s=f[n][a],this._func[s]="function"==typeof t[s]?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]:!1;s=f[n][2],this._initialRotations[n]=this._func[s]?this._func[s].call(this._target):this._target[s]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,s,r,n,a,o,l,h,_,u,c=this._segCount,f=this._func,p=this._target,m=e!==this._startRatio;if(this._timeRes){if(_=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&c-1>r){for(h=c-1;h>r&&e>=(this._l2=_[++r]););this._l1=_[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&r>0){for(;r>0&&(this._l1=_[--r])>=e;);0===r&&this._l1>e?this._l1=0:r++,this._l2=_[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&u.length-1>r){for(h=u.length-1;h>r&&e>=(this._s2=u[++r]););this._s1=u[r-1],this._si=r}else if(this._s1>e&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&this._s1>e?this._s1=0:r++,this._s2=u[r],this._si=r}o=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?c-1:c*e>>0,o=(e-i*(1/c))*c;for(s=1-o,r=this._props.length;--r>-1;)n=this._props[r],a=this._beziers[n][i],l=(o*o*a.da+3*s*(o*a.ca+s*a.ba))*o+a.a,this._round[n]&&(l=Math.round(l)),f[n]?p[n](l):p[n]=l;if(this._autoRotate){var d,g,v,y,T,x,b,w=this._autoRotate;for(r=w.length;--r>-1;)n=w[r][2],x=w[r][3]||0,b=w[r][4]===!0?1:t,a=this._beziers[w[r][0]],d=this._beziers[w[r][1]],a&&d&&(a=a[i],d=d[i],g=a.a+(a.b-a.a)*o,y=a.b+(a.c-a.b)*o,g+=(y-g)*o,y+=(a.c+(a.d-a.c)*o-y)*o,v=d.a+(d.b-d.a)*o,T=d.b+(d.c-d.b)*o,v+=(T-v)*o,T+=(d.c+(d.d-d.c)*o-T)*o,l=m?Math.atan2(T-v,y-g)*b+x:this._initialRotations[r],f[n]?p[n](l):p[n]=l)}}}),d=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=l,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=n.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,s=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,a,o,l){e instanceof Array&&(e={values:e}),l=new m;var h,_,u,c=e.values,f=c.length-1,p=[],d={};if(0>f)return o;for(h=0;f>=h;h++)u=i(t,c[h],a,o,l,f!==h),p[h]=u.end;for(_ in e)d[_]=e[_];return d.values=p,o=new r(t,"bezier",0,0,u.pt,2),o.data=u,o.plugin=l,o.setRatio=s,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(h=d.autoRotate===!0?0:Number(d.autoRotate),d.autoRotate=null!=u.end.left?[["left","top","rotation",h,!1]]:null!=u.end.x?[["x","y","rotation",h,!1]]:!1),d.autoRotate&&(a._transform||a._enableTransforms(!1),u.autoRotate=a._target._gsTransform),l._onInitTween(u.proxy,d,a._tween),o}})}},d._roundProps=function(t,e){for(var i=this._overwriteProps,s=i.length;--s>-1;)(t[i[s]]||t.bezier||t.bezierThrough)&&(this._round[i[s]]=e)},d._kill=function(t){var e,i,s=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=s.length;--i>-1;)s[i]===e&&s.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,s,r,n,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o=_gsScope._gsDefine.globals,l={},h=a.prototype=new t("css");h.constructor=a,a.version="1.18.0",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,h="px",a.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var _,u,c,f,p,m,d=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,y=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,T=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,b=/opacity:([^;]*)/i,w=/alpha\(opacity *=.+?\)/i,P=/^(rgb|hsl)/,O=/([A-Z])/g,S=/-([a-z])/gi,k=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,R=function(t,e){return e.toUpperCase()},A=/(?:Left|Right|Width)/i,C=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,z=Math.PI/180,F=180/Math.PI,I={},X=document,N=function(t){return X.createElementNS?X.createElementNS("http://www.w3.org/1999/xhtml",t):X.createElement(t)},L=N("div"),E=N("img"),Y=a._internals={_specialProps:l},B=navigator.userAgent,j=function(){var t=B.indexOf("Android"),e=N("a");return c=-1!==B.indexOf("Safari")&&-1===B.indexOf("Chrome")&&(-1===t||Number(B.substr(t+8,1))>3),p=c&&6>Number(B.substr(B.indexOf("Version/")+8,1)),f=-1!==B.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(B)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(B))&&(m=parseFloat(RegExp.$1)),e?(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity)):!1}(),U=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},V=function(t){window.console&&console.log(t)},q="",W="",Z=function(t,e){e=e||L;var i,s,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===r[i[s]+t];);return s>=0?(W=3===s?"ms":i[s],q="-"+W.toLowerCase()+"-",W+t):null},G=X.defaultView?X.defaultView.getComputedStyle:function(){},$=a.getStyle=function(t,e,i,s,r){var n;return j||"opacity"!==e?(!s&&t.style[e]?n=t.style[e]:(i=i||G(t))?n=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(O,"-$1").toLowerCase()):t.currentStyle&&(n=t.currentStyle[e]),null==r||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:r):U(t)},Q=Y.convertToPixels=function(t,i,s,r,n){if("px"===r||!r)return s;if("auto"===r||!s)return 0;var o,l,h,_=A.test(i),u=t,c=L.style,f=0>s;if(f&&(s=-s),"%"===r&&-1!==i.indexOf("border"))o=s/100*(_?t.clientWidth:t.clientHeight);else{if(c.cssText="border:0 solid red;position:"+$(t,"position")+";line-height:0;","%"!==r&&u.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)c[_?"borderLeftWidth":"borderTopWidth"]=s+r;else{if(u=t.parentNode||X.body,l=u._gsCache,h=e.ticker.frame,l&&_&&l.time===h)return l.width*s/100;c[_?"width":"height"]=s+r}u.appendChild(L),o=parseFloat(L[_?"offsetWidth":"offsetHeight"]),u.removeChild(L),_&&"%"===r&&a.cacheWidths!==!1&&(l=u._gsCache=u._gsCache||{},l.time=h,l.width=100*(o/s)),0!==o||n||(o=Q(t,i,s,r,!0))}return f?-o:o},H=Y.calculateOffset=function(t,e,i){if("absolute"!==$(t,"position",i))return 0;var s="left"===e?"Left":"Top",r=$(t,"margin"+s,i);return t["offset"+s]-(Q(t,e,parseFloat(r),r.replace(T,""))||0)},K=function(t,e){var i,s,r,n={};if(e=e||G(t,null))if(i=e.length)for(;--i>-1;)r=e[i],(-1===r.indexOf("-transform")||Ot===r)&&(n[r.replace(S,R)]=e.getPropertyValue(r));else for(i in e)(-1===i.indexOf("Transform")||Pt===i)&&(n[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===n[i]&&(n[i.replace(S,R)]=e[i]);return j||(n.opacity=U(t)),s=Nt(t,e,!1),n.rotation=s.rotation,n.skewX=s.skewX,n.scaleX=s.scaleX,n.scaleY=s.scaleY,n.x=s.x,n.y=s.y,kt&&(n.z=s.z,n.rotationX=s.rotationX,n.rotationY=s.rotationY,n.scaleZ=s.scaleZ),n.filters&&delete n.filters,n},J=function(t,e,i,s,r){var n,a,o,l={},h=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"==typeof n||"string"==typeof n)&&(l[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(y,"")?n:0:H(t,a),void 0!==h[a]&&(o=new pt(h,a,h[a],o)));if(s)for(a in s)"className"!==a&&(l[a]=s[a]);return{difs:l,firstMPT:o}},tt={width:["Left","Right"],height:["Top","Bottom"]},et=["marginLeft","marginRight","marginTop","marginBottom"],it=function(t,e,i){var s=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=tt[e],n=r.length;for(i=i||G(t,null);--n>-1;)s-=parseFloat($(t,"padding"+r[n],i,!0))||0,s-=parseFloat($(t,"border"+r[n]+"Width",i,!0))||0;return s},st=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";(null==t||""===t)&&(t="0 0");var i=t.split(" "),s=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="center"===s?"50%":"0":"center"===r&&(r="50%"),("center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("="))&&(s="50%"),t=s+" "+r+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==s.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===s.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(s.replace(y,"")),e.oy=parseFloat(r.replace(y,"")),e.v=t),e||t},rt=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},nt=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},at=function(t,e,i,s){var r,n,a,o,l,h=1e-6;return null==t?o=e:"number"==typeof t?o=t:(r=360,n=t.split("_"),l="="===t.charAt(1),a=(l?parseInt(t.charAt(0)+"1",10)*parseFloat(n[0].substr(2)):parseFloat(n[0]))*(-1===t.indexOf("rad")?1:F)-(l?0:e),n.length&&(s&&(s[i]=e+a),-1!==t.indexOf("short")&&(a%=r,a!==a%(r/2)&&(a=0>a?a+r:a-r)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*r)%r-(0|a/r)*r:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*r)%r-(0|a/r)*r)),o=e+a),h>o&&o>-h&&(o=0),o},ot={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},lt=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},ht=a.parseColor=function(t,e){var i,s,r,n,a,o,l,h,_,u,c;if(t)if("number"==typeof t)i=[t>>16,255&t>>8,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ot[t])i=ot[t];else if("#"===t.charAt(0))4===t.length&&(s=t.charAt(1),r=t.charAt(2),n=t.charAt(3),t="#"+s+s+r+r+n+n),t=parseInt(t.substr(1),16),i=[t>>16,255&t>>8,255&t];else if("hsl"===t.substr(0,3))if(i=c=t.match(d),e){if(-1!==t.indexOf("="))return t.match(g)}else a=Number(i[0])%360/360,o=Number(i[1])/100,l=Number(i[2])/100,r=.5>=l?l*(o+1):l+o-l*o,s=2*l-r,i.length>3&&(i[3]=Number(t[3])),i[0]=lt(a+1/3,s,r),i[1]=lt(a,s,r),i[2]=lt(a-1/3,s,r);else i=t.match(d)||ot.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=ot.black;return e&&!c&&(s=i[0]/255,r=i[1]/255,n=i[2]/255,h=Math.max(s,r,n),_=Math.min(s,r,n),l=(h+_)/2,h===_?a=o=0:(u=h-_,o=l>.5?u/(2-h-_):u/(h+_),a=h===s?(r-n)/u+(n>r?6:0):h===r?(n-s)/u+2:(s-r)/u+4,a*=60),i[0]=0|a+.5,i[1]=0|100*o+.5,i[2]=0|100*l+.5),i},_t=function(t,e){var i,s,r,n=t.match(ut)||[],a=0,o=n.length?"":t;for(i=0;n.length>i;i++)s=n[i],r=t.substr(a,t.indexOf(s,a)-a),a+=r.length+s.length,s=ht(s,e),3===s.length&&s.push(1),o+=r+(e?"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+s[3]:"rgba("+s.join(","))+")";return o},ut="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(h in ot)ut+="|"+h+"\\b";ut=RegExp(ut+")","gi"),a.colorStringFilter=function(t){var e,i=t[0]+t[1];ut.lastIndex=0,ut.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=_t(t[0],e),t[1]=_t(t[1],e))},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var ct=function(t,e,i,s){if(null==t)return function(t){return t};var r,n=e?(t.match(ut)||[""])[0]:"",a=t.split(n).join("").match(v)||[],o=t.substr(0,t.indexOf(a[0])),l=")"===t.charAt(t.length-1)?")":"",h=-1!==t.indexOf(" ")?" ":",",_=a.length,u=_>0?a[0].replace(d,""):"";return _?r=e?function(t){var e,c,f,p;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(p=t.replace(M,"|").split("|"),f=0;p.length>f;f++)p[f]=r(p[f]);return p.join(",")}if(e=(t.match(ut)||[n])[0],c=t.split(e).join("").match(v)||[],f=c.length,_>f--)for(;_>++f;)c[f]=i?c[0|(f-1)/2]:a[f];return o+c.join(h)+h+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,c;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(n=t.replace(M,"|").split("|"),c=0;n.length>c;c++)n[c]=r(n[c]);return n.join(",")}if(e=t.match(v)||[],c=e.length,_>c--)for(;_>++c;)e[c]=i?e[0|(c-1)/2]:a[c];return o+e.join(h)+l}:function(t){return t}},ft=function(t){return t=t.split(","),function(e,i,s,r,n,a,o){var l,h=(i+"").split(" ");for(o={},l=0;4>l;l++)o[t[l]]=h[l]=h[l]||h[(l-1)/2>>0];return r.parse(e,o,n,a)}},pt=(Y._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,s,r,n=this.data,a=n.proxy,o=n.firstMPT,l=1e-6;o;)e=a[o.v],o.r?e=Math.round(e):l>e&&e>-l&&(e=0),o.t[o.p]=e,o=o._next;if(n.autoRotate&&(n.autoRotate.rotation=a.rotation),1===t)for(o=n.firstMPT;o;){if(i=o.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,s=1;i.l>s;s++)r+=i["xn"+s]+i["xs"+(s+1)];i.e=r}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,s,r){this.t=t,this.p=e,this.v=i,this.r=r,s&&(s._prev=this,this._next=s)}),mt=(Y._parseToProxy=function(t,e,i,s,r,n){var a,o,l,h,_,u=s,c={},f={},p=i._transform,m=I;for(i._transform=null,I=e,s=_=i.parse(t,e,s,r),I=m,n&&(i._transform=p,u&&(u._prev=null,u._prev&&(u._prev._next=null)));s&&s!==u;){if(1>=s.type&&(o=s.p,f[o]=s.s+s.c,c[o]=s.s,n||(h=new pt(s,"s",o,h,s.r),s.c=0),1===s.type))for(a=s.l;--a>0;)l="xn"+a,o=s.p+"_"+l,f[o]=s.data[l],c[o]=s[l],n||(h=new pt(s,l,o,h,s.rxp[l]));s=s._next}return{proxy:c,end:f,firstMPT:h,pt:_}},Y.CSSPropTween=function(t,e,s,r,a,o,l,h,_,u,c){this.t=t,this.p=e,this.s=s,this.c=r,this.n=l||e,t instanceof mt||n.push(this.n),this.r=h,this.type=o||0,_&&(this.pr=_,i=!0),this.b=void 0===u?s:u,this.e=void 0===c?s+r:c,a&&(this._next=a,a._prev=this)}),dt=function(t,e,i,s,r,n){var a=new mt(t,e,i,s-i,r,-1,n);return a.b=i,a.e=a.xs0=s,a},gt=a.parseComplex=function(t,e,i,s,r,n,a,o,l,h){i=i||n||"",a=new mt(t,e,0,0,a,h?2:1,null,!1,o,i,s),s+="";var u,c,f,p,m,v,y,T,x,b,w,P,O,S=i.split(", ").join(",").split(" "),k=s.split(", ").join(",").split(" "),R=S.length,A=_!==!1;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(S=S.join(" ").replace(M,", ").split(" "),k=k.join(" ").replace(M,", ").split(" "),R=S.length),R!==k.length&&(S=(n||"").split(" "),R=S.length),a.plugin=l,a.setRatio=h,ut.lastIndex=0,u=0;R>u;u++)if(p=S[u],m=k[u],T=parseFloat(p),T||0===T)a.appendXtra("",T,rt(m,T),m.replace(g,""),A&&-1!==m.indexOf("px"),!0);else if(r&&ut.test(p))P=","===m.charAt(m.length-1)?"),":")",O=-1!==m.indexOf("hsl")&&j,p=ht(p,O),m=ht(m,O),x=p.length+m.length>6,x&&!j&&0===m[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(k[u]).join("transparent")):(j||(x=!1),O?a.appendXtra(x?"hsla(":"hsl(",p[0],rt(m[0],p[0]),",",!1,!0).appendXtra("",p[1],rt(m[1],p[1]),"%,",!1).appendXtra("",p[2],rt(m[2],p[2]),x?"%,":"%"+P,!1):a.appendXtra(x?"rgba(":"rgb(",p[0],m[0]-p[0],",",!0,!0).appendXtra("",p[1],m[1]-p[1],",",!0).appendXtra("",p[2],m[2]-p[2],x?",":P,!0),x&&(p=4>p.length?1:p[3],a.appendXtra("",p,(4>m.length?1:m[3])-p,P,!1))),ut.lastIndex=0;else if(v=p.match(d)){if(y=m.match(g),!y||y.length!==v.length)return a;for(f=0,c=0;v.length>c;c++)w=v[c],b=p.indexOf(w,f),a.appendXtra(p.substr(f,b-f),Number(w),rt(y[c],w),"",A&&"px"===p.substr(b+w.length,2),0===c),f=b+w.length;a["xs"+a.l]+=p.substr(f)}else a["xs"+a.l]+=a.l?" "+p:p;if(-1!==s.indexOf("=")&&a.data){for(P=a.xs0+a.data.s,u=1;a.l>u;u++)P+=a["xs"+u]+a.data["xn"+u];a.e=P+a["xs"+u]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},vt=9;for(h=mt.prototype,h.l=h.pr=0;--vt>0;)h["xn"+vt]=0,h["xs"+vt]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,i,s,r,n){var a=this,o=a.l;return a["xs"+o]+=n&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=s||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=r,a["xn"+o]=e,a.plugin||(a.xfirst=new mt(a,"xn"+o,e,i,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=r,a)):(a["xs"+o]+=e+(s||""),a)};var yt=function(t,e){e=e||{},this.p=e.prefix?Z(t)||t:t,l[t]=l[this.p]=this,this.format=e.formatter||ct(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},Tt=Y._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var s,r,n=t.split(","),a=e.defaultValue;for(i=i||[a],s=0;n.length>s;s++)e.prefix=0===s&&e.prefix,e.defaultValue=i[s]||a,r=new yt(n[s],e)},xt=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";Tt(t,{parser:function(t,i,s,r,n,a,h){var _=o.com.greensock.plugins[e];return _?(_._cssRegister(),l[s].parse(t,i,s,r,n,a,h)):(V("Error: "+e+" js file not loaded."),n)}})}};h=yt.prototype,h.parseComplex=function(t,e,i,s,r,n){var a,o,l,h,_,u,c=this.keyword;if(this.multi&&(M.test(i)||M.test(e)?(o=e.replace(M,"|").split("|"),l=i.replace(M,"|").split("|")):c&&(o=[e],l=[i])),l){for(h=l.length>o.length?l.length:o.length,a=0;h>a;a++)e=o[a]=o[a]||this.dflt,i=l[a]=l[a]||this.dflt,c&&(_=e.indexOf(c),u=i.indexOf(c),_!==u&&(-1===u?o[a]=o[a].split(c).join(""):-1===_&&(o[a]+=" "+c)));e=o.join(", "),i=l.join(", ")}return gt(t,this.p,e,i,this.clrs,this.dflt,s,this.pr,r,n)},h.parse=function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format($(t,this.p,r,!1,this.dflt)),this.format(e),n,a)},a.registerSpecialProp=function(t,e,i){Tt(t,{parser:function(t,s,r,n,a,o){var l=new mt(t,r,0,0,a,2,r,!1,i);return l.plugin=o,l.setRatio=e(t,s,n._tween,r),l},priority:i})},a.useSVGTransformAttr=c||f;var bt,wt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Pt=Z("transform"),Ot=q+"transform",St=Z("transformOrigin"),kt=null!==Z("perspective"),Rt=Y.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=a.defaultForce3D!==!1&&kt?a.defaultForce3D||"auto":!1},At=window.SVGElement,Ct=function(t,e,i){var s,r=X.createElementNS("http://www.w3.org/2000/svg",t),n=/([a-z])([A-Z])/g;for(s in i)r.setAttributeNS(null,s.replace(n,"$1-$2").toLowerCase(),i[s]);return e.appendChild(r),r},Dt=X.documentElement,Mt=function(){var t,e,i,s=m||/Android/i.test(B)&&!window.chrome;return X.createElementNS&&!s&&(t=Ct("svg",Dt),e=Ct("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[St]="50% 50%",e.style[Pt]="scaleX(0.5)",s=i===e.getBoundingClientRect().width&&!(f&&kt),Dt.removeChild(t)),s}(),zt=function(t,e,i,s,r){var n,o,l,h,_,u,c,f,p,m,d,g,v,y,T=t._gsTransform,x=Xt(t,!0);T&&(v=T.xOrigin,y=T.yOrigin),(!s||2>(n=s.split(" ")).length)&&(c=t.getBBox(),e=st(e).split(" "),n=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*c.width:parseFloat(e[0]))+c.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*c.height:parseFloat(e[1]))+c.y]),i.xOrigin=h=parseFloat(n[0]),i.yOrigin=_=parseFloat(n[1]),s&&x!==It&&(u=x[0],c=x[1],f=x[2],p=x[3],m=x[4],d=x[5],g=u*p-c*f,o=h*(p/g)+_*(-f/g)+(f*d-p*m)/g,l=h*(-c/g)+_*(u/g)-(u*d-c*m)/g,h=i.xOrigin=n[0]=o,_=i.yOrigin=n[1]=l),T&&(r||r!==!1&&a.defaultSmoothOrigin!==!1?(o=h-v,l=_-y,T.xOffset+=o*x[0]+l*x[2]-o,T.yOffset+=o*x[1]+l*x[3]-l):T.xOffset=T.yOffset=0),t.setAttribute("data-svg-origin",n.join(" "))},Ft=function(t){return!!(At&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM))},It=[1,0,0,1,0,0],Xt=function(t,e){var i,s,r,n,a,o=t._gsTransform||new Rt,l=1e5;if(Pt?s=$(t,Ot,null,!0):t.currentStyle&&(s=t.currentStyle.filter.match(C),s=s&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),o.x||0,o.y||0].join(","):""),i=!s||"none"===s||"matrix(1, 0, 0, 1, 0, 0)"===s,(o.svg||t.getBBox&&Ft(t))&&(i&&-1!==(t.style[Pt]+"").indexOf("matrix")&&(s=t.style[Pt],i=0),r=t.getAttribute("transform"),i&&r&&(-1!==r.indexOf("matrix")?(s=r,i=0):-1!==r.indexOf("translate")&&(s="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return It;for(r=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],vt=r.length;--vt>-1;)n=Number(r[vt]),r[vt]=(a=n-(n|=0))?(0|a*l+(0>a?-.5:.5))/l+n:n;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Nt=Y.getTransform=function(t,i,s,n){if(t._gsTransform&&s&&!n)return t._gsTransform;var o,l,h,_,u,c,f=s?t._gsTransform||new Rt:new Rt,p=0>f.scaleX,m=2e-5,d=1e5,g=kt?parseFloat($(t,St,i,!1,"0 0 0").split(" ")[2])||f.zOrigin||0:0,v=parseFloat(a.defaultTransformPerspective)||0;if(f.svg=!(!t.getBBox||!Ft(t)),f.svg&&(zt(t,$(t,St,r,!1,"50% 50%")+"",f,t.getAttribute("data-svg-origin")),bt=a.useSVGTransformAttr||Mt),o=Xt(t),o!==It){if(16===o.length){var y,T,x,b,w,P=o[0],O=o[1],S=o[2],k=o[3],R=o[4],A=o[5],C=o[6],D=o[7],M=o[8],z=o[9],I=o[10],X=o[12],N=o[13],L=o[14],E=o[11],Y=Math.atan2(C,I);f.zOrigin&&(L=-f.zOrigin,X=M*L-o[12],N=z*L-o[13],L=I*L+f.zOrigin-o[14]),f.rotationX=Y*F,Y&&(b=Math.cos(-Y),w=Math.sin(-Y),y=R*b+M*w,T=A*b+z*w,x=C*b+I*w,M=R*-w+M*b,z=A*-w+z*b,I=C*-w+I*b,E=D*-w+E*b,R=y,A=T,C=x),Y=Math.atan2(M,I),f.rotationY=Y*F,Y&&(b=Math.cos(-Y),w=Math.sin(-Y),y=P*b-M*w,T=O*b-z*w,x=S*b-I*w,z=O*w+z*b,I=S*w+I*b,E=k*w+E*b,P=y,O=T,S=x),Y=Math.atan2(O,P),f.rotation=Y*F,Y&&(b=Math.cos(-Y),w=Math.sin(-Y),P=P*b+R*w,T=O*b+A*w,A=O*-w+A*b,C=S*-w+C*b,O=T),f.rotationX&&Math.abs(f.rotationX)+Math.abs(f.rotation)>359.9&&(f.rotationX=f.rotation=0,f.rotationY+=180),f.scaleX=(0|Math.sqrt(P*P+O*O)*d+.5)/d,f.scaleY=(0|Math.sqrt(A*A+z*z)*d+.5)/d,f.scaleZ=(0|Math.sqrt(C*C+I*I)*d+.5)/d,f.skewX=0,f.perspective=E?1/(0>E?-E:E):0,f.x=X,f.y=N,f.z=L,f.svg&&(f.x-=f.xOrigin-(f.xOrigin*P-f.yOrigin*R),f.y-=f.yOrigin-(f.yOrigin*O-f.xOrigin*A))}else if(!(kt&&!n&&o.length&&f.x===o[4]&&f.y===o[5]&&(f.rotationX||f.rotationY)||void 0!==f.x&&"none"===$(t,"display",i))){var B=o.length>=6,j=B?o[0]:1,U=o[1]||0,V=o[2]||0,q=B?o[3]:1;f.x=o[4]||0,f.y=o[5]||0,h=Math.sqrt(j*j+U*U),_=Math.sqrt(q*q+V*V),u=j||U?Math.atan2(U,j)*F:f.rotation||0,c=V||q?Math.atan2(V,q)*F+u:f.skewX||0,Math.abs(c)>90&&270>Math.abs(c)&&(p?(h*=-1,c+=0>=u?180:-180,u+=0>=u?180:-180):(_*=-1,c+=0>=c?180:-180)),f.scaleX=h,f.scaleY=_,f.rotation=u,f.skewX=c,kt&&(f.rotationX=f.rotationY=f.z=0,f.perspective=v,f.scaleZ=1),f.svg&&(f.x-=f.xOrigin-(f.xOrigin*j+f.yOrigin*V),f.y-=f.yOrigin-(f.xOrigin*U+f.yOrigin*q))}f.zOrigin=g;for(l in f)m>f[l]&&f[l]>-m&&(f[l]=0)}return s&&(t._gsTransform=f,f.svg&&(bt&&t.style[Pt]?e.delayedCall(.001,function(){Bt(t.style,Pt)}):!bt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),f},Lt=function(t){var e,i,s=this.data,r=-s.rotation*z,n=r+s.skewX*z,a=1e5,o=(0|Math.cos(r)*s.scaleX*a)/a,l=(0|Math.sin(r)*s.scaleX*a)/a,h=(0|Math.sin(n)*-s.scaleY*a)/a,_=(0|Math.cos(n)*s.scaleY*a)/a,u=this.t.style,c=this.t.currentStyle;if(c){i=l,l=-h,h=-i,e=c.filter,u.filter="";var f,p,d=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==c.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+l+", M21="+h+", M22="+_,b=s.x+d*s.xPercent/100,w=s.y+g*s.yPercent/100;if(null!=s.ox&&(f=(s.oxp?.01*d*s.ox:s.ox)-d/2,p=(s.oyp?.01*g*s.oy:s.oy)-g/2,b+=f-(f*o+p*l),w+=p-(f*h+p*_)),v?(f=d/2,p=g/2,y+=", Dx="+(f-(f*o+p*l)+b)+", Dy="+(p-(f*h+p*_)+w)+")"):y+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(D,y):y+" "+e,(0===t||1===t)&&1===o&&0===l&&0===h&&1===_&&(v&&-1===y.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient("&&e.indexOf("Alpha"))&&u.removeAttribute("filter")),!v){var P,O,S,k=8>m?1:-1;for(f=s.ieOffsetX||0,p=s.ieOffsetY||0,s.ieOffsetX=Math.round((d-((0>o?-o:o)*d+(0>l?-l:l)*g))/2+b),s.ieOffsetY=Math.round((g-((0>_?-_:_)*g+(0>h?-h:h)*d))/2+w),vt=0;4>vt;vt++)O=et[vt],P=c[O],i=-1!==P.indexOf("px")?parseFloat(P):Q(this.t,O,parseFloat(P),P.replace(T,""))||0,S=i!==s[O]?2>vt?-s.ieOffsetX:-s.ieOffsetY:2>vt?f-s.ieOffsetX:p-s.ieOffsetY,u[O]=(s[O]=Math.round(i-S*(0===vt||2===vt?1:k)))+"px"}}},Et=Y.set3DTransformRatio=Y.setTransformRatio=function(t){var e,i,s,r,n,a,o,l,h,_,u,c,p,m,d,g,v,y,T,x,b,w,P,O=this.data,S=this.t.style,k=O.rotation,R=O.rotationX,A=O.rotationY,C=O.scaleX,D=O.scaleY,M=O.scaleZ,F=O.x,I=O.y,X=O.z,N=O.svg,L=O.perspective,E=O.force3D;if(!((1!==t&&0!==t||"auto"!==E||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&E||X||L||A||R)||bt&&N||!kt)return void(k||O.skewX||N?(k*=z,w=O.skewX*z,P=1e5,e=Math.cos(k)*C,r=Math.sin(k)*C,i=Math.sin(k-w)*-D,n=Math.cos(k-w)*D,w&&"simple"===O.skewType&&(v=Math.tan(w),v=Math.sqrt(1+v*v),i*=v,n*=v,O.skewY&&(e*=v,r*=v)),N&&(F+=O.xOrigin-(O.xOrigin*e+O.yOrigin*i)+O.xOffset,I+=O.yOrigin-(O.xOrigin*r+O.yOrigin*n)+O.yOffset,bt&&(O.xPercent||O.yPercent)&&(m=this.t.getBBox(),F+=.01*O.xPercent*m.width,I+=.01*O.yPercent*m.height),m=1e-6,m>F&&F>-m&&(F=0),m>I&&I>-m&&(I=0)),T=(0|e*P)/P+","+(0|r*P)/P+","+(0|i*P)/P+","+(0|n*P)/P+","+F+","+I+")",N&&bt?this.t.setAttribute("transform","matrix("+T):S[Pt]=(O.xPercent||O.yPercent?"translate("+O.xPercent+"%,"+O.yPercent+"%) matrix(":"matrix(")+T):S[Pt]=(O.xPercent||O.yPercent?"translate("+O.xPercent+"%,"+O.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+D+","+F+","+I+")");if(f&&(m=1e-4,m>C&&C>-m&&(C=M=2e-5),m>D&&D>-m&&(D=M=2e-5),!L||O.z||O.rotationX||O.rotationY||(L=0)),k||O.skewX)k*=z,d=e=Math.cos(k),g=r=Math.sin(k),O.skewX&&(k-=O.skewX*z,d=Math.cos(k),g=Math.sin(k),"simple"===O.skewType&&(v=Math.tan(O.skewX*z),v=Math.sqrt(1+v*v),d*=v,g*=v,O.skewY&&(e*=v,r*=v))),i=-g,n=d;else{if(!(A||R||1!==M||L||N))return void(S[Pt]=(O.xPercent||O.yPercent?"translate("+O.xPercent+"%,"+O.yPercent+"%) translate3d(":"translate3d(")+F+"px,"+I+"px,"+X+"px)"+(1!==C||1!==D?" scale("+C+","+D+")":""));e=n=1,i=r=0}h=1,s=a=o=l=_=u=0,c=L?-1/L:0,p=O.zOrigin,m=1e-6,x=",",b="0",k=A*z,k&&(d=Math.cos(k),g=Math.sin(k),o=-g,_=c*-g,s=e*g,a=r*g,h=d,c*=d,e*=d,r*=d),k=R*z,k&&(d=Math.cos(k),g=Math.sin(k),v=i*d+s*g,y=n*d+a*g,l=h*g,u=c*g,s=i*-g+s*d,a=n*-g+a*d,h*=d,c*=d,i=v,n=y),1!==M&&(s*=M,a*=M,h*=M,c*=M),1!==D&&(i*=D,n*=D,l*=D,u*=D),1!==C&&(e*=C,r*=C,o*=C,_*=C),(p||N)&&(p&&(F+=s*-p,I+=a*-p,X+=h*-p+p),N&&(F+=O.xOrigin-(O.xOrigin*e+O.yOrigin*i)+O.xOffset,I+=O.yOrigin-(O.xOrigin*r+O.yOrigin*n)+O.yOffset),m>F&&F>-m&&(F=b),m>I&&I>-m&&(I=b),m>X&&X>-m&&(X=0)),T=O.xPercent||O.yPercent?"translate("+O.xPercent+"%,"+O.yPercent+"%) matrix3d(":"matrix3d(",T+=(m>e&&e>-m?b:e)+x+(m>r&&r>-m?b:r)+x+(m>o&&o>-m?b:o),T+=x+(m>_&&_>-m?b:_)+x+(m>i&&i>-m?b:i)+x+(m>n&&n>-m?b:n),R||A?(T+=x+(m>l&&l>-m?b:l)+x+(m>u&&u>-m?b:u)+x+(m>s&&s>-m?b:s),T+=x+(m>a&&a>-m?b:a)+x+(m>h&&h>-m?b:h)+x+(m>c&&c>-m?b:c)+x):T+=",0,0,0,0,1,0,",T+=F+x+I+x+X+x+(L?1+-X/L:1)+")",S[Pt]=T};h=Rt.prototype,h.x=h.y=h.z=h.skewX=h.skewY=h.rotation=h.rotationX=h.rotationY=h.zOrigin=h.xPercent=h.yPercent=h.xOffset=h.yOffset=0,h.scaleX=h.scaleY=h.scaleZ=1,Tt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,s,n,o,l){if(s._lastParsedTransform===l)return n;s._lastParsedTransform=l;var h,_,u,c,f,p,m,d,g,v,y=t._gsTransform,T=t.style,x=1e-6,b=wt.length,w=l,P={},O="transformOrigin";if(l.display?(c=$(t,"display"),T.display="block",h=Nt(t,r,!0,l.parseTransform),T.display=c):h=Nt(t,r,!0,l.parseTransform),s._transform=h,"string"==typeof w.transform&&Pt)c=L.style,c[Pt]=w.transform,c.display="block",c.position="absolute",X.body.appendChild(L),_=Nt(L,null,!1),X.body.removeChild(L),_.perspective||(_.perspective=h.perspective),null!=w.xPercent&&(_.xPercent=nt(w.xPercent,h.xPercent)),null!=w.yPercent&&(_.yPercent=nt(w.yPercent,h.yPercent));else if("object"==typeof w){if(_={scaleX:nt(null!=w.scaleX?w.scaleX:w.scale,h.scaleX),scaleY:nt(null!=w.scaleY?w.scaleY:w.scale,h.scaleY),scaleZ:nt(w.scaleZ,h.scaleZ),x:nt(w.x,h.x),y:nt(w.y,h.y),z:nt(w.z,h.z),xPercent:nt(w.xPercent,h.xPercent),yPercent:nt(w.yPercent,h.yPercent),perspective:nt(w.transformPerspective,h.perspective)},d=w.directionalRotation,null!=d)if("object"==typeof d)for(c in d)w[c]=d[c];else w.rotation=d;"string"==typeof w.x&&-1!==w.x.indexOf("%")&&(_.x=0,_.xPercent=nt(w.x,h.xPercent)),"string"==typeof w.y&&-1!==w.y.indexOf("%")&&(_.y=0,_.yPercent=nt(w.y,h.yPercent)),_.rotation=at("rotation"in w?w.rotation:"shortRotation"in w?w.shortRotation+"_short":"rotationZ"in w?w.rotationZ:h.rotation,h.rotation,"rotation",P),kt&&(_.rotationX=at("rotationX"in w?w.rotationX:"shortRotationX"in w?w.shortRotationX+"_short":h.rotationX||0,h.rotationX,"rotationX",P),_.rotationY=at("rotationY"in w?w.rotationY:"shortRotationY"in w?w.shortRotationY+"_short":h.rotationY||0,h.rotationY,"rotationY",P)),_.skewX=null==w.skewX?h.skewX:at(w.skewX,h.skewX),_.skewY=null==w.skewY?h.skewY:at(w.skewY,h.skewY),(u=_.skewY-h.skewY)&&(_.skewX+=u,_.rotation+=u)}for(kt&&null!=w.force3D&&(h.force3D=w.force3D,m=!0),h.skewType=w.skewType||h.skewType||a.defaultSkewType,p=h.force3D||h.z||h.rotationX||h.rotationY||_.z||_.rotationX||_.rotationY||_.perspective,p||null==w.scale||(_.scaleZ=1);--b>-1;)i=wt[b],f=_[i]-h[i],(f>x||-x>f||null!=w[i]||null!=I[i])&&(m=!0,n=new mt(h,i,h[i],f,n),i in P&&(n.e=P[i]),n.xs0=0,n.plugin=o,s._overwriteProps.push(n.n));return f=w.transformOrigin,h.svg&&(f||w.svgOrigin)&&(g=h.xOffset,v=h.yOffset,zt(t,st(f),_,w.svgOrigin,w.smoothOrigin),n=dt(h,"xOrigin",(y?h:_).xOrigin,_.xOrigin,n,O),n=dt(h,"yOrigin",(y?h:_).yOrigin,_.yOrigin,n,O),(g!==h.xOffset||v!==h.yOffset)&&(n=dt(h,"xOffset",y?g:h.xOffset,h.xOffset,n,O),n=dt(h,"yOffset",y?v:h.yOffset,h.yOffset,n,O)),f=bt?null:"0px 0px"),(f||kt&&p&&h.zOrigin)&&(Pt?(m=!0,i=St,f=(f||$(t,i,r,!1,"50% 50%"))+"",n=new mt(T,i,0,0,n,-1,O),n.b=T[i],n.plugin=o,kt?(c=h.zOrigin,f=f.split(" "),h.zOrigin=(f.length>2&&(0===c||"0px"!==f[2])?parseFloat(f[2]):c)||0,n.xs0=n.e=f[0]+" "+(f[1]||"50%")+" 0px",n=new mt(h,"zOrigin",0,0,n,-1,n.n),n.b=c,n.xs0=n.e=h.zOrigin):n.xs0=n.e=f):st(f+"",h)),m&&(s._transformType=h.svg&&bt||!p&&3!==this._transformType?2:3),n},prefix:!0}),Tt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Tt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a){e=this.format(e);var o,l,h,_,u,c,f,p,m,d,g,v,y,T,x,b,w=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],P=t.style;for(m=parseFloat(t.offsetWidth),d=parseFloat(t.offsetHeight),o=e.split(" "),l=0;w.length>l;l++)this.p.indexOf("border")&&(w[l]=Z(w[l])),u=_=$(t,w[l],r,!1,"0px"),-1!==u.indexOf(" ")&&(_=u.split(" "),u=_[0],_=_[1]),c=h=o[l],f=parseFloat(u),v=u.substr((f+"").length),y="="===c.charAt(1),y?(p=parseInt(c.charAt(0)+"1",10),c=c.substr(2),p*=parseFloat(c),g=c.substr((p+"").length-(0>p?1:0))||""):(p=parseFloat(c),g=c.substr((p+"").length)),""===g&&(g=s[i]||v),g!==v&&(T=Q(t,"borderLeft",f,v),x=Q(t,"borderTop",f,v),"%"===g?(u=100*(T/m)+"%",_=100*(x/d)+"%"):"em"===g?(b=Q(t,"borderLeft",1,"em"),u=T/b+"em",_=x/b+"em"):(u=T+"px",_=x+"px"),y&&(c=parseFloat(u)+p+g,h=parseFloat(_)+p+g)),a=gt(P,w[l],u+" "+_,c+" "+h,!1,"0px",a);return a},prefix:!0,formatter:ct("0px 0px 0px 0px",!1,!0)}),Tt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,s,n,a){var o,l,h,_,u,c,f="background-position",p=r||G(t,null),d=this.format((p?m?p.getPropertyValue(f+"-x")+" "+p.getPropertyValue(f+"-y"):p.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);
if(-1!==d.indexOf("%")!=(-1!==g.indexOf("%"))&&(c=$(t,"backgroundImage").replace(k,""),c&&"none"!==c)){for(o=d.split(" "),l=g.split(" "),E.setAttribute("src",c),h=2;--h>-1;)d=o[h],_=-1!==d.indexOf("%"),_!==(-1!==l[h].indexOf("%"))&&(u=0===h?t.offsetWidth-E.width:t.offsetHeight-E.height,o[h]=_?parseFloat(d)/100*u+"px":100*(parseFloat(d)/u)+"%");d=o.join(" ")}return this.parseComplex(t.style,d,g,n,a)},formatter:st}),Tt("backgroundSize",{defaultValue:"0 0",formatter:st}),Tt("perspective",{defaultValue:"0px",prefix:!0}),Tt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Tt("transformStyle",{prefix:!0}),Tt("backfaceVisibility",{prefix:!0}),Tt("userSelect",{prefix:!0}),Tt("margin",{parser:ft("marginTop,marginRight,marginBottom,marginLeft")}),Tt("padding",{parser:ft("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Tt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,s,n,a){var o,l,h;return 9>m?(l=t.currentStyle,h=8>m?" ":",",o="rect("+l.clipTop+h+l.clipRight+h+l.clipBottom+h+l.clipLeft+")",e=this.format(e).split(",").join(h)):(o=this.format($(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),Tt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Tt("autoRound,strictUnits",{parser:function(t,e,i,s,r){return r}}),Tt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format($(t,"borderTopWidth",r,!1,"0px")+" "+$(t,"borderTopStyle",r,!1,"solid")+" "+$(t,"borderTopColor",r,!1,"#000")),this.format(e),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ut)||["#000"])[0]}}),Tt("borderWidth",{parser:ft("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Tt("float,cssFloat,styleFloat",{parser:function(t,e,i,s,r){var n=t.style,a="cssFloat"in n?"cssFloat":"styleFloat";return new mt(n,a,0,0,r,-1,i,!1,0,n[a],e)}});var Yt=function(t){var e,i=this.t,s=i.filter||$(this.data,"filter")||"",r=0|this.s+this.c*t;100===r&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")&&-1===s.indexOf("oader(")?(i.removeAttribute("filter"),e=!$(this.data,"filter")):(i.filter=s.replace(w,""),e=!0)),e||(this.xn1&&(i.filter=s=s||"alpha(opacity="+r+")"),-1===s.indexOf("pacity")?0===r&&this.xn1||(i.filter=s+" alpha(opacity="+r+")"):i.filter=s.replace(x,"opacity="+r))};Tt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,s,n,a){var o=parseFloat($(t,"opacity",r,!1,"1")),l=t.style,h="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),h&&1===o&&"hidden"===$(t,"visibility",r)&&0!==e&&(o=0),j?n=new mt(l,"opacity",o,e-o,n):(n=new mt(l,"opacity",100*o,100*(e-o),n),n.xn1=h?1:0,l.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=Yt),h&&(n=new mt(l,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),n.xs0="inherit",s._overwriteProps.push(n.n),s._overwriteProps.push(i)),n}});var Bt=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(O,"-$1").toLowerCase())):t.removeAttribute(e))},jt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Bt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Tt("className",{parser:function(t,e,s,n,a,o,l){var h,_,u,c,f,p=t.getAttribute("class")||"",m=t.style.cssText;if(a=n._classNamePT=new mt(t,s,0,0,a,2),a.setRatio=jt,a.pr=-11,i=!0,a.b=p,_=K(t,r),u=t._gsClassPT){for(c={},f=u.data;f;)c[f.p]=1,f=f._next;u.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:p.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",a.e),h=J(t,_,K(t),l,c),t.setAttribute("class",p),a.data=h.firstMPT,t.style.cssText=m,a=a.xfirst=n.parse(t,h.difs,a,o)}});var Ut=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,s,r,n,a=this.t.style,o=l.transform.parse;if("all"===this.e)a.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),s=e.length;--s>-1;)i=e[s],l[i]&&(l[i].parse===o?r=!0:i="transformOrigin"===i?St:l[i].p),Bt(a,i);r&&(Bt(a,Pt),n=this.t._gsTransform,n&&(n.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(Tt("clearProps",{parser:function(t,e,s,r,n){return n=new mt(t,s,0,0,n,2),n.setRatio=Ut,n.e=e,n.pr=-10,n.data=r._tween,i=!0,n}}),h="bezier,throwProps,physicsProps,physics2D".split(","),vt=h.length;vt--;)xt(h[vt]);h=a.prototype,h._firstPT=h._lastParsedTransform=h._transform=null,h._onInitTween=function(t,e,o){if(!t.nodeType)return!1;this._target=t,this._tween=o,this._vars=e,_=e.autoRound,i=!1,s=e.suffixMap||a.suffixMap,r=G(t,""),n=this._overwriteProps;var h,f,m,d,g,v,y,T,x,w=t.style;if(u&&""===w.zIndex&&(h=$(t,"zIndex",r),("auto"===h||""===h)&&this._addLazySet(w,"zIndex",0)),"string"==typeof e&&(d=w.cssText,h=K(t,r),w.cssText=d+";"+e,h=J(t,h,K(t)).difs,!j&&b.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,w.cssText=d),this._firstPT=f=e.className?l.className.parse(t,e.className,"className",this,null,null,e):this.parse(t,e,null),this._transformType){for(x=3===this._transformType,Pt?c&&(u=!0,""===w.zIndex&&(y=$(t,"zIndex",r),("auto"===y||""===y)&&this._addLazySet(w,"zIndex",0)),p&&this._addLazySet(w,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(x?"visible":"hidden"))):w.zoom=1,m=f;m&&m._next;)m=m._next;T=new mt(t,"transform",0,0,null,2),this._linkCSSP(T,null,m),T.setRatio=Pt?Et:Lt,T.data=this._transform||Nt(t,r,!0),T.tween=o,T.pr=-1,n.pop()}if(i){for(;f;){for(v=f._next,m=d;m&&m.pr>f.pr;)m=m._next;(f._prev=m?m._prev:g)?f._prev._next=f:d=f,(f._next=m)?m._prev=f:g=f,f=v}this._firstPT=d}return!0},h.parse=function(t,e,i,n){var a,o,h,u,c,f,p,m,d,g,v=t.style;for(a in e)f=e[a],o=l[a],o?i=o.parse(t,f,a,this,i,n,e):(c=$(t,a,r)+"",d="string"==typeof f,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||d&&P.test(f)?(d||(f=ht(f),f=(f.length>3?"rgba(":"rgb(")+f.join(",")+")"),i=gt(v,a,c,f,!0,"transparent",i,0,n)):!d||-1===f.indexOf(" ")&&-1===f.indexOf(",")?(h=parseFloat(c),p=h||0===h?c.substr((h+"").length):"",(""===c||"auto"===c)&&("width"===a||"height"===a?(h=it(t,a,r),p="px"):"left"===a||"top"===a?(h=H(t,a,r),p="px"):(h="opacity"!==a?0:1,p="")),g=d&&"="===f.charAt(1),g?(u=parseInt(f.charAt(0)+"1",10),f=f.substr(2),u*=parseFloat(f),m=f.replace(T,"")):(u=parseFloat(f),m=d?f.replace(T,""):""),""===m&&(m=a in s?s[a]:p),f=u||0===u?(g?u+h:u)+m:e[a],p!==m&&""!==m&&(u||0===u)&&h&&(h=Q(t,a,h,p),"%"===m?(h/=Q(t,a,100,"%")/100,e.strictUnits!==!0&&(c=h+"%")):"em"===m||"rem"===m?h/=Q(t,a,1,m):"px"!==m&&(u=Q(t,a,u,m),m="px"),g&&(u||0===u)&&(f=u+h+m)),g&&(u+=h),!h&&0!==h||!u&&0!==u?void 0!==v[a]&&(f||"NaN"!=f+""&&null!=f)?(i=new mt(v,a,u||h||0,0,i,-1,a,!1,0,c,f),i.xs0="none"!==f||"display"!==a&&-1===a.indexOf("Style")?f:c):V("invalid "+a+" tween value: "+e[a]):(i=new mt(v,a,h,u-h,i,0,a,_!==!1&&("px"===m||"zIndex"===a),0,c,f),i.xs0=m)):i=gt(v,a,c,f,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},h.setRatio=function(t){var e,i,s,r=this._firstPT,n=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):n>e&&e>-n&&(e=0),r.type)if(1===r.type)if(s=r.l,2===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,s=1;r.l>s;s++)i+=r["xn"+s]+r["xs"+(s+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(s=r.l,i=r.xs0+e+r.xs1,s=1;r.l>s;s++)i+=r["xn"+s]+r["xs"+(s+1)];r.t[r.p]=i}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},h._enableTransforms=function(t){this._transform=this._transform||Nt(this._target,r,!0),this._transformType=this._transform.svg&&bt||!t&&3!==this._transformType?2:3};var Vt=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};h._addLazySet=function(t,e,i){var s=this._firstPT=new mt(t,e,0,0,this._firstPT,2);s.e=i,s.setRatio=Vt,s.data=this},h._linkCSSP=function(t,e,i,s){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,s=!0),i?i._next=t:s||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},h._kill=function(e){var i,s,r,n=e;if(e.autoAlpha||e.alpha){n={};for(s in e)n[s]=e[s];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,n)};var qt=function(t,e,i){var s,r,n,a;if(t.slice)for(r=t.length;--r>-1;)qt(t[r],e,i);else for(s=t.childNodes,r=s.length;--r>-1;)n=s[r],a=n.type,n.style&&(e.push(K(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||qt(n,e,i)};return a.cascadeTo=function(t,i,s){var r,n,a,o,l=e.to(t,i,s),h=[l],_=[],u=[],c=[],f=e._internals.reservedProps;for(t=l._targets||l.target,qt(t,_,c),l.render(i,!0,!0),qt(t,u),l.render(0,!0,!0),l._enabled(!0),r=c.length;--r>-1;)if(n=J(c[r],_[r],u[r]),n.firstMPT){n=n.difs;for(a in s)f[a]&&(n[a]=s[a]);o={};for(a in n)o[a]=_[r][a];h.push(e.fromTo(c[r],i,o,n))}return h},t.activate([a]),a},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.5",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=function(t){for(;t;)t.f||t.blob||(t.r=1),t=t._next},i=t.prototype;i._onInitAllProps=function(){for(var t,i,s,r=this._tween,n=r.vars.roundProps.join?r.vars.roundProps:r.vars.roundProps.split(","),a=n.length,o={},l=r._propLookup.roundProps;--a>-1;)o[n[a]]=1;for(a=n.length;--a>-1;)for(t=n[a],i=r._firstPT;i;)s=i._next,i.pg?i.t._roundProps(o,!0):i.n===t&&(2===i.f&&i.t?e(i.t._firstPT):(this._add(i.t,t,i.s,i.c),s&&(s._prev=i._prev),i._prev?i._prev._next=s:r._firstPT===i&&(r._firstPT=s),i._next=i._prev=null,r._propLookup[t]=l)),i=s;return!1},i._add=function(t,e,i,s){this._addTween(t,e,i,i+s,e,!0),this._overwriteProps.push(e)}}(),function(){_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.5.0",init:function(t,e){var i;if("function"!=typeof t.setAttribute)return!1;for(i in e)this._addTween(t,"setAttribute",t.getAttribute(i)+"",e[i]+"",i,!1,i),this._overwriteProps.push(i);return!0}})}(),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,s,r,n,a,o,l=e.useRadians===!0?2*Math.PI:360,h=1e-6;for(i in e)"useRadians"!==i&&(o=(e[i]+"").split("_"),s=o[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),n=this.finals[i]="string"==typeof s&&"="===s.charAt(1)?r+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,a=n-r,o.length&&(s=o.join("_"),-1!==s.indexOf("short")&&(a%=l,a!==a%(l/2)&&(a=0>a?a+l:a-l)),-1!==s.indexOf("_cw")&&0>a?a=(a+9999999999*l)%l-(0|a/l)*l:-1!==s.indexOf("ccw")&&a>0&&(a=(a-9999999999*l)%l-(0|a/l)*l)),(a>h||-h>a)&&(this._addTween(t,i,r,r+a,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,s,r=_gsScope.GreenSockGlobals||_gsScope,n=r.com.greensock,a=2*Math.PI,o=Math.PI/2,l=n._class,h=function(e,i){var s=l("easing."+e,function(){},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,s},_=t.register||function(){},u=function(t,e,i,s){var r=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new s},!0);return _(r,t),r},c=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},f=function(e,i){var s=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,r.config=function(t){return new s(t)},s},p=u("Back",f("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),f("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),f("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=l("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),d=m.prototype=new t;return d.constructor=m,d.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),d.config=m.config=function(t,e,i){return new m(t,e,i)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),d=e.prototype=new t,d.constructor=e,d.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},d.config=e.config=function(t){return new e(t)},i=l("easing.RoughEase",function(e){e=e||{};for(var i,s,r,n,a,o,l=e.taper||"none",h=[],_=0,u=0|(e.points||20),f=u,p=e.randomize!==!1,m=e.clamp===!0,d=e.template instanceof t?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--f>-1;)i=p?Math.random():1/u*f,s=d?d.getRatio(i):i,"none"===l?r=g:"out"===l?(n=1-i,r=n*n*g):"in"===l?r=i*i*g:.5>i?(n=2*i,r=.5*n*n*g):(n=2*(1-i),r=.5*n*n*g),p?s+=Math.random()*r-.5*r:f%2?s+=.5*r:s-=.5*r,m&&(s>1?s=1:0>s&&(s=0)),h[_++]={x:i,y:s};for(h.sort(function(t,e){return t.x-e.x}),o=new c(1,1,null),f=u;--f>-1;)a=h[f],o=new c(a.x,a.y,o);this._prev=new c(0,0,0!==o.t?o:o.next)},!0),d=i.prototype=new t,d.constructor=i,d.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},d.config=function(t){return new i(t)},i.ease=new i,u("Bounce",h("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),h("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),h("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",h("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),h("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),h("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),s=function(e,i,s){var r=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||s)/(1>t?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t,e){return new r(t,e)},r},u("Elastic",s("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),s("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),s("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)+1},.45)),u("Expo",h("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),h("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),h("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",h("SineOut",function(t){return Math.sin(t*o)}),h("SineIn",function(t){return-Math.cos(t*o)+1}),h("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),_(r.SlowMo,"SlowMo","ease,"),_(i,"RoughEase","ease,"),_(e,"SteppedEase","ease,"),p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var s,r,n,a,o,l=function(t){var e,s=t.split("."),r=i;for(e=0;s.length>e;e++)r[s[e]]=r=r[s[e]]||{};return r},h=l("com.greensock"),_=1e-10,u=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},c=function(){},f=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),p={},m=function(s,r,n,a){this.sc=p[s]?p[s].sc:[],p[s]=this,this.gsClass=null,this.func=n;var o=[];this.check=function(h){for(var _,u,c,f,d,g=r.length,v=g;--g>-1;)(_=p[r[g]]||new m(r[g],[])).gsClass?(o[g]=_.gsClass,v--):h&&_.sc.push(this);if(0===v&&n)for(u=("com.greensock."+s).split("."),c=u.pop(),f=l(u.join("."))[c]=this.gsClass=n.apply(n,o),a&&(i[c]=f,d="undefined"!=typeof module&&module.exports,!d&&"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+s.split(".").pop(),[],function(){return f}):s===e&&d&&(module.exports=f)),g=0;this.sc.length>g;g++)this.sc[g].check()},this.check(!0)},d=t._gsDefine=function(t,e,i,s){return new m(t,e,i,s)},g=h._class=function(t,e,i){return e=e||function(){},d(t,[],function(){return e},i),e};d.globals=i;var v=[0,0,1,1],y=[],T=g("easing.Ease",function(t,e,i,s){this._func=t,this._type=i||0,this._power=s||0,this._params=e?v.concat(e):v},!0),x=T.map={},b=T.register=function(t,e,i,s){for(var r,n,a,o,l=e.split(","),_=l.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--_>-1;)for(n=l[_],r=s?g("easing."+n,null,!0):h.easing[n]||{},a=u.length;--a>-1;)o=u[a],x[n+"."+o]=x[o+n]=r[o]=t.getRatio?t:t[o]||new t};for(n=T.prototype,n._calcEnd=!1,n.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,s=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===e?1-s:2===e?s:.5>t?s/2:1-s/2},s=["Linear","Quad","Cubic","Quart","Quint,Strong"],r=s.length;--r>-1;)n=s[r]+",Power"+r,b(new T(null,null,1,r),n,"easeOut",!0),b(new T(null,null,2,r),n,"easeIn"+(0===r?",easeNone":"")),b(new T(null,null,3,r),n,"easeInOut");x.linear=h.easing.Linear.easeIn,x.swing=h.easing.Quad.easeInOut;var w=g("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});n=w.prototype,n.addEventListener=function(t,e,i,s,r){r=r||0;var n,l,h=this._listeners[t],_=0;for(null==h&&(this._listeners[t]=h=[]),l=h.length;--l>-1;)n=h[l],n.c===e&&n.s===i?h.splice(l,1):0===_&&r>n.pr&&(_=l+1);h.splice(_,0,{c:e,s:i,up:s,pr:r}),this!==a||o||a.wake()},n.removeEventListener=function(t,e){var i,s=this._listeners[t];if(s)for(i=s.length;--i>-1;)if(s[i].c===e)return void s.splice(i,1)},n.dispatchEvent=function(t){var e,i,s,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)s=r[e],s&&(s.up?s.c.call(s.s||i,{type:t,target:i}):s.c.call(s.s||i))};var P=t.requestAnimationFrame,O=t.cancelAnimationFrame,S=Date.now||function(){return(new Date).getTime()},k=S();for(s=["ms","moz","webkit","o"],r=s.length;--r>-1&&!P;)P=t[s[r]+"RequestAnimationFrame"],O=t[s[r]+"CancelAnimationFrame"]||t[s[r]+"CancelRequestAnimationFrame"];g("Ticker",function(t,e){var i,s,r,n,l,h=this,u=S(),f=e!==!1&&P,p=500,m=33,d="tick",g=function(t){var e,a,o=S()-k;o>p&&(u+=o-m),k+=o,h.time=(k-u)/1e3,e=h.time-l,(!i||e>0||t===!0)&&(h.frame++,l+=e+(e>=n?.004:n-e),a=!0),t!==!0&&(r=s(g)),a&&h.dispatchEvent(d)};w.call(h),h.time=h.frame=0,h.tick=function(){g(!0)},h.lagSmoothing=function(t,e){p=t||1/_,m=Math.min(e,p,0)},h.sleep=function(){null!=r&&(f&&O?O(r):clearTimeout(r),s=c,r=null,h===a&&(o=!1))},h.wake=function(){null!==r?h.sleep():h.frame>10&&(k=S()-p+5),s=0===i?c:f&&P?P:function(t){return setTimeout(t,0|1e3*(l-h.time)+1)},h===a&&(o=!0),g(2)},h.fps=function(t){return arguments.length?(i=t,n=1/(i||60),l=this.time+n,void h.wake()):i},h.useRAF=function(t){return arguments.length?(h.sleep(),f=t,void h.fps(i)):f},h.fps(t),setTimeout(function(){f&&5>h.frame&&h.useRAF(!1)},1500)}),n=h.Ticker.prototype=new h.events.EventDispatcher,n.constructor=h.Ticker;var R=g("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,Z){o||a.wake();var i=this.vars.useFrames?W:Z;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});a=R.ticker=new h.Ticker,n=R.prototype,n._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1;var A=function(){o&&S()-k>2e3&&a.wake(),setTimeout(A,2e3)};A(),n.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},n.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},n.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},n.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},n.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},n.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},n.render=function(){},n.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},n.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},n._enabled=function(t,e){return o||a.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(){return this._enabled(!1,!1)},n.kill=function(t,e){return this._kill(t,e),this},n._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},n._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},n._callback=function(t){var e=this.vars;e[t].apply(e[t+"Scope"]||e.callbackScope||this,e[t+"Params"]||y)},n.eventCallback=function(t,e,i,s){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=f(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=s),"onUpdate"===t&&(this._onUpdate=e)}return this},n.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},n.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},n.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},n.totalTime=function(t,e,i){if(o||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,r=this._timeline;if(t>s&&!i&&(t=s),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?s-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(F.length&&$(),this.render(t,e,!1),F.length&&$())}return this},n.progress=n.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},n.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},n.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},n.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||_,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},n.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(t){if(!arguments.length)return this._paused;var e,i,s=this._timeline;return t!=this._paused&&s&&(o||t||a.wake(),e=s.rawTime(),i=e-this._pauseTime,!t&&s.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=s.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var C=g("core.SimpleTimeline",function(t){R.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});n=C.prototype=new R,n.constructor=C,n.kill()._gc=!1,n._first=n._last=n._recent=null,n._sortChildren=!1,n.add=n.insert=function(t,e){var i,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(s=t._startTime;i&&i._startTime>s;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},n._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},n.render=function(t,e,i){var s,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)s=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=s},n.rawTime=function(){return o||a.wake(),this._totalTime};var D=g("TweenLite",function(e,i,s){if(R.call(this,i,s),this.render=D.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:D.selector(e)||e;var r,n,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?q[D.defaultOverwrite]:"number"==typeof l?l>>0:q[l],(o||e instanceof Array||e.push&&f(e))&&"number"!=typeof e[0])for(this._targets=a=u(e),this._propLookup=[],this._siblings=[],r=0;a.length>r;r++)n=a[r],n?"string"!=typeof n?n.length&&n!==t&&n[0]&&(n[0]===t||n[0].nodeType&&n[0].style&&!n.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(u(n))):(this._siblings[r]=Q(n,this,!1),1===l&&this._siblings[r].length>1&&K(n,this,null,1,this._siblings[r])):(n=a[r--]=D.selector(n),"string"==typeof n&&a.splice(r+1,1)):a.splice(r--,1);else this._propLookup={},this._siblings=Q(e,this,!1),1===l&&this._siblings.length>1&&K(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-_,this.render(-this._delay))},!0),M=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},z=function(t,e){var i,s={};for(i in t)V[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!B[i]||B[i]&&B[i]._autoCSS)||(s[i]=t[i],delete t[i]);t.css=s};n=D.prototype=new R,n.constructor=D,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,D.version="1.18.0",D.defaultEase=n._ease=new T(null,null,1,1),D.defaultOverwrite="auto",D.ticker=a,D.autoSleep=120,D.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},D.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(D.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var F=[],I={},X=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,N=function(t){for(var e,i=this._firstPT,s=1e-6;i;)e=i.blob?t?this.join(""):this.start:i.c*t+i.s,i.r?e=Math.round(e):s>e&&e>-s&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},L=function(t,e,i,s){var r,n,a,o,l,h,_,u=[t,e],c=0,f="",p=0;for(u.start=t,i&&(i(u),t=u[0],e=u[1]),u.length=0,r=t.match(X)||[],n=e.match(X)||[],s&&(s._next=null,s.blob=1,u._firstPT=s),l=n.length,o=0;l>o;o++)_=n[o],h=e.substr(c,e.indexOf(_,c)-c),f+=h||!o?h:",",c+=h.length,p?p=(p+1)%5:"rgba("===h.substr(-5)&&(p=1),_===r[o]||o>=r.length?f+=_:(f&&(u.push(f),f=""),a=parseFloat(r[o]),u.push(a),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:a,c:("="===_.charAt(1)?parseInt(_.charAt(0)+"1",10)*parseFloat(_.substr(2)):parseFloat(_)-a)||0,f:0,r:p&&4>p}),c+=_.length;return f+=e.substr(c),f&&u.push(f),u.setRatio=N,u},E=function(t,e,i,s,r,n,a,o){var l,h,_="get"===i?t[e]:i,u=typeof t[e],c="string"==typeof s&&"="===s.charAt(1),f={t:t,p:e,s:_,f:"function"===u,pg:0,n:r||e,r:n,pr:0,c:c?parseInt(s.charAt(0)+"1",10)*parseFloat(s.substr(2)):parseFloat(s)-_||0};return"number"!==u&&("function"===u&&"get"===i&&(h=e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),f.s=_=a?t[h](a):t[h]()),"string"==typeof _&&(a||isNaN(_))?(f.fp=a,l=L(_,s,o||D.defaultStringFilter,f),f={t:l,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0}):c||(f.c=parseFloat(s)-parseFloat(_)||0)),f.c?((f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f,f):void 0},Y=D._internals={isArray:f,isSelector:M,lazyTweens:F,blobDif:L},B=D._plugins={},j=Y.tweenLookup={},U=0,V=Y.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},W=R._rootFramesTimeline=new C,Z=R._rootTimeline=new C,G=30,$=Y.lazyRender=function(){var t,e=F.length;for(I={};--e>-1;)t=F[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);F.length=0};Z._startTime=a.time,W._startTime=a.frame,Z._active=W._active=!0,setTimeout($,1),R._updateRoot=D.render=function(){var t,e,i;if(F.length&&$(),Z.render((a.time-Z._startTime)*Z._timeScale,!1,!1),W.render((a.frame-W._startTime)*W._timeScale,!1,!1),F.length&&$(),a.frame>=G){G=a.frame+(parseInt(D.autoSleep,10)||120);
for(i in j){for(e=j[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete j[i]}if(i=Z._first,(!i||i._paused)&&D.autoSleep&&!W._first&&1===a._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||a.sleep()}}},a.addEventListener("tick",R._updateRoot);var Q=function(t,e,i){var s,r,n=t._gsTweenID;if(j[n||(t._gsTweenID=n="t"+U++)]||(j[n]={target:t,tweens:[]}),e&&(s=j[n].tweens,s[r=s.length]=e,i))for(;--r>-1;)s[r]===e&&s.splice(r,1);return j[n].tweens},H=function(t,e,i,s){var r,n,a=t.vars.onOverwrite;return a&&(r=a(t,e,i,s)),a=D.onOverwrite,a&&(n=a(t,e,i,s)),r!==!1&&n!==!1},K=function(t,e,i,s,r){var n,a,o,l;if(1===s||s>=4){for(l=r.length,n=0;l>n;n++)if((o=r[n])!==e)o._gc||o._kill(null,t,e)&&(a=!0);else if(5===s)break;return a}var h,u=e._startTime+_,c=[],f=0,p=0===e._duration;for(n=r.length;--n>-1;)(o=r[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(h=h||J(e,0,p),0===J(o,h,p)&&(c[f++]=o)):u>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale>u&&((p||!o._initted)&&2e-10>=u-o._startTime||(c[f++]=o)));for(n=f;--n>-1;)if(o=c[n],2===s&&o._kill(i,t,e)&&(a=!0),2!==s||!o._firstPT&&o._initted){if(2!==s&&!H(o,e))continue;o._enabled(!1,!1)&&(a=!0)}return a},J=function(t,e,i){for(var s=t._timeline,r=s._timeScale,n=t._startTime;s._timeline;){if(n+=s._startTime,r*=s._timeScale,s._paused)return-100;s=s._timeline}return n/=r,n>e?n-e:i&&n===e||!t._initted&&2*_>n-e?_:(n+=t.totalDuration()/t._timeScale/r)>e+_?0:n-e-_};n._init=function(){var t,e,i,s,r,n=this.vars,a=this._overwrittenProps,o=this._duration,l=!!n.immediateRender,h=n.ease;if(n.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(s in n.startAt)r[s]=n.startAt[s];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&n.lazy!==!1,r.startAt=r.delay=null,this._startAt=D.to(this.target,0,r),l)if(this._time>0)this._startAt=null;else if(0!==o)return}else if(n.runBackwards&&0!==o)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),i={};for(s in n)V[s]&&"autoCSS"!==s||(i[s]=n[s]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&n.lazy!==!1,i.immediateRender=l,this._startAt=D.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof T?h:"function"==typeof h?new T(h,n.easeParams):x[h]||D.defaultEase:D.defaultEase,n.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,n.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a);if(e&&D._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),n.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=n.onUpdate,this._initted=!0},n._initProps=function(e,i,s,r){var n,a,o,l,h,_;if(null==e)return!1;I[e._gsTweenID]&&$(),this.vars.css||e.style&&e!==t&&e.nodeType&&B.css&&this.vars.autoCSS!==!1&&z(this.vars,e);for(n in this.vars)if(_=this.vars[n],V[n])_&&(_ instanceof Array||_.push&&f(_))&&-1!==_.join("").indexOf("{self}")&&(this.vars[n]=_=this._swapSelfInParams(_,this));else if(B[n]&&(l=new B[n])._onInitTween(e,this.vars[n],this)){for(this._firstPT=h={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:n,pg:1,pr:l._priority},a=l._overwriteProps.length;--a>-1;)i[l._overwriteProps[a]]=this._firstPT;(l._priority||l._onInitAllProps)&&(o=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),h._next&&(h._next._prev=h)}else i[n]=E.call(this,e,n,"get",_,n,0,null,this.vars.stringFilter);return r&&this._kill(r,e)?this._initProps(e,i,s,r):this._overwrite>1&&this._firstPT&&s.length>1&&K(e,this,i,this._overwrite,s)?(this._kill(i,e),this._initProps(e,i,s,r)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(I[e._gsTweenID]=!0),o)},n.render=function(t,e,i){var s,r,n,a,o=this._time,l=this._duration,h=this._rawPrevTime;if(t>=l)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>h||h===_&&"isPause"!==this.data)&&h!==t&&(i=!0,h>_&&(r="onReverseComplete")),this._rawPrevTime=a=!e||t||h===t?t:_);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===l&&h>0)&&(r="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(h>=0&&(h!==_||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!e||t||h===t?t:_)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/l,c=this._easeType,f=this._easePower;(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===f?u*=u:2===f?u*=u*u:3===f?u*=u*u*u:4===f&&(u*=u*u*u*u),this.ratio=1===c?1-u:2===c?u:.5>t/l?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=h,F.push(this),void(this._lazy=[t,e]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/l):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(e||this._callback("onStart"))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==o||s)&&this._callback("onUpdate")),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===l&&this._rawPrevTime===_&&a!==_&&(this._rawPrevTime=0))}},n._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:D.selector(e)||e;var s,r,n,a,o,l,h,_,u,c=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((f(e)||M(e))&&"number"!=typeof e[0])for(s=e.length;--s>-1;)this._kill(t,e[s],i)&&(l=!0);else{if(this._targets){for(s=this._targets.length;--s>-1;)if(e===this._targets[s]){o=this._propLookup[s]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[s]=t?this._overwrittenProps[s]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(h=t||o,_=t!==r&&"all"!==r&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(D.onOverwrite||this.vars.onOverwrite)){for(n in h)o[n]&&(u||(u=[]),u.push(n));if((u||!t)&&!H(this,i,e,u))return!1}for(n in h)(a=o[n])&&(c&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,l=!0),a.pg&&a.t._kill(h)&&(l=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[n]),_&&(r[n]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},n.invalidate=function(){return this._notifyPluginsOfEnabled&&D._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],R.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-_,this.render(-this._delay)),this},n._enabled=function(t,e){if(o||a.wake(),t&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=Q(s[i],this,!0);else this._siblings=Q(this.target,this,!0)}return R.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?D._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},D.to=function(t,e,i){return new D(t,e,i)},D.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new D(t,e,i)},D.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new D(t,e,s)},D.delayedCall=function(t,e,i,s,r){return new D(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:s,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},D.set=function(t,e){return new D(t,0,e)},D.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:D.selector(t)||t;var i,s,r,n;if((f(t)||M(t))&&"number"!=typeof t[0]){for(i=t.length,s=[];--i>-1;)s=s.concat(D.getTweensOf(t[i],e));for(i=s.length;--i>-1;)for(n=s[i],r=i;--r>-1;)n===s[r]&&s.splice(i,1)}else for(s=Q(t).concat(),i=s.length;--i>-1;)(s[i]._gc||e&&!s[i].isActive())&&s.splice(i,1);return s},D.killTweensOf=D.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var s=D.getTweensOf(t,e),r=s.length;--r>-1;)s[r]._kill(i,t)};var tt=g("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=tt.prototype},!0);if(n=tt.prototype,tt.version="1.18.0",tt.API=2,n._firstPT=null,n._addTween=E,n.setRatio=N,n._kill=function(t){var e,i=this._overwriteProps,s=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;s;)null!=t[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},n._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},D._onPluginEvent=function(t,e){var i,s,r,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,s=r;s&&s.pr>o.pr;)s=s._next;(o._prev=s?s._prev:n)?o._prev._next=o:r=o,(o._next=s)?s._prev=o:n=o,o=a}o=e._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},tt.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===tt.API&&(B[(new t[e])._propName]=t[e]);return!0},d.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,s=t.priority||0,r=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=g("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){tt.call(this,i,s),this._overwriteProps=r||[]},t.global===!0),o=a.prototype=new tt(i);o.constructor=a,a.API=t.API;for(e in n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,tt.activate([a]),a},s=t._gsQueue){for(r=0;s.length>r;r++)s[r]();for(n in p)p[n].func||t.console.log("GSAP encountered missing dependency: com.greensock."+n)}o=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");</script><script>var introTutorial={frames:[{filename:"Comp 1_00000.png",frame:{x:0,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00001.png",frame:{x:200,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00002.png",frame:{x:400,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00003.png",frame:{x:600,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00004.png",frame:{x:800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00005.png",frame:{x:1e3,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00006.png",frame:{x:1200,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00007.png",frame:{x:1400,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00008.png",frame:{x:1600,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00009.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00010.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00011.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00012.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00013.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00014.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00015.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00016.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00017.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00018.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00019.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00020.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00021.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00022.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00023.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00024.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00025.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00026.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00027.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00028.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00029.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00030.png",frame:{x:1800,y:0,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00031.png",frame:{x:0,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00032.png",frame:{x:200,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00033.png",frame:{x:400,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00034.png",frame:{x:600,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00035.png",frame:{x:800,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00036.png",frame:{x:1e3,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00037.png",frame:{x:1200,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00038.png",frame:{x:1400,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00039.png",frame:{x:1600,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00040.png",frame:{x:1800,y:250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00041.png",frame:{x:0,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00042.png",frame:{x:200,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00043.png",frame:{x:400,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00044.png",frame:{x:600,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00045.png",frame:{x:800,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00046.png",frame:{x:1e3,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00047.png",frame:{x:1200,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00048.png",frame:{x:1400,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00049.png",frame:{x:1600,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00050.png",frame:{x:1800,y:500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00051.png",frame:{x:0,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00052.png",frame:{x:200,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00053.png",frame:{x:400,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00054.png",frame:{x:600,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00055.png",frame:{x:800,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00056.png",frame:{x:1e3,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00057.png",frame:{x:1200,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00058.png",frame:{x:1400,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00059.png",frame:{x:1600,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00060.png",frame:{x:1800,y:750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00061.png",frame:{x:0,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00062.png",frame:{x:200,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00063.png",frame:{x:400,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00064.png",frame:{x:600,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00065.png",frame:{x:800,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00066.png",frame:{x:1e3,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00067.png",frame:{x:1200,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00068.png",frame:{x:1400,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00069.png",frame:{x:1600,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00070.png",frame:{x:1800,y:1e3,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00071.png",frame:{x:0,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00072.png",frame:{x:200,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00073.png",frame:{x:400,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00074.png",frame:{x:600,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00075.png",frame:{x:800,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00076.png",frame:{x:1e3,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00077.png",frame:{x:1200,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00078.png",frame:{x:1400,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00079.png",frame:{x:1600,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00080.png",frame:{x:1800,y:1250,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00081.png",frame:{x:0,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00082.png",frame:{x:200,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00083.png",frame:{x:400,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00084.png",frame:{x:600,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00085.png",frame:{x:800,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00086.png",frame:{x:1e3,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00087.png",frame:{x:1200,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00088.png",frame:{x:1400,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00089.png",frame:{x:1600,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00090.png",frame:{x:1800,y:1500,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00091.png",frame:{x:0,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00092.png",frame:{x:200,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00093.png",frame:{x:400,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00094.png",frame:{x:600,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00095.png",frame:{x:800,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00096.png",frame:{x:1e3,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00097.png",frame:{x:1200,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00098.png",frame:{x:1400,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}},{filename:"Comp 1_00099.png",frame:{x:1600,y:1750,w:200,h:250},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:250},sourceSize:{w:200,h:250}}],meta:{app:"http://www.codeandweb.com/texturepacker ",version:"1.0",image:"falter_intro.png",format:"RGBA8888",size:{w:2048,h:2048},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:857c890202f9bcd57f28df75067c3384:d117059cdb9ad4660603328807905ebb:72f9068a8ef069912cb5a7659b6d3283$"}};</script><script>var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";function t(t,e,s,i){return s=parseFloat(s)-parseFloat(t),i=parseFloat(i)-parseFloat(e),Math.sqrt(s*s+i*i)}function e(t){return"string"!=typeof t&&t.nodeType||(t=_gsScope.TweenLite.selector(t),t.length&&(t=t[0])),t}function s(t,e,s){var i,r,o=t.indexOf(" ");return-1===o?(i=void 0!==s?s+"":t,r=t):(i=t.substr(0,o),r=t.substr(o+1)),i=-1!==i.indexOf("%")?parseFloat(i)/100*e:parseFloat(i),r=-1!==r.indexOf("%")?parseFloat(r)/100*e:parseFloat(r),i>r?[r,i]:[i,r]}function i(s){if(!s)return 0;s=e(s);var i,r,o,a,n,l,h,f,u=s.tagName.toLowerCase();if("path"===u)i=s.getTotalLength()||0;else if("rect"===u)r=s.getBBox(),i=2*(r.width+r.height);else if("circle"===u)i=2*Math.PI*parseFloat(s.getAttribute("r"));else if("line"===u)i=t(s.getAttribute("x1"),s.getAttribute("y1"),s.getAttribute("x2"),s.getAttribute("y2"));else if("polyline"===u||"polygon"===u)for(o=s.getAttribute("points").split(" "),i=0,n=o[0].split(","),"polygon"===u&&(o.push(o[0]),-1===o[0].indexOf(",")&&o.push(o[1])),l=1;l<o.length;l++)a=o[l].split(","),1===a.length&&(a[1]=o[l++]),2===a.length&&(i+=t(n[0],n[1],a[0],a[1])||0,n=a);else"ellipse"===u&&(h=parseFloat(s.getAttribute("rx")),f=parseFloat(s.getAttribute("ry")),i=Math.PI*(3*(h+f)-Math.sqrt((3*h+f)*(h+3*f))));return i||0}function r(t,s){if(!t)return[0,0];t=e(t),s=s||i(t)+1;var r=a(t),o=r.strokeDasharray||"",n=parseFloat(r.strokeDashoffset);return o=-1===o.indexOf(" ")?s:parseFloat(o.split(" ")[0])||1e-5,o>s&&(o=s),[Math.max(0,-n),o-n]}var o,a=document.defaultView?document.defaultView.getComputedStyle:function(){};o=_gsScope._gsDefine.plugin({propName:"drawSVG",API:2,version:"0.0.4",global:!0,overwriteProps:["drawSVG"],init:function(t,e,o){if(!t.getBBox)return!1;var a,n,l,h=i(t)+1;return this._style=t.style,e===!0||"true"===e?e="0 100%":e?-1===(e+"").indexOf(" ")&&(e="0 "+e):e="0 0",a=r(t,h),n=s(e,h,a[0]),this._length=h+10,0===a[0]&&0===n[0]?(l=Math.max(1e-5,n[1]-h),this._dash=h+l,this._offset=h-a[1]+l,this._addTween(this,"_offset",this._offset,h-n[1]+l,"drawSVG")):(this._dash=a[1]-a[0]||1e-6,this._offset=-a[0],this._addTween(this,"_dash",this._dash,n[1]-n[0]||1e-5,"drawSVG"),this._addTween(this,"_offset",this._offset,-n[0],"drawSVG")),!0},set:function(t){this._firstPT&&(this._super.setRatio.call(this,t),this._style.strokeDashoffset=this._offset,this._style.strokeDasharray=this._dash+" "+this._length)}}),o.getLength=i,o.getPosition=r}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()();</script><script>!function(e,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define(i):this[e]=i()}("bowser",function(){function e(e){function o(i){var o=e.match(i);return o&&o.length>1&&o[1]||""}function s(i){var o=e.match(i);return o&&o.length>1&&o[2]||""}var r,n=o(/(ipod|iphone|ipad)/i).toLowerCase(),t=/like android/i.test(e),a=!t&&/android/i.test(e),d=/CrOS/.test(e),m=o(/edge\/(\d+(\.\d+)?)/i),v=o(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e),c=!b&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?r={name:"Opera",opera:i,version:v||o(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:i,version:v||o(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(r={name:"Windows Phone",windowsphone:i},m?(r.msedge=i,r.version=m):(r.msie=i,r.version=o(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:i,version:o(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:d?r={name:"Chrome",chromeBook:i,chrome:i,version:o(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?r={name:"Microsoft Edge",msedge:i,version:m}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:i,version:o(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:n?(r={name:"iphone"==n?"iPhone":"ipad"==n?"iPad":"iPod"},v&&(r.version=v)):/sailfish/i.test(e)?r={name:"Sailfish",sailfish:i,version:o(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:i,version:o(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(r={name:"Firefox",firefox:i,version:o(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=i)):/silk/i.test(e)?r={name:"Amazon Silk",silk:i,version:o(/silk\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:v}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:i,version:o(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",blackberry:i,version:v||o(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(r={name:"WebOS",webos:i,version:v||o(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=i)):r=/bada/i.test(e)?{name:"Bada",bada:i,version:o(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:i,version:o(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/safari/i.test(e)?{name:"Safari",safari:i,version:v}:{name:o(/^(.*)\/(.*) /),version:s(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(r.name=r.name||"Webkit",r.webkit=i,!r.version&&v&&(r.version=v)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=i,r.version=r.version||o(/gecko\/(\d+(\.\d+)?)/i)),r.msedge||!a&&!r.silk?n&&(r[n]=i,r.ios=i):r.android=i;var f="";r.windowsphone?f=o(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n?(f=o(/os (\d+([_\s]\d+)*) like mac os x/i),f=f.replace(/[_\s]/g,".")):a?f=o(/android[ \/-](\d+(\.\d+)*)/i):r.webos?f=o(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?f=o(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?f=o(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(f=o(/tizen[\/\s](\d+(\.\d+)*)/i)),f&&(r.osversion=f);var l=f.split(".")[0];return b||"ipad"==n||a&&(3==l||4==l&&!c)||r.silk?r.tablet=i:(c||"iphone"==n||"ipod"==n||a||r.blackberry||r.webos||r.bada)&&(r.mobile=i),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.chrome&&r.version>=20||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1?r.a=i:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6?r.c=i:r.x=i,r}var i=!0,o=e("undefined"!=typeof navigator?navigator.userAgent:"");return o.test=function(e){for(var i=0;i<e.length;++i){var s=e[i];if("string"==typeof s&&s in o)return!0}return!1},o._detect=e,o});</script><script>var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;!function(e){"use strict";var t=e.GreenSockGlobals||e,i=function(e){var i,n=e.split("."),s=t;for(i=0;i<n.length;i++)s[n[i]]=s=s[n[i]]||{};return s},n=i("com.greensock.utils"),s=function(e){var t=e.nodeType,i="";if(1===t||9===t||11===t){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=s(e)}else if(3===t||4===t)return e.nodeValue;return i},r=document,l=r.defaultView?r.defaultView.getComputedStyle:function(){},o=/([A-Z])/g,d=function(e,t,i,n){var s;return(i=i||l(e,null))?(e=i.getPropertyValue(t.replace(o,"-$1").toLowerCase()),s=e||i.length?e:i[t]):e.currentStyle&&(i=e.currentStyle,s=i[t]),n?s:parseInt(s,10)||0},h=function(e){return e.length&&e[0]&&(e[0].nodeType&&e[0].style&&!e.nodeType||e[0].length&&e[0][0])?!0:!1},p=function(e){var t,i,n,s=[],r=e.length;for(t=0;r>t;t++)if(i=e[t],h(i))for(n=i.length,n=0;n<i.length;n++)s.push(i[n]);else s.push(i);return s},a=")eefec303079ad17405c",f=/(?:<br>|<br\/>|<br \/>)/gi,u=r.all&&!r.addEventListener,c="<div style='position:relative;display:inline-block;"+(u?"*display:inline;*zoom:1;'":"'"),g=function(e){e=e||"";var t=-1!==e.indexOf("++"),i=1;return t&&(e=e.split("++").join("")),function(){return c+(e?" class='"+e+(t?i++:"")+"'>":">")}},y=n.SplitText=t.SplitText=function(e,t){if("string"==typeof e&&(e=y.selector(e)),!e)throw"cannot split a null element.";this.elements=h(e)?p(e):[e],this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)},x=function(e,t,i){var n=e.nodeType;if(1===n||9===n||11===n)for(e=e.firstChild;e;e=e.nextSibling)x(e,t,i);else(3===n||4===n)&&(e.nodeValue=e.nodeValue.split(t).join(i))},m=function(e,t){for(var i=t.length;--i>-1;)e.push(t[i])},v=function(e,t,i,n,o){f.test(e.innerHTML)&&(e.innerHTML=e.innerHTML.replace(f,a));var h,p,u,c,y,v,T,b,_,w,C,S,L,H,N=s(e),B=t.type||t.split||"chars,words,lines",A=-1!==B.indexOf("lines")?[]:null,M=-1!==B.indexOf("words"),W=-1!==B.indexOf("chars"),R="absolute"===t.position||t.absolute===!0,j=R?"&#173; ":" ",E=-999,k=l(e),O=d(e,"paddingLeft",k),V=d(e,"borderBottomWidth",k)+d(e,"borderTopWidth",k),G=d(e,"borderLeftWidth",k)+d(e,"borderRightWidth",k),$=d(e,"paddingTop",k)+d(e,"paddingBottom",k),q=d(e,"paddingLeft",k)+d(e,"paddingRight",k),I=d(e,"textAlign",k,!0),P=e.clientHeight,Q=e.clientWidth,z="</div>",Z=g(t.wordsClass),D=g(t.charsClass),F=-1!==(t.linesClass||"").indexOf("++"),J=t.linesClass,K=-1!==N.indexOf("<"),U=!0,X=[],Y=[],ee=[];for(F&&(J=J.split("++").join("")),K&&(N=N.split("<").join("{{LT}}")),h=N.length,c=Z(),y=0;h>y;y++)if(T=N.charAt(y),")"===T&&N.substr(y,20)===a)c+=(U?z:"")+"<BR/>",U=!1,y!==h-20&&N.substr(y+20,20)!==a&&(c+=" "+Z(),U=!0),y+=19;else if(" "===T&&" "!==N.charAt(y-1)&&y!==h-1&&N.substr(y-20,20)!==a){for(c+=U?z:"",U=!1;" "===N.charAt(y+1);)c+=j,y++;(")"!==N.charAt(y+1)||N.substr(y+1,20)!==a)&&(c+=j+Z(),U=!0)}else"{"===T&&"{{LT}}"===N.substr(y,6)?(c+=W?D()+"{{LT}}</div>":"{{LT}}",y+=5):c+=W&&" "!==T?D()+T+"</div>":T;for(e.innerHTML=c+(U?z:""),K&&x(e,"{{LT}}","<"),v=e.getElementsByTagName("*"),h=v.length,b=[],y=0;h>y;y++)b[y]=v[y];if(A||R)for(y=0;h>y;y++)_=b[y],u=_.parentNode===e,(u||R||W&&!M)&&(w=_.offsetTop,A&&u&&w!==E&&"BR"!==_.nodeName&&(p=[],A.push(p),E=w),R&&(_._x=_.offsetLeft,_._y=w,_._w=_.offsetWidth,_._h=_.offsetHeight),A&&(M!==u&&W||(p.push(_),_._x-=O),u&&y&&(b[y-1]._wordEnd=!0),"BR"===_.nodeName&&_.nextSibling&&"BR"===_.nextSibling.nodeName&&A.push([])));for(y=0;h>y;y++)_=b[y],u=_.parentNode===e,"BR"!==_.nodeName?(R&&(S=_.style,M||u||(_._x+=_.parentNode._x,_._y+=_.parentNode._y),S.left=_._x+"px",S.top=_._y+"px",S.position="absolute",S.display="block",S.width=_._w+1+"px",S.height=_._h+"px"),M?u&&""!==_.innerHTML?Y.push(_):W&&X.push(_):u?(e.removeChild(_),b.splice(y--,1),h--):!u&&W&&(w=!A&&!R&&_.nextSibling,e.appendChild(_),w||e.appendChild(r.createTextNode(" ")),X.push(_))):A||R?(e.removeChild(_),b.splice(y--,1),h--):M||e.appendChild(_);if(A){for(R&&(C=r.createElement("div"),e.appendChild(C),L=C.offsetWidth+"px",w=C.offsetParent===e?0:e.offsetLeft,e.removeChild(C)),S=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(H=!R||!M&&!W,y=0;y<A.length;y++){for(p=A[y],C=r.createElement("div"),C.style.cssText="display:block;text-align:"+I+";position:"+(R?"absolute;":"relative;"),J&&(C.className=J+(F?y+1:"")),ee.push(C),h=p.length,v=0;h>v;v++)"BR"!==p[v].nodeName&&(_=p[v],C.appendChild(_),H&&(_._wordEnd||M)&&C.appendChild(r.createTextNode(" ")),R&&(0===v&&(C.style.top=_._y+"px",C.style.left=O+w+"px"),_.style.top="0px",w&&(_.style.left=_._x-w+"px")));0===h&&(C.innerHTML="&nbsp;"),M||W||(C.innerHTML=s(C).split(String.fromCharCode(160)).join(" ")),R&&(C.style.width=L,C.style.height=_._h+"px"),e.appendChild(C)}e.style.cssText=S}R&&(P>e.clientHeight&&(e.style.height=P-$+"px",e.clientHeight<P&&(e.style.height=P+V+"px")),Q>e.clientWidth&&(e.style.width=Q-q+"px",e.clientWidth<Q&&(e.style.width=Q+G+"px"))),m(i,X),m(n,Y),m(o,ee)},T=y.prototype;T.split=function(e){this.isSplit&&this.revert(),this.vars=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t=this.elements.length;--t>-1;)this._originals[t]=this.elements[t].innerHTML,v(this.elements[t],this.vars,this.chars,this.words,this.lines);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},T.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var e=this._originals.length;--e>-1;)this.elements[e].innerHTML=this._originals[e];return this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},y.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(y.selector=i,i(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)},y.version="0.3.4"}(_gsScope),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define(["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(module.exports=t())}("SplitText");</script><script>var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("utils.Draggable",["events.EventDispatcher","TweenLite","plugins.CSSPlugin"],function(e,t,o){var n,r,i,a,s,l,c,f,d={css:{}},p={css:{}},u={css:{}},h={css:{}},g=_gsScope._gsDefine.globals,x={},m=document,v=m.documentElement||{},y=function(e){return m.createElementNS?m.createElementNS("http://www.w3.org/1999/xhtml",e):m.createElement(e)},w=y("div"),b=[],T=function(){return!1},S=180/Math.PI,L=999999999999999,C=Date.now||function(){return(new Date).getTime()},N=!(m.addEventListener||!m.all),M=m.createElement("div"),D=[],P={},X=0,_=/^(?:a|input|textarea|button|select)$/i,k=0,Y=-1!==navigator.userAgent.toLowerCase().indexOf("android"),B=0,O={},E={},R=function(e){if("string"==typeof e&&(e=t.selector(e)),!e||e.nodeType)return[e];var o,n=[],r=e.length;for(o=0;o!==r;n.push(e[o++]));return n},W=function(e){var t,o={};for(t in e)o[t]=e[t];return o},A=function(){for(var e=D.length;--e>-1;)D[e]()},F=function(e){D.push(e),1===D.length&&t.ticker.addEventListener("tick",A,this,!1,1)},H=function(e){for(var o=D.length;--o>-1;)D[o]===e&&D.splice(o,1);t.to(V,0,{overwrite:"all",delay:15,onComplete:V})},V=function(){D.length||t.ticker.removeEventListener("tick",A)},I=function(e,t){var o;for(o in t)void 0===e[o]&&(e[o]=t[o]);return e},G=function(){return null!=window.pageYOffset?window.pageYOffset:null!=m.scrollTop?m.scrollTop:v.scrollTop||m.body.scrollTop||0},z=function(){return null!=window.pageXOffset?window.pageXOffset:null!=m.scrollLeft?m.scrollLeft:v.scrollLeft||m.body.scrollLeft||0},U=function(e,t){Ye(e,"scroll",t),j(e.parentNode)||U(e.parentNode,t)},$=function(e,t){Be(e,"scroll",t),j(e.parentNode)||$(e.parentNode,t)},j=function(e){return!(e&&e!==v&&e!==m&&e!==m.body&&e!==window&&e.nodeType&&e.parentNode)},K=function(e,t){var o="x"===t?"Width":"Height",n="scroll"+o,r="client"+o,i=m.body;return Math.max(0,j(e)?Math.max(v[n],i[n])-(window["inner"+o]||v[r]||i[r]):e[n]-e[r])},Z=function(e){var t=j(e),o=K(e,"x"),n=K(e,"y");t?e=E:Z(e.parentNode),e._gsMaxScrollX=o,e._gsMaxScrollY=n,e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0},q=function(e,t){return e=e||window.event,x.pageX=e.clientX+m.body.scrollLeft+v.scrollLeft,x.pageY=e.clientY+m.body.scrollTop+v.scrollTop,t&&(e.returnValue=!1),x},Q=function(e){return e?("string"==typeof e&&(e=t.selector(e)),e.length&&e!==window&&e[0]&&e[0].style&&!e.nodeType&&(e=e[0]),e===window||e.nodeType&&e.style?e:null):e},J=function(e,t){var o,r,i,a=e.style;if(void 0===a[t]){for(i=["O","Moz","ms","Ms","Webkit"],r=5,o=t.charAt(0).toUpperCase()+t.substr(1);--r>-1&&void 0===a[i[r]+o];);if(0>r)return"";n=3===r?"ms":i[r],t=n+o}return t},ee=function(e,t,o){var n=e.style;n&&(void 0===n[t]&&(t=J(e,t)),null==o?n.removeProperty?n.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):n.removeAttribute(t):void 0!==n[t]&&(n[t]=o))},te=m.defaultView?m.defaultView.getComputedStyle:T,oe=/(?:Left|Right|Width)/i,ne=/(?:\d|\-|\+|=|#|\.)*/g,re=function(e,t,o,n,r){if("px"===n||!n)return o;if("auto"===n||!o)return 0;var i,a=oe.test(t),s=e,l=w.style,c=0>o;return c&&(o=-o),"%"===n&&-1!==t.indexOf("border")?i=o/100*(a?e.clientWidth:e.clientHeight):(l.cssText="border:0 solid red;position:"+ae(e,"position",!0)+";line-height:0;","%"!==n&&s.appendChild?l[a?"borderLeftWidth":"borderTopWidth"]=o+n:(s=e.parentNode||m.body,l[a?"width":"height"]=o+n),s.appendChild(w),i=parseFloat(w[a?"offsetWidth":"offsetHeight"]),s.removeChild(w),0!==i||r||(i=re(e,t,o,n,!0))),c?-i:i},ie=function(e,t){if("absolute"!==ae(e,"position",!0))return 0;var o="left"===t?"Left":"Top",n=ae(e,"margin"+o,!0);return e["offset"+o]-(re(e,t,parseFloat(n),(n+"").replace(ne,""))||0)},ae=function(e,t,o){var n,r=(e._gsTransform||{})[t];return r||0===r?r:(e.style[t]?r=e.style[t]:(n=te(e))?(r=n.getPropertyValue(t.replace(/([A-Z])/g,"-$1").toLowerCase()),r=r||n.length?r:n[t]):e.currentStyle&&(r=e.currentStyle[t]),"auto"!==r||"top"!==t&&"left"!==t||(r=ie(e,t)),o?r:parseFloat(r)||0)},se=function(e,t,o){var n=e.vars,r=n[o],i=e._listeners[t];"function"==typeof r&&r.apply(n[o+"Scope"]||n.callbackScope||e,n[o+"Params"]||[e.pointerEvent]),i&&e.dispatchEvent(t)},le=function(e,t){var o,n,r,i=Q(e);return i?De(i,t):void 0!==e.left?(r=Te(t),{left:e.left-r.x,top:e.top-r.y,width:e.width,height:e.height}):(n=e.min||e.minX||e.minRotation||0,o=e.min||e.minY||0,{left:n,top:o,width:(e.max||e.maxX||e.maxRotation||0)-n,height:(e.max||e.maxY||0)-o})},ce=function(){if(!m.createElementNS)return a=0,void(s=!1);var e,t,o,n,r=y("div"),i=m.createElementNS("http://www.w3.org/2000/svg","svg"),f=y("div"),d=r.style,p=m.body||v;m.body&&pe&&(d.position=f.style.position="absolute",p.appendChild(f),f.appendChild(r),d.height="10px",n=r.offsetTop,f.style.border="5px solid red",c=n!==r.offsetTop,p.removeChild(f)),d=i.style,i.setAttributeNS(null,"width","400px"),i.setAttributeNS(null,"height","400px"),i.setAttributeNS(null,"viewBox","0 0 400 400"),d.display="block",d.boxSizing="border-box",d.border="0px solid red",d.transform="none",r.style.cssText="width:100px;height:100px;overflow:scroll;-ms-overflow-style:none;",p.appendChild(r),r.appendChild(i),o=i.createSVGPoint().matrixTransform(i.getScreenCTM()),t=o.y,r.scrollTop=100,o.x=o.y=0,o=o.matrixTransform(i.getScreenCTM()),l=t-o.y<100.1?0:t-o.y-150,r.removeChild(i),p.removeChild(r),p.appendChild(i),e=i.getScreenCTM(),t=e.e,d.border="50px solid red",e=i.getScreenCTM(),0===t&&0===e.e&&0===e.f&&1===e.a?(a=1,s=!0):(a=t!==e.e?1:0,s=1!==e.a),p.removeChild(i)},fe=""!==J(w,"perspective"),de=J(w,"transformOrigin").replace(/^ms/g,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase(),pe=J(w,"transform"),ue=pe.replace(/^ms/g,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase(),he={},ge={},xe=window.SVGElement,me=function(e){return!!(xe&&"function"==typeof e.getBBox&&e.getCTM&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM))},ve=(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent))&&parseFloat(RegExp.$1)<11,ye=[],we=[],be=function(e){if(!e.getBoundingClientRect||!e.parentNode||!pe)return{offsetTop:0,offsetLeft:0,scaleX:1,scaleY:1,offsetParent:v};if(Ie.cacheSVGData!==!1&&e._gsCache&&e._gsCache.lastUpdate===t.ticker.frame)return e._gsCache;var o,n,r,i,c,f,d,p,u,h,g,x,y=e,w=Se(e);if(w.lastUpdate=t.ticker.frame,e.getBBox&&!w.isSVGRoot){for(y=e.parentNode,o=e.getBBox();y&&"svg"!==(y.nodeName+"").toLowerCase();)y=y.parentNode;return i=be(y),w.offsetTop=o.y*i.scaleY,w.offsetLeft=o.x*i.scaleX,w.scaleX=i.scaleX,w.scaleY=i.scaleY,w.offsetParent=y||v,w}for(r=w.offsetParent,r===m.body&&(r=v),we.length=ye.length=0;y&&(c=ae(y,pe,!0),"matrix(1, 0, 0, 1, 0, 0)"!==c&&"none"!==c&&"translate3d(0px, 0px, 0px)"!==c&&(we.push(y),ye.push(y.style[pe]),y.style[pe]="none"),y!==r);)y=y.parentNode;for(n=r.getBoundingClientRect(),c=e.getScreenCTM(),p=e.createSVGPoint(),d=p.matrixTransform(c),p.x=p.y=10,p=p.matrixTransform(c),w.scaleX=(p.x-d.x)/10,w.scaleY=(p.y-d.y)/10,void 0===a&&ce(),w.borderBox&&!s&&e.getAttribute("width")&&(i=te(e)||{},u=parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth)||0,h=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)||0,g=parseFloat(i.width)||0,x=parseFloat(i.height)||0,w.scaleX*=(g-u)/g,w.scaleY*=(x-h)/x),l?(o=e.getBoundingClientRect(),w.offsetLeft=o.left-n.left,w.offsetTop=o.top-n.top):(w.offsetLeft=d.x-n.left,w.offsetTop=d.y-n.top),w.offsetParent=r,f=we.length;--f>-1;)we[f].style[pe]=ye[f];return w},Te=function(e,o){if(o=o||{},!e||e===v||!e.parentNode||e===window)return{x:0,y:0};var n=te(e),r=de&&n?n.getPropertyValue(de):"50% 50%",i=r.split(" "),a=-1!==r.indexOf("left")?"0%":-1!==r.indexOf("right")?"100%":i[0],s=-1!==r.indexOf("top")?"0%":-1!==r.indexOf("bottom")?"100%":i[1];return("center"===s||null==s)&&(s="50%"),("center"===a||isNaN(parseFloat(a)))&&(a="50%"),e.getBBox&&me(e)?(e._gsTransform||(t.set(e,{x:"+=0",overwrite:!1}),void 0===e._gsTransform.xOrigin&&console.log("Draggable requires at least GSAP 1.17.0")),r=e.getBBox(),o.x=e._gsTransform.xOrigin-r.x,o.y=e._gsTransform.yOrigin-r.y):(e.getBBox&&!e.offsetWidth&&-1!==(a+s).indexOf("%")&&(e=e.getBBox(),e={offsetWidth:e.width,offsetHeight:e.height}),o.x=-1!==a.indexOf("%")?e.offsetWidth*parseFloat(a)/100:parseFloat(a),o.y=-1!==s.indexOf("%")?e.offsetHeight*parseFloat(s)/100:parseFloat(s)),o},Se=function(e){if(Ie.cacheSVGData!==!1&&e._gsCache&&e._gsCache.lastUpdate===t.ticker.frame)return e._gsCache;var o,n=e._gsCache=e._gsCache||{},r=te(e),i=e.getBBox&&me(e),a="svg"===(e.nodeName+"").toLowerCase();if(n.isSVG=i,n.isSVGRoot=a,n.borderBox="border-box"===r.boxSizing,n.computedStyle=r,a)(n.offsetParent=e.offsetParent)||(o=e.parentNode||v,o.insertBefore(w,e),n.offsetParent=w.offsetParent||v,o.removeChild(w));else if(i){for(o=e.parentNode;o&&"svg"!==(o.nodeName+"").toLowerCase();)o=o.parentNode;n.offsetParent=o}return n},Le=function(e,t,o,n){if(e===window||!e||!e.style||!e.parentNode)return[1,0,0,1,0,0];var r,i,s,l,f,d,p,u,h,g,x,y,w,b,T=e._gsCache||Se(e),S=e.parentNode,L=S._gsCache||Se(S),C=T.computedStyle,N=T.isSVG?L.offsetParent:S.offsetParent;return r=T.isSVG&&-1!==(e.style[pe]+"").indexOf("matrix")?e.style[pe]:C?C.getPropertyValue(ue):e.currentStyle?e.currentStyle[pe]:"1,0,0,1,0,0",e.getBBox&&-1!==(e.getAttribute("transform")+"").indexOf("matrix")&&(r=e.getAttribute("transform")),r=(r+"").match(/(?:\-|\b)[\d\-\.e]+\b/g)||[1,0,0,1,0,0],r.length>6&&(r=[r[0],r[1],r[4],r[5],r[12],r[13]]),n?r[4]=r[5]=0:T.isSVG&&(f=e._gsTransform)&&(f.xOrigin||f.yOrigin)&&(r[0]=parseFloat(r[0]),r[1]=parseFloat(r[1]),r[2]=parseFloat(r[2]),r[3]=parseFloat(r[3]),r[4]=parseFloat(r[4])-(f.xOrigin-(f.xOrigin*r[0]+f.yOrigin*r[2])),r[5]=parseFloat(r[5])-(f.yOrigin-(f.xOrigin*r[1]+f.yOrigin*r[3]))),t&&(void 0===a&&ce(),s=T.isSVG||T.isSVGRoot?be(e):e,T.isSVG?(l=e.getBBox(),g=L.isSVGRoot?{x:0,y:0}:S.getBBox(),s={offsetLeft:l.x-g.x,offsetTop:l.y-g.y,offsetParent:T.offsetParent}):T.isSVGRoot?(x=parseInt(C.borderTopWidth,10)||0,y=parseInt(C.borderLeftWidth,10)||0,w=(r[0]-a)*y+r[2]*x,b=r[1]*y+(r[3]-a)*x,d=t.x,p=t.y,u=d-(d*r[0]+p*r[2]),h=p-(d*r[1]+p*r[3]),r[4]=parseFloat(r[4])+u,r[5]=parseFloat(r[5])+h,t.x-=u,t.y-=h,d=s.scaleX,p=s.scaleY,t.x*=d,t.y*=p,r[0]*=d,r[1]*=p,r[2]*=d,r[3]*=p,ve||(t.x+=w,t.y+=b)):!c&&e.offsetParent&&(t.x+=parseInt(ae(e.offsetParent,"borderLeftWidth"),10)||0,t.y+=parseInt(ae(e.offsetParent,"borderTopWidth"),10)||0),i=S===v||S===m.body,r[4]=Number(r[4])+t.x+(s.offsetLeft||0)-o.x-(i?0:S.scrollLeft||0),r[5]=Number(r[5])+t.y+(s.offsetTop||0)-o.y-(i?0:S.scrollTop||0),S&&"fixed"===ae(e,"position",C)&&(r[4]+=z(),r[5]+=G()),S&&S!==v&&N===s.offsetParent&&(r[4]-=S.offsetLeft||0,r[5]-=S.offsetTop||0,c||!S.offsetParent||T.isSVG||T.isSVGRoot||(r[4]-=parseInt(ae(S.offsetParent,"borderLeftWidth"),10)||0,r[5]-=parseInt(ae(S.offsetParent,"borderTopWidth"),10)||0))),r},Ce=function(e,t){if(!e||e===window||!e.parentNode)return[1,0,0,1,0,0];for(var o,n,r,i,a,s,l,c,f=Te(e,he),d=Te(e.parentNode,ge),p=Le(e,f,d);(e=e.parentNode)&&e.parentNode&&e!==v;)f=d,d=Te(e.parentNode,f===he?ge:he),l=Le(e,f,d),o=p[0],n=p[1],r=p[2],i=p[3],a=p[4],s=p[5],p[0]=o*l[0]+n*l[2],p[1]=o*l[1]+n*l[3],p[2]=r*l[0]+i*l[2],p[3]=r*l[1]+i*l[3],p[4]=a*l[0]+s*l[2]+l[4],p[5]=a*l[1]+s*l[3]+l[5];return t&&(o=p[0],n=p[1],r=p[2],i=p[3],a=p[4],s=p[5],c=o*i-n*r,p[0]=i/c,p[1]=-n/c,p[2]=-r/c,p[3]=o/c,p[4]=(r*s-i*a)/c,p[5]=-(o*s-n*a)/c),p},Ne=function(e,t,o,n,r){e=Q(e);var i=Ce(e,!1,r),a=t.x,s=t.y;return o&&(Te(e,t),a-=t.x,s-=t.y),n=n===!0?t:n||{},n.x=a*i[0]+s*i[2]+i[4],n.y=a*i[1]+s*i[3]+i[5],n},Me=function(e,t,o){var n=e.x*t[0]+e.y*t[2]+t[4],r=e.x*t[1]+e.y*t[3]+t[5];return e.x=n*o[0]+r*o[2]+o[4],e.y=n*o[1]+r*o[3]+o[5],e},De=function(e,t,o){if(!(e=Q(e)))return null;t=Q(t);var n,r,i,a,s,l,c,f,d,p,u,h,g,x,y,w,b,T,S,L,C,M,D=e.getBBox&&me(e);if(e===window)a=G(),r=z(),i=r+(v.clientWidth||e.innerWidth||m.body.clientWidth||0),s=a+((e.innerHeight||0)-20<v.clientHeight?v.clientHeight:e.innerHeight||m.body.clientHeight||0);else{if(void 0===t||t===window)return e.getBoundingClientRect();n=Te(e),r=-n.x,a=-n.y,D?(h=e.getBBox(),g=h.width,x=h.height):e.offsetWidth?(g=e.offsetWidth,x=e.offsetHeight):(C=te(e),g=parseFloat(C.width),x=parseFloat(C.height)),i=r+g,s=a+x,"svg"!==e.nodeName.toLowerCase()||N||(y=be(e),M=y.computedStyle||{},T=(e.getAttribute("viewBox")||"0 0").split(" "),S=parseFloat(T[0]),L=parseFloat(T[1]),w=parseFloat(M.borderLeftWidth)||0,b=parseFloat(M.borderTopWidth)||0,i-=g-(g-w)/y.scaleX-S,s-=x-(x-b)/y.scaleY-L,r-=w/y.scaleX-S,a-=b/y.scaleY-L,C&&(i+=(parseFloat(M.borderRightWidth)+w)/y.scaleX,s+=(b+parseFloat(M.borderBottomWidth))/y.scaleY))}return e===t?{left:r,top:a,width:i-r,height:s-a}:(l=Ce(e),c=Ce(t,!0),f=Me({x:r,y:a},l,c),d=Me({x:i,y:a},l,c),p=Me({x:i,y:s},l,c),u=Me({x:r,y:s},l,c),r=Math.min(f.x,d.x,p.x,u.x),a=Math.min(f.y,d.y,p.y,u.y),O.x=O.y=0,o&&Te(t,O),{left:r+O.x,top:a+O.y,width:Math.max(f.x,d.x,p.x,u.x)-r,height:Math.max(f.y,d.y,p.y,u.y)-a})},Pe=function(e){return e&&e.length&&e[0]&&(e[0].nodeType&&e[0].style&&!e.nodeType||e[0].length&&e[0][0])?!0:!1},Xe=function(e){var t,o,n,r=[],i=e.length;for(t=0;i>t;t++)if(o=e[t],Pe(o))for(n=o.length,n=0;n<o.length;n++)r.push(o[n]);else o&&0!==o.length&&r.push(o);return r},_e="ontouchstart"in v&&"orientation"in window,ke=function(e){for(var t=e.split(","),o=(void 0!==w.onpointerdown?"pointerdown,pointermove,pointerup,pointercancel":void 0!==w.onmspointerdown?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":e).split(","),n={},r=8;--r>-1;)n[t[r]]=o[r],n[o[r]]=t[r];return n}("touchstart,touchmove,touchend,touchcancel"),Ye=function(e,t,o,n){e.addEventListener?e.addEventListener(ke[t]||t,o,n):e.attachEvent&&e.attachEvent("on"+t,o)},Be=function(e,t,o){e.removeEventListener?e.removeEventListener(ke[t]||t,o):e.detachEvent&&e.detachEvent("on"+t,o)},Oe=function(e,t){for(var o=e.length;--o>-1;)if(e[o].identifier===t)return!0;return!1},Ee=function(e){r=e.touches&&k<e.touches.length,Be(e.target,"touchend",Ee)},Re=function(e){r=e.touches&&k<e.touches.length,Ye(e.target,"touchend",Ee)},We=function(e,t,o,n,r,i){var a,s,l,c={};if(t)if(1!==r&&t instanceof Array){for(c.end=a=[],l=t.length,s=0;l>s;s++)a[s]=t[s]*r;o+=1.1,n-=1.1}else"function"==typeof t?c.end=function(o){return t.call(e,o)*r}:c.end=t;return(o||0===o)&&(c.max=o),(n||0===n)&&(c.min=n),i&&(c.velocity=0),c},Ae=function(e){var t;return e&&e.getAttribute&&"BODY"!==e.nodeName?"true"===(t=e.getAttribute("data-clickable"))||"false"!==t&&(e.onclick||_.test(e.nodeName+"")||"true"===e.getAttribute("contentEditable"))?!0:Ae(e.parentNode):!1},Fe=function(e,t){for(var o,n=e.length;--n>-1;)o=e[n],o.ondragstart=o.onselectstart=t?null:T,ee(o,"userSelect",t?"text":"none")},He=function(){var e,t=m.createElement("div"),o=m.createElement("div"),n=o.style,r=m.body||w;return n.display="inline-block",n.position="relative",t.style.cssText=o.innerHTML="width:90px; height:40px; padding:10px; overflow:auto; visibility: hidden",t.appendChild(o),r.appendChild(t),f=o.offsetHeight+18>t.scrollHeight,n.width="100%",pe||(n.paddingRight="500px",e=t.scrollLeft=t.scrollWidth-t.clientWidth,n.left="-90px",e=e!==t.scrollLeft),r.removeChild(t),e}(),Ve=function(e,o){e=Q(e),o=o||{};var n,r,i,a,s,l,c=m.createElement("div"),d=c.style,p=e.firstChild,u=0,h=0,g=e.scrollTop,x=e.scrollLeft,v=e.scrollWidth,y=e.scrollHeight,w=0,b=0,T=0;fe&&o.force3D!==!1?(s="translate3d(",l="px,0px)"):pe&&(s="translate(",l="px)"),this.scrollTop=function(e,t){return arguments.length?void this.top(-e,t):-this.top()},this.scrollLeft=function(e,t){return arguments.length?void this.left(-e,t):-this.left()},this.left=function(n,r){if(!arguments.length)return-(e.scrollLeft+h);var i=e.scrollLeft-x,a=h;return(i>2||-2>i)&&!r?(x=e.scrollLeft,t.killTweensOf(this,!0,{left:1,scrollLeft:1}),this.left(-x),void(o.onKill&&o.onKill())):(n=-n,0>n?(h=n-.5|0,n=0):n>b?(h=n-b|0,n=b):h=0,(h||a)&&(s?this._suspendTransforms||(d[pe]=s+-h+"px,"+-u+l):d.left=-h+"px",He&&h+w>=0&&(d.paddingRight=h+w+"px")),e.scrollLeft=0|n,void(x=e.scrollLeft))},this.top=function(n,r){if(!arguments.length)return-(e.scrollTop+u);var i=e.scrollTop-g,a=u;return(i>2||-2>i)&&!r?(g=e.scrollTop,t.killTweensOf(this,!0,{top:1,scrollTop:1}),this.top(-g),void(o.onKill&&o.onKill())):(n=-n,0>n?(u=n-.5|0,n=0):n>T?(u=n-T|0,n=T):u=0,(u||a)&&(s?this._suspendTransforms||(d[pe]=s+-h+"px,"+-u+l):d.top=-u+"px"),e.scrollTop=0|n,void(g=e.scrollTop))},this.maxScrollTop=function(){return T},this.maxScrollLeft=function(){return b},this.disable=function(){for(p=c.firstChild;p;)a=p.nextSibling,e.appendChild(p),p=a;e===c.parentNode&&e.removeChild(c)},this.enable=function(){if(p=e.firstChild,p!==c){for(;p;)a=p.nextSibling,c.appendChild(p),p=a;e.appendChild(c),this.calibrate()}},this.calibrate=function(t){var o,a,s=e.clientWidth===n;g=e.scrollTop,x=e.scrollLeft,(!s||e.clientHeight!==r||c.offsetHeight!==i||v!==e.scrollWidth||y!==e.scrollHeight||t)&&((u||h)&&(o=this.left(),a=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),(!s||t)&&(d.display="block",d.width="auto",d.paddingRight="0px",w=Math.max(0,e.scrollWidth-e.clientWidth),w&&(w+=ae(e,"paddingLeft")+(f?ae(e,"paddingRight"):0))),d.display="inline-block",d.position="relative",d.overflow="visible",d.verticalAlign="top",d.width="100%",d.paddingRight=w+"px",f&&(d.paddingBottom=ae(e,"paddingBottom",!0)),N&&(d.zoom="1"),n=e.clientWidth,r=e.clientHeight,v=e.scrollWidth,y=e.scrollHeight,b=e.scrollWidth-n,T=e.scrollHeight-r,i=c.offsetHeight,d.display="block",(o||a)&&(this.left(o),this.top(a)))},this.content=c,this.element=e,this._suspendTransforms=!1,this.enable()},Ie=function(n,a){e.call(this,n),n=Q(n),i||(i=g.com.greensock.plugins.ThrowPropsPlugin),this.vars=a=W(a||{}),this.target=n,this.x=this.y=this.rotation=0,this.dragResistance=parseFloat(a.dragResistance)||0,this.edgeResistance=isNaN(a.edgeResistance)?1:parseFloat(a.edgeResistance)||0,this.lockAxis=a.lockAxis,this.autoScroll=a.autoScroll||0,this.lockedAxis=null,this.allowEventDefault=!!a.allowEventDefault;var s,l,c,f,x,y,w,T,D,_,O,A,V,G,z,K,J,te,oe,ne,re,ie,ce,fe,de,pe,ue,he,ge,xe,me,ve,ye,we=(a.type||(N?"top,left":"x,y")).toLowerCase(),be=-1!==we.indexOf("x")||-1!==we.indexOf("y"),Te=-1!==we.indexOf("rotation"),Se=Te?"rotation":be?"x":"left",Le=be?"y":"top",Me=-1!==we.indexOf("x")||-1!==we.indexOf("left")||"scroll"===we,De=-1!==we.indexOf("y")||-1!==we.indexOf("top")||"scroll"===we,Pe=a.minimumMovement||2,Xe=this,Ee=R(a.trigger||a.handle||n),He={},Ge=0,ze=!1,Ue=a.clickableTest||Ae,je=function(e){if(Xe.autoScroll&&(ze||Xe.isDragging&&te)){var t,o,r,i,a,s,c,f,d=n,p=15*Xe.autoScroll;for(ze=!1,E.scrollTop=null!=window.pageYOffset?window.pageYOffset:null!=v.scrollTop?v.scrollTop:m.body.scrollTop,E.scrollLeft=null!=window.pageXOffset?window.pageXOffset:null!=v.scrollLeft?v.scrollLeft:m.body.scrollLeft,i=Xe.pointerX-E.scrollLeft,a=Xe.pointerY-E.scrollTop;d&&!o;)o=j(d.parentNode),t=o?E:d.parentNode,r=o?{bottom:Math.max(v.clientHeight,window.innerHeight||0),right:Math.max(v.clientWidth,window.innerWidth||0),left:0,top:0}:t.getBoundingClientRect(),s=c=0,De&&(f=t._gsMaxScrollY-t.scrollTop,0>f?c=f:a>r.bottom-40&&f?(ze=!0,c=Math.min(f,p*(1-Math.max(0,r.bottom-a)/40)|0)):a<r.top+40&&t.scrollTop&&(ze=!0,c=-Math.min(t.scrollTop,p*(1-Math.max(0,a-r.top)/40)|0)),c&&(t.scrollTop+=c)),Me&&(f=t._gsMaxScrollX-t.scrollLeft,0>f?s=f:i>r.right-40&&f?(ze=!0,s=Math.min(f,p*(1-Math.max(0,r.right-i)/40)|0)):i<r.left+40&&t.scrollLeft&&(ze=!0,s=-Math.min(t.scrollLeft,p*(1-Math.max(0,i-r.left)/40)|0)),s&&(t.scrollLeft+=s)),o&&(s||c)&&(window.scrollTo(t.scrollLeft,t.scrollTop),at(Xe.pointerX+s,Xe.pointerY+c)),d=t}if(te){var u=Xe.x,h=Xe.y,g=1e-6;g>u&&u>-g&&(u=0),g>h&&h>-g&&(h=0),Te?(ge.data.rotation=Xe.rotation=u,ge.setRatio(1)):l?(De&&l.top(h),Me&&l.left(u)):be?(De&&(ge.data.y=h),Me&&(ge.data.x=u),ge.setRatio(1)):(De&&(n.style.top=h+"px"),Me&&(n.style.left=u+"px")),!T||e||ve||(ve=!0,se(Xe,"drag","onDrag"),ve=!1)}te=!1},Ke=function(e,o){var r,i=Xe.x,a=Xe.y;n._gsTransform||!be&&!Te||t.set(n,{x:"+=0",overwrite:!1}),be?(Xe.y=n._gsTransform.y,Xe.x=n._gsTransform.x):Te?Xe.x=Xe.rotation=n._gsTransform.rotation:l?(Xe.y=l.top(),Xe.x=l.left()):(Xe.y=parseInt(n.style.top,10)||0,Xe.x=parseInt(n.style.left,10)||0),!ne&&!re||o||(ne&&(r=ne(Xe.x),r!==Xe.x&&(Xe.x=r,Te&&(Xe.rotation=r))),re&&(r=re(Xe.y),r!==Xe.y&&(Xe.y=r))),(i!==Xe.x||a!==Xe.y)&&je(!0),e||se(Xe,"throwupdate","onThrowUpdate")},Ze=function(){var e,t,o,r;w=!1,l?(l.calibrate(),Xe.minX=_=-l.maxScrollLeft(),Xe.minY=A=-l.maxScrollTop(),Xe.maxX=D=Xe.maxY=O=0,w=!0):a.bounds&&(e=le(a.bounds,n.parentNode),Te?(Xe.minX=_=e.left,Xe.maxX=D=e.left+e.width,Xe.minY=A=Xe.maxY=O=0):void 0!==a.bounds.maxX||void 0!==a.bounds.maxY?(e=a.bounds,Xe.minX=_=e.minX,Xe.minY=A=e.minY,Xe.maxX=D=e.maxX,Xe.maxY=O=e.maxY):(t=le(n,n.parentNode),Xe.minX=_=ae(n,Se)+e.left-t.left,Xe.minY=A=ae(n,Le)+e.top-t.top,Xe.maxX=D=_+(e.width-t.width),Xe.maxY=O=A+(e.height-t.height)),_>D&&(Xe.minX=D,Xe.maxX=D=_,_=Xe.minX),A>O&&(Xe.minY=O,Xe.maxY=O=A,A=Xe.minY),Te&&(Xe.minRotation=_,Xe.maxRotation=D),w=!0),a.liveSnap&&(o=a.liveSnap===!0?a.snap||{}:a.liveSnap,r=o instanceof Array||"function"==typeof o,Te?(ne=nt(r?o:o.rotation,_,D,1),re=null):(Me&&(ne=nt(r?o:o.x||o.left||o.scrollLeft,_,D,l?-1:1)),De&&(re=nt(r?o:o.y||o.top||o.scrollTop,A,O,l?-1:1))))},qe=function(){Xe.isThrowing=!1,se(Xe,"throwcomplete","onThrowComplete")},Qe=function(){Xe.isThrowing=!1},Je=function(e,t){var o,r,s,c;e&&i?(e===!0&&(o=a.snap||{},r=o instanceof Array||"function"==typeof o,e={resistance:(a.throwResistance||a.resistance||1e3)/(Te?10:1)},Te?e.rotation=We(Xe,r?o:o.rotation,D,_,1,t):(Me&&(e[Se]=We(Xe,r?o:o.x||o.left||o.scrollLeft,D,_,l?-1:1,t||"x"===Xe.lockedAxis)),De&&(e[Le]=We(Xe,r?o:o.y||o.top||o.scrollTop,O,A,l?-1:1,t||"y"===Xe.lockedAxis)))),Xe.isThrowing=!0,c=isNaN(a.overshootTolerance)?1===a.edgeResistance?0:1-Xe.edgeResistance+.2:a.overshootTolerance,Xe.tween=s=i.to(l||n,{throwProps:e,ease:a.ease||g.Power3.easeOut,onComplete:qe,onOverwrite:Qe,onUpdate:a.fastMode?se:Ke,onUpdateParams:a.fastMode?[Xe,"onthrowupdate","onThrowUpdate"]:b},isNaN(a.maxDuration)?2:a.maxDuration,isNaN(a.minDuration)?0===c?0:.5:a.minDuration,c),a.fastMode||(l&&(l._suspendTransforms=!0),s.render(s.duration(),!0,!0),Ke(!0,!0),Xe.endX=Xe.x,Xe.endY=Xe.y,Te&&(Xe.endRotation=Xe.x),s.play(0),Ke(!0,!0),l&&(l._suspendTransforms=!1))):w&&Xe.applyBounds()},et=function(){var e,t,o,r,i,a,s,l,d,p=fe||[1,0,0,1,0,0];fe=Ce(n.parentNode,!0),Xe.isPressed&&p.join(",")!==fe.join(",")&&(e=p[0],t=p[1],o=p[2],r=p[3],i=p[4],a=p[5],s=e*r-t*o,l=c*(r/s)+f*(-o/s)+(o*a-r*i)/s,d=c*(-t/s)+f*(e/s)+-(e*a-t*i)/s,f=l*fe[1]+d*fe[3]+fe[5],c=l*fe[0]+d*fe[2]+fe[4]),fe[1]||fe[2]||1!=fe[0]||1!=fe[3]||0!=fe[4]||0!=fe[5]||(fe=null)},tt=function(){var e=1-Xe.edgeResistance;et(),l?(Ze(),y=l.top(),x=l.left()):(ot()?(Ke(!0,!0),Ze()):Xe.applyBounds(),Te?(J=Ne(n,{x:0,y:0}),Ke(!0,!0),x=Xe.x,y=Xe.y=Math.atan2(J.y-f,c-J.x)*S):(ue=n.parentNode?n.parentNode.scrollTop||0:0,he=n.parentNode?n.parentNode.scrollLeft||0:0,y=ae(n,Le),x=ae(n,Se))),w&&e&&(x>D?x=D+(x-D)/e:_>x&&(x=_-(_-x)/e),Te||(y>O?y=O+(y-O)/e:A>y&&(y=A-(A-y)/e)))},ot=function(){return Xe.tween&&Xe.tween.isActive()},nt=function(e,t,o,n){return"function"==typeof e?function(r){var i=Xe.isPressed?1-Xe.edgeResistance:1;return e.call(Xe,r>o?o+(r-o)*i:t>r?t+(r-t)*i:r)*n}:e instanceof Array?function(n){for(var r,i,a=e.length,s=0,l=L;--a>-1;)r=e[a],i=r-n,0>i&&(i=-i),l>i&&r>=t&&o>=r&&(s=a,l=i);return e[s]}:isNaN(e)?function(e){return e}:function(){return e*n}},rt=function(e){var o,r;if(s&&!Xe.isPressed&&e&&!("mousedown"===e.type&&C()-pe<30&&ke[Xe.pointerEvent.type])){if(de=ot(),Xe.pointerEvent=e,ke[e.type]?(ce=-1!==e.type.indexOf("touch")?e.currentTarget||e.target:m,Ye(ce,"touchend",st),Ye(ce,"touchmove",it),Ye(ce,"touchcancel",st),Ye(m,"touchstart",Re)):(ce=null,Ye(m,"mousemove",it)),me=null,Ye(m,"mouseup",st),e&&e.target&&Ye(e.target,"mouseup",st),ie=Ue.call(Xe,e.target)&&!a.dragClickables)return Ye(e.target,"change",st),se(Xe,"press","onPress"),void Fe(Ee,!0);if(xe=!ce||Me===De||l||Xe.vars.allowNativeTouchScrolling===!1?!1:Me?"y":"x",N?e=q(e,!0):xe||Xe.allowEventDefault||(e.preventDefault(),e.preventManipulation&&e.preventManipulation()),e.changedTouches?(e=z=e.changedTouches[0],K=e.identifier):e.pointerId?K=e.pointerId:z=K=null,k++,F(je),f=Xe.pointerY=e.pageY,c=Xe.pointerX=e.pageX,(xe||Xe.autoScroll)&&Z(n.parentNode),!Xe.autoScroll||Te||l||!n.parentNode||n.getBBox||!n.parentNode._gsMaxScrollX||M.parentNode||(M.style.width=n.parentNode.scrollWidth+"px",n.parentNode.appendChild(M)),tt(),fe&&(o=c*fe[0]+f*fe[2]+fe[4],f=c*fe[1]+f*fe[3]+fe[5],c=o),Xe.tween&&Xe.tween.kill(),Xe.isThrowing=!1,t.killTweensOf(l||n,!0,He),l&&t.killTweensOf(n,!0,{scrollTo:1}),Xe.tween=Xe.lockedAxis=null,(a.zIndexBoost||!Te&&!l&&a.zIndexBoost!==!1)&&(n.style.zIndex=Ie.zIndex++),Xe.isPressed=!0,T=!(!a.onDrag&&!Xe._listeners.drag),!Te)for(r=Ee.length;--r>-1;)ee(Ee[r],"cursor",a.cursor||"move");se(Xe,"press","onPress")}},it=function(e){var t,o,n,i,a=e;if(s&&!r&&Xe.isPressed&&e){if(Xe.pointerEvent=e,t=e.changedTouches){if(e=t[0],e!==z&&e.identifier!==K){for(i=t.length;--i>-1&&(e=t[i]).identifier!==K;);if(0>i)return}}else if(e.pointerId&&K&&e.pointerId!==K)return;if(N)e=q(e,!0);else{if(ce&&xe&&!me&&(o=e.pageX,n=e.pageY,fe&&(i=o*fe[0]+n*fe[2]+fe[4],n=o*fe[1]+n*fe[3]+fe[5],o=i),me=Math.abs(o-c)>Math.abs(n-f)&&Me?"x":"y",Xe.vars.lockAxisOnTouchScroll!==!1&&(Xe.lockedAxis="x"===me?"y":"x","function"==typeof Xe.vars.onLockAxis&&Xe.vars.onLockAxis.call(Xe,a)),Y&&xe===me))return void st(a);Xe.allowEventDefault||xe&&(!me||xe===me)||a.cancelable===!1||(a.preventDefault(),a.preventManipulation&&a.preventManipulation())}Xe.autoScroll&&(ze=!0),at(e.pageX,e.pageY)}},at=function(e,t){var o,n,r,i,a,s,l=1-Xe.dragResistance,d=1-Xe.edgeResistance;Xe.pointerX=e,Xe.pointerY=t,Te?(i=Math.atan2(J.y-t,e-J.x)*S,a=Xe.y-i,Xe.y=i,a>180?y-=360:-180>a&&(y+=360),r=x+(y-i)*l):(fe&&(s=e*fe[0]+t*fe[2]+fe[4],t=e*fe[1]+t*fe[3]+fe[5],e=s),n=t-f,o=e-c,Pe>n&&n>-Pe&&(n=0),Pe>o&&o>-Pe&&(o=0),(Xe.lockAxis||Xe.lockedAxis)&&(o||n)&&(s=Xe.lockedAxis,s||(Xe.lockedAxis=s=Me&&Math.abs(o)>Math.abs(n)?"y":De?"x":null,s&&"function"==typeof Xe.vars.onLockAxis&&Xe.vars.onLockAxis.call(Xe,Xe.pointerEvent)),"y"===s?n=0:"x"===s&&(o=0)),r=x+o*l,i=y+n*l),ne||re?(ne&&(r=ne(r)),re&&(i=re(i))):w&&(r>D?r=D+(r-D)*d:_>r&&(r=_+(r-_)*d),Te||(i>O?i=O+(i-O)*d:A>i&&(i=A+(i-A)*d))),Te||(r=Math.round(r),i=Math.round(i)),(Xe.x!==r||Xe.y!==i&&!Te)&&(Te?Xe.endRotation=Xe.x=Xe.endX=r:(De&&(Xe.y=Xe.endY=i),Me&&(Xe.x=Xe.endX=r)),te=!0,!Xe.isDragging&&Xe.isPressed&&(Xe.isDragging=!0,se(Xe,"dragstart","onDragStart")))},st=function(e,o){if(s&&Xe.isPressed&&(!e||null==K||o||!(e.pointerId&&e.pointerId!==K||e.changedTouches&&!Oe(e.changedTouches,K)))){Xe.isPressed=!1;var r,i,l,c,f=e,d=Xe.isDragging;if(ce?(Be(ce,"touchend",st),Be(ce,"touchmove",it),Be(ce,"touchcancel",st),Be(m,"touchstart",Re)):Be(m,"mousemove",it),Be(m,"mouseup",st),e&&e.target&&Be(e.target,"mouseup",st),te=!1,M.parentNode&&M.parentNode.removeChild(M),ie)return e&&Be(e.target,"change",st),Fe(Ee,!1),se(Xe,"release","onRelease"),se(Xe,"click","onClick"),void(ie=!1);if(H(je),!Te)for(i=Ee.length;--i>-1;)ee(Ee[i],"cursor",a.cursor||"move");if(d&&(Ge=B=C(),Xe.isDragging=!1),k--,e){if(N&&(e=q(e,!1)),r=e.changedTouches,r&&(e=r[0],e!==z&&e.identifier!==K)){for(i=r.length;--i>-1&&(e=r[i]).identifier!==K;);if(0>i)return}Xe.pointerEvent=f,Xe.pointerX=e.pageX,Xe.pointerY=e.pageY}return f&&!d?(de&&(a.snap||a.bounds)&&Je(a.throwProps),se(Xe,"release","onRelease"),Y&&"touchmove"===f.type||(se(Xe,"click","onClick"),c=f.target||f.srcElement||n,pe=C(),t.delayedCall(1e-5,function(){pe!==ye&&Xe.enabled()&&!Xe.isPressed&&(c.click?c.click():m.createEvent&&(l=m.createEvent("MouseEvents"),l.initMouseEvent("click",!0,!0,window,1,Xe.pointerEvent.screenX,Xe.pointerEvent.screenY,Xe.pointerX,Xe.pointerY,!1,!1,!1,!1,0,null),c.dispatchEvent(l)))}))):(Je(a.throwProps),N||Xe.allowEventDefault||!f||!a.dragClickables&&Ue.call(Xe,f.target)||!d||xe&&(!me||xe!==me)||f.cancelable===!1||(f.preventDefault(),f.preventManipulation&&f.preventManipulation()),se(Xe,"release","onRelease")),d&&se(Xe,"dragend","onDragEnd"),!0}},lt=function(e){if(e&&Xe.isDragging){var t=e.target||e.srcElement||n.parentNode,o=t.scrollLeft-t._gsScrollX,r=t.scrollTop-t._gsScrollY;(o||r)&&(c-=o,f-=r,t._gsScrollX+=o,t._gsScrollY+=r,at(Xe.pointerX,Xe.pointerY))}},ct=function(e){var t=C(),o=40>t-pe,n=40>t-Ge;return o&&ye!==pe?void(ye=pe):void((Xe.isPressed||n||o)&&(e.preventDefault?(e.preventDefault(),(o||n&&Xe.vars.suppressClickOnDrag!==!1)&&e.stopImmediatePropagation()):e.returnValue=!1,e.preventManipulation&&e.preventManipulation()))};oe=Ie.get(this.target),oe&&oe.kill(),this.startDrag=function(e){rt(e),Xe.isDragging||(Xe.isDragging=!0,se(Xe,"dragstart","onDragStart"))},this.drag=it,this.endDrag=function(e){st(e,!0)},this.timeSinceDrag=function(){return Xe.isDragging?0:(C()-Ge)/1e3},this.hitTest=function(e,t){return Ie.hitTest(Xe.target,e,t)},this.getDirection=function(e,t){var o,n,r,a,s,l,c="velocity"===e&&i?e:"object"!=typeof e||Te?"start":"element";return"element"===c&&(s=$e(Xe.target),l=$e(e)),o="start"===c?Xe.x-x:"velocity"===c?i.getVelocity(this.target,Se):s.left+s.width/2-(l.left+l.width/2),Te?0>o?"counter-clockwise":"clockwise":(t=t||2,n="start"===c?Xe.y-y:"velocity"===c?i.getVelocity(this.target,Le):s.top+s.height/2-(l.top+l.height/2),r=Math.abs(o/n),a=1/t>r?"":0>o?"left":"right",t>r&&(""!==a&&(a+="-"),a+=0>n?"up":"down"),a)},this.applyBounds=function(e){var t,o,n;return e&&a.bounds!==e?(a.bounds=e,Xe.update(!0)):(Ke(!0),Ze(),w&&(t=Xe.x,o=Xe.y,w&&(t>D?t=D:_>t&&(t=_),o>O?o=O:A>o&&(o=A)),(Xe.x!==t||Xe.y!==o)&&(n=!0,Xe.x=Xe.endX=t,Te?Xe.endRotation=t:Xe.y=Xe.endY=o,te=!0,je()),Xe.isThrowing&&(n||Xe.endX>D||Xe.endX<_||Xe.endY>O||Xe.endY<A)&&Je(a.throwProps,n)),Xe)},this.update=function(e,t){var o=Xe.x,r=Xe.y;return et(),e?Xe.applyBounds():(te&&t&&je(),Ke(!0)),Xe.isPressed&&(Me&&Math.abs(o-Xe.x)>.01||De&&Math.abs(r-Xe.y)>.01&&!Te)&&tt(),Xe.autoScroll&&(Z(n.parentNode),ze=!0,je()),Xe},this.enable=function(e){var r,c,f;if("soft"!==e){for(c=Ee.length;--c>-1;)f=Ee[c],Ye(f,"mousedown",rt),Ye(f,"touchstart",rt),Ye(f,"click",ct,!0),Te||ee(f,"cursor",a.cursor||"move"),ee(f,"touchCallout","none"),ee(f,"touchAction",Me===De||l?"none":Me?"pan-y":"pan-x");Fe(Ee,!1)}return U(Xe.target,lt),s=!0,i&&"soft"!==e&&i.track(l||n,be?"x,y":Te?"rotation":"top,left"),l&&l.enable(),n._gsDragID=r="d"+X++,P[r]=this,l&&(l.element._gsDragID=r),t.set(n,{x:"+=0",overwrite:!1}),ge={t:n,data:N?G:n._gsTransform,tween:{},setRatio:N?function(){t.set(n,V)}:o._internals.setTransformRatio||o._internals.set3DTransformRatio},Xe.update(!0),Xe},this.disable=function(e){var t,o,r=Xe.isDragging;if(!Te)for(t=Ee.length;--t>-1;)ee(Ee[t],"cursor",null);if("soft"!==e){for(t=Ee.length;--t>-1;)o=Ee[t],ee(o,"touchCallout",null),ee(o,"touchAction",null),Be(o,"mousedown",rt),Be(o,"touchstart",rt),Be(o,"click",ct);Fe(Ee,!0),ce&&(Be(ce,"touchcancel",st),Be(ce,"touchend",st),Be(ce,"touchmove",it)),Be(m,"mouseup",st),Be(m,"mousemove",it)}return $(n,lt),s=!1,i&&"soft"!==e&&i.untrack(l||n,be?"x,y":Te?"rotation":"top,left"),l&&l.disable(),H(je),Xe.isDragging=Xe.isPressed=ie=!1,r&&se(Xe,"dragend","onDragEnd"),Xe},this.enabled=function(e,t){return arguments.length?e?Xe.enable(t):Xe.disable(t):s},this.kill=function(){return Xe.isThrowing=!1,t.killTweensOf(l||n,!0,He),Xe.disable(),delete P[n._gsDragID],Xe},-1!==we.indexOf("scroll")&&(l=this.scrollProxy=new Ve(n,I({onKill:function(){Xe.isPressed&&st(null)}},a)),n.style.overflowY=De&&!_e?"auto":"hidden",n.style.overflowX=Me&&!_e?"auto":"hidden",n=l.content),a.force3D!==!1&&t.set(n,{force3D:!0}),Te?He.rotation=1:(Me&&(He[Se]=1),De&&(He[Le]=1)),Te?(V=h,G=V.css,V.overwrite=!1):be&&(V=Me&&De?d:Me?p:u,G=V.css,V.overwrite=!1),this.enable()},Ge=Ie.prototype=new e;Ge.constructor=Ie,Ge.pointerX=Ge.pointerY=0,Ge.isDragging=Ge.isPressed=!1,Ie.version="0.14.3",Ie.zIndex=1e3,Ye(m,"touchcancel",function(){}),Ye(m,"contextmenu",function(e){var t;for(t in P)P[t].isPressed&&P[t].endDrag();
}),Ie.create=function(e,o){"string"==typeof e&&(e=t.selector(e));for(var n=e&&0!==e.length?Pe(e)?Xe(e):[e]:[],r=n.length;--r>-1;)n[r]=new Ie(n[r],o);return n},Ie.get=function(e){return P[(Q(e)||{})._gsDragID]},Ie.timeSinceDrag=function(){return(C()-B)/1e3};var ze={},Ue=function(e){var t,o,n=0,r=0;for(e=Q(e),t=e.offsetWidth,o=e.offsetHeight;e;)n+=e.offsetTop,r+=e.offsetLeft,e=e.offsetParent;return{top:n,left:r,width:t,height:o}},$e=function(e,t){if(e===window)return ze.left=ze.top=0,ze.width=ze.right=v.clientWidth||e.innerWidth||m.body.clientWidth||0,ze.height=ze.bottom=(e.innerHeight||0)-20<v.clientHeight?v.clientHeight:e.innerHeight||m.body.clientHeight||0,ze;var o=e.pageX!==t?{left:e.pageX-z(),top:e.pageY-G(),right:e.pageX-z()+1,bottom:e.pageY-G()+1}:e.nodeType||e.left===t||e.top===t?N?Ue(e):Q(e).getBoundingClientRect():e;return o.right===t&&o.width!==t?(o.right=o.left+o.width,o.bottom=o.top+o.height):o.width===t&&(o={width:o.right-o.left,height:o.bottom-o.top,right:o.right,left:o.left,bottom:o.bottom,top:o.top}),o};return Ie.hitTest=function(e,t,o){if(e===t)return!1;var n,r,i,a=$e(e),s=$e(t),l=s.left>a.right||s.right<a.left||s.top>a.bottom||s.bottom<a.top;return l||!o?!l:(i=-1!==(o+"").indexOf("%"),o=parseFloat(o)||0,n={left:Math.max(a.left,s.left),top:Math.max(a.top,s.top)},n.width=Math.min(a.right,s.right)-n.left,n.height=Math.min(a.bottom,s.bottom)-n.top,n.width<0||n.height<0?!1:i?(o*=.01,r=n.width*n.height,r>=a.width*a.height*o||r>=s.width*s.height*o):n.width>o&&n.height>o)},M.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;",Ie},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define(["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),require("../plugins/CSSPlugin.js"),module.exports=t())}("Draggable");</script><script>var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("plugins.ThrowPropsPlugin",["plugins.TweenPlugin","TweenLite","easing.Ease","utils.VelocityTracker"],function(e,t,r,n){var o,i,s,a,c=function(t,r){e.call(this,"throwProps"),this._overwriteProps.length=0},u=999999999999999,p=1e-10,l=_gsScope._gsDefine.globals,f=!1,v={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1,xPercent:1,yPercent:1},g=function(e,t,r,n){for(var o,i,s=t.length,a=0,c=u;--s>-1;)o=t[s],i=o-e,0>i&&(i=-i),c>i&&o>=n&&r>=o&&(a=s,c=i);return t[a]},h=function(e,t,r,n){if("auto"===e.end)return e;r=isNaN(r)?u:r,n=isNaN(n)?-u:n;var o="function"==typeof e.end?e.end(t):e.end instanceof Array?g(t,e.end,r,n):Number(e.end);return o>r?o=r:n>o&&(o=n),{max:o,min:o,unitFactor:e.unitFactor}},_=function(e,t,r){for(var n in t)void 0===e[n]&&n!==r&&(e[n]=t[n]);return e},d=c.calculateChange=function(e,n,o,i){null==i&&(i=.05);var s=n instanceof r?n:n?new r(n):t.defaultEase;return o*i*e/s.getRatio(i)},y=c.calculateDuration=function(e,n,o,i,s){s=s||.05;var a=i instanceof r?i:i?new r(i):t.defaultEase;return Math.abs((n-e)*a.getRatio(s)/o/s)},m=c.calculateTweenDuration=function(e,o,i,s,a,u){if("string"==typeof e&&(e=t.selector(e)),!e)return 0;null==i&&(i=10),null==s&&(s=.2),null==a&&(a=1),e.length&&(e=e[0]||e);var l,v,g,m,P,w,x,k,T,b,N=0,S=9999999999,V=o.throwProps||o,O=o.ease instanceof r?o.ease:o.ease?new r(o.ease):t.defaultEase,R=isNaN(V.checkpoint)?.05:Number(V.checkpoint),B=isNaN(V.resistance)?c.defaultResistance:Number(V.resistance);for(l in V)"resistance"!==l&&"checkpoint"!==l&&"preventOvershoot"!==l&&(v=V[l],"object"!=typeof v&&(T=T||n.getByTarget(e),T&&T.isTrackingProp(l)?v="number"==typeof v?{velocity:v}:{velocity:T.getVelocity(l)}:(m=Number(v)||0,g=m*B>0?m/B:m/-B)),"object"==typeof v&&(void 0!==v.velocity&&"number"==typeof v.velocity?m=Number(v.velocity)||0:(T=T||n.getByTarget(e),m=T&&T.isTrackingProp(l)?T.getVelocity(l):0),P=isNaN(v.resistance)?B:Number(v.resistance),g=m*P>0?m/P:m/-P,w="function"==typeof e[l]?e[l.indexOf("set")||"function"!=typeof e["get"+l.substr(3)]?l:"get"+l.substr(3)]():e[l]||0,x=w+d(m,O,g,R),void 0!==v.end&&(v=h(v,x,v.max,v.min),(u||f)&&(V[l]=_(v,V[l],"end"))),void 0!==v.max&&x>Number(v.max)+p?(b=v.unitFactor||c.defaultUnitFactors[l]||1,k=w>v.max&&v.min!==v.max||m*b>-15&&45>m*b?s+.1*(i-s):y(w,v.max,m,O,R),S>k+a&&(S=k+a)):void 0!==v.min&&x<Number(v.min)-p&&(b=v.unitFactor||c.defaultUnitFactors[l]||1,k=w<v.min&&v.min!==v.max||m*b>-45&&15>m*b?s+.1*(i-s):y(w,v.min,m,O,R),S>k+a&&(S=k+a)),k>N&&(N=k)),g>N&&(N=g));return N>S&&(N=S),N>i?i:s>N?s:N},P=c.prototype=new e("throwProps");return P.constructor=c,c.version="0.9.10",c.API=2,c._autoCSS=!0,c.defaultResistance=100,c.defaultUnitFactors={time:1e3,totalTime:1e3},c.track=function(e,t,r){return n.track(e,t,r)},c.untrack=function(e,t){n.untrack(e,t)},c.isTracking=function(e,t){return n.isTracking(e,t)},c.getVelocity=function(e,t){var r=n.getByTarget(e);return r?r.getVelocity(t):NaN},c._cssRegister=function(){var e=l.com.greensock.plugins.CSSPlugin;if(e){var t=e._internals,r=t._parseToProxy,s=t._setPluginRatio,a=t.CSSPropTween;t._registerComplexSpecialProp("throwProps",{parser:function(e,t,u,p,l,f){f=new c;var g,h,_,d,y,m={},P={},w={},x={},k={},T={};i={};for(_ in t)"resistance"!==_&&"preventOvershoot"!==_&&(h=t[_],"object"==typeof h?(void 0!==h.velocity&&"number"==typeof h.velocity?m[_]=Number(h.velocity)||0:(y=y||n.getByTarget(e),m[_]=y&&y.isTrackingProp(_)?y.getVelocity(_):0),void 0!==h.end&&(x[_]=h.end),void 0!==h.min&&(P[_]=h.min),void 0!==h.max&&(w[_]=h.max),h.preventOvershoot&&(T[_]=!0),void 0!==h.resistance&&(g=!0,k[_]=h.resistance)):"number"==typeof h?m[_]=h:(y=y||n.getByTarget(e),y&&y.isTrackingProp(_)?m[_]=y.getVelocity(_):m[_]=h||0),v[_]&&p._enableTransforms(2===v[_]));d=r(e,m,p,l,f),o=d.proxy,m=d.end;for(_ in o)i[_]={velocity:m[_],min:P[_],max:w[_],end:x[_],resistance:k[_],preventOvershoot:T[_]};return null!=t.resistance&&(i.resistance=t.resistance),t.preventOvershoot&&(i.preventOvershoot=!0),l=new a(e,"throwProps",0,0,d.pt,2),p._overwriteProps.pop(),l.plugin=f,l.setRatio=s,l.data=d,f._onInitTween(o,i,p._tween),l}})}},c.to=function(e,r,n,c,u){r.throwProps||(r={throwProps:r}),0===u&&(r.throwProps.preventOvershoot=!0),f=!0;var p=new t(e,c||1,r);return p.render(0,!0,!0),p.vars.css?(p.duration(m(o,{throwProps:i,ease:r.ease},n,c,u)),p._delay&&!p.vars.immediateRender?p.invalidate():s._onInitTween(o,a,p),f=!1,p):(p.kill(),p=new t(e,m(e,r,n,c,u),r),f=!1,p)},P._onInitTween=function(e,t,r){this.target=e,this._props=[],s=this,a=t;var o,i,c,u,p,l,v,g,y,m=r._ease,P=isNaN(t.checkpoint)?.05:Number(t.checkpoint),w=r._duration,x=t.preventOvershoot,k=0;for(o in t)if("resistance"!==o&&"checkpoint"!==o&&"preventOvershoot"!==o){if(i=t[o],"number"==typeof i)p=Number(i)||0;else if("object"!=typeof i||isNaN(i.velocity)){if(y=y||n.getByTarget(e),!y||!y.isTrackingProp(o))throw"ERROR: No velocity was defined in the throwProps tween of "+e+" property: "+o;p=y.getVelocity(o)}else p=Number(i.velocity);l=d(p,m,w,P),g=0,u="function"==typeof e[o],c=u?e[o.indexOf("set")||"function"!=typeof e["get"+o.substr(3)]?o:"get"+o.substr(3)]():e[o],"object"==typeof i&&(v=c+l,void 0!==i.end&&(i=h(i,v,i.max,i.min),f&&(t[o]=_(i,t[o],"end"))),void 0!==i.max&&Number(i.max)<v?x||i.preventOvershoot?l=i.max-c:g=i.max-c-l:void 0!==i.min&&Number(i.min)>v&&(x||i.preventOvershoot?l=i.min-c:g=i.min-c-l)),this._overwriteProps[k]=o,this._props[k++]={p:o,s:c,c1:l,c2:g,f:u,r:!1}}return!0},P._kill=function(t){for(var r=this._props.length;--r>-1;)null!=t[this._props[r].p]&&this._props.splice(r,1);return e.prototype._kill.call(this,t)},P._roundProps=function(e,t){for(var r=this._props,n=r.length;--n>-1;)(e[r[n].p]||e.throwProps)&&(r[n].r=t)},P.setRatio=function(e){for(var t,r,n=this._props.length;--n>-1;)t=this._props[n],r=t.s+t.c1*e+t.c2*e*e,t.r?r=Math.round(r):1===e&&(r=(1e4*r+(0>r?-.5:.5)|0)/1e4),t.f?this.target[t.p](r):this.target[t.p]=r},e.activate([c]),c},!0),_gsScope._gsDefine("utils.VelocityTracker",["TweenLite"],function(e){var t,r,n,o,i=/([A-Z])/g,s={},a={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1,xPercent:1,yPercent:1},c=document.defaultView?document.defaultView.getComputedStyle:function(){},u=function(e,t,r){var n=(e._gsTransform||s)[t];return n||0===n?n:(e.style[t]?n=e.style[t]:(r=r||c(e,null))?n=r[t]||r.getPropertyValue(t)||r.getPropertyValue(t.replace(i,"-$1").toLowerCase()):e.currentStyle&&(n=e.currentStyle[t]),parseFloat(n)||0)},p=e.ticker,l=function(e,t,r){this.p=e,this.f=t,this.v1=this.v2=0,this.t1=this.t2=p.time,this.css=!1,this.type="",this._prev=null,r&&(this._next=r,r._prev=this)},f=function(){var e,r,i=t,s=p.time;if(s-n>=.03)for(o=n,n=s;i;){for(r=i._firstVP;r;)e=r.css?u(i.target,r.p):r.f?i.target[r.p]():i.target[r.p],(e!==r.v1||s-r.t1>.15)&&(r.v2=r.v1,r.v1=e,r.t2=r.t1,r.t1=s),r=r._next;i=i._next}},v=function(e){this._lookup={},this.target=e,this.elem=e.style&&e.nodeType?!0:!1,r||(p.addEventListener("tick",f,null,!1,-100),n=o=p.time,r=!0),t&&(this._next=t,t._prev=this),t=this},g=v.getByTarget=function(e){for(var r=t;r;){if(r.target===e)return r;r=r._next}},h=v.prototype;return h.addProp=function(t,r){if(!this._lookup[t]){var n=this.target,o="function"==typeof n[t],i=o?this._altProp(t):t,s=this._firstVP;this._firstVP=this._lookup[t]=this._lookup[i]=s=new l(i!==t&&0===t.indexOf("set")?i:t,o,s),s.css=this.elem&&(void 0!==this.target.style[s.p]||a[s.p]),s.css&&a[s.p]&&!n._gsTransform&&e.set(n,{x:"+=0",overwrite:!1}),s.type=r||s.css&&0===t.indexOf("rotation")?"deg":"",s.v1=s.v2=s.css?u(n,s.p):o?n[s.p]():n[s.p]}},h.removeProp=function(e){var t=this._lookup[e];t&&(t._prev?t._prev._next=t._next:t===this._firstVP&&(this._firstVP=t._next),t._next&&(t._next._prev=t._prev),this._lookup[e]=0,t.f&&(this._lookup[this._altProp(e)]=0))},h.isTrackingProp=function(e){return this._lookup[e]instanceof l},h.getVelocity=function(e){var t,r,n,o=this._lookup[e],i=this.target;if(!o)throw"The velocity of "+e+" is not being tracked.";return t=o.css?u(i,o.p):o.f?i[o.p]():i[o.p],r=t-o.v2,("rad"===o.type||"deg"===o.type)&&(n="rad"===o.type?2*Math.PI:360,r%=n,r!==r%(n/2)&&(r=0>r?r+n:r-n)),r/(p.time-o.t2)},h._altProp=function(e){var t=e.substr(0,3),r=("get"===t?"set":"set"===t?"get":t)+e.substr(3);return"function"==typeof this.target[r]?r:e},v.getByTarget=function(r){var n=t;for("string"==typeof r&&(r=e.selector(r)),r.length&&r!==window&&r[0]&&r[0].style&&!r.nodeType&&(r=r[0]);n;){if(n.target===r)return n;n=n._next}},v.track=function(e,t,r){var n=g(e),o=t.split(","),i=o.length;for(r=(r||"").split(","),n||(n=new v(e));--i>-1;)n.addProp(o[i],r[i]||r[0]);return n},v.untrack=function(e,r){var n=g(e),o=(r||"").split(","),i=o.length;if(n){for(;--i>-1;)n.removeProp(o[i]);n._firstVP&&r||(n._prev?n._prev._next=n._next:n===t&&(t=n._next),n._next&&(n._next._prev=n._prev))}},v.isTracking=function(e,t){var r=g(e);return r?!t&&r._firstVP?!0:r.isTrackingProp(t):!1},v},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define(["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),module.exports=t())}("ThrowPropsPlugin");</script><script>var FalterNavigationController=function(){function e(){var e=getLanguageStringObject(),t=e.navigationCopy;$(".falter-intro-description").text(t.introDescription),$(".fb-link").attr("href",t.fbLink),$(".twitter-link").attr("href",t.twitterLink),$(".about-fb-link").attr("href",t.fbLinkAbout),$(".about-twitter-link").attr("href",t.twitterLinkAbout),$(".about-falter-button").text(t.about),$(".about-description").html(t.aboutCopy),$(".partner-agency").text(t.agency),$(".audio-icon-description").text(t.bestWithHeadphones),$(".replay-experience").text(t.backToStart),$(".falter-intro-mobile-description").text(t.introTouchDescription),$(".visit-falter").text(t.visitFalter),$(".scene-info-more").text(t.moreAbout),$(".open-scene").text(t.openScene),$(".section-title").each(function(t,o){$(o).text(e.sceneCopy[t].title)}),I=new SplitText(".audio-icon-description",{type:"lines"}),C=new SplitText(".falter-intro-description",{type:"lines"}),X=new SplitText(".falter-intro-mobile-description",{type:"lines"})}function t(e){M="up",a(E.currentNavIndex-1)}function o(e){M="down",a(E.currentNavIndex+1)}function a(e){n(e)&&(A?quickJumpToScene(e):jumpToScene(e))}function n(e,t){var o=e;return 0>=o?(o=1,t?o:!1):o>=g?(o=g-1,t?o:!1):t?o:!0}function r(e){document.querySelector(".nav-container").style.pointerEvents="auto",document.querySelector(".nav-container").style.cursor="auto",TweenMax.to(".ui",e?0:1,{autoAlpha:1}),TweenMax.to(".ui.top,.ui.bottom",e?0:1,{y:0,ease:Expo.easeOut}),TweenMax.staggerFromTo(".ui.right .dot",.5,{x:20},{ease:Expo.easeOut,x:0},.05),q?TweenMax.to(".final-scene-nav",.5,{y:0,autoAlpha:1}):TweenMax.to(".nav-inner",.5,{autoAlpha:1})}function i(e,t){var o=t||!1,a=o?0:.2;document.querySelector(".nav-container").style.pointerEvents="none",document.querySelector(".nav-container").style.cursor="default",TweenMax.to(".ui",a,{autoAlpha:0}),TweenMax.to(".ui.top",a,{y:-20}),TweenMax.to(".ui.bottom",a,{y:20}),e&&TweenMax.to(".nav-inner",a,{autoAlpha:0}),q&&TweenMax.to(".final-scene-nav",2*a,{y:20,autoAlpha:0})}function u(e){E.updateNav();var t=e?0:.5,o=$(window).width()>670?75:35;A?(TweenMax.fromTo(".open-scene",t,{autoAlpha:0,y:60},{autoAlpha:1,y:0,ease:Expo.easeOut}),TweenMax.to(".section-number",t,{lineHeight:"150px",ease:Expo.easeOut}),TweenMax.to(".nav-container",2*t,{top:"110%",ease:Expo.easeOut}),TweenMax.to(".nav-outer",t,{autoAlpha:1,y:0,ease:Expo.easeOut}),TweenMax.to(".close-button",t,{autoAlpha:1,y:0,ease:Expo.easeOut}),TweenMax.to(".section-overlay",t,{autoAlpha:.8}),TweenMax.to(".level",t,{autoAlpha:0}),TweenMax.to(".ui",t,{autoAlpha:0}),TweenMax.killTweensOf(".nav-hover-icon .line"),TweenMax.allTo(".nav-hover-icon .line",.5,{width:0,ease:Expo.easeOut})):(TweenMax.to(".open-scene",t,{autoAlpha:0,y:60,ease:Expo.easeOut}),TweenMax.to(".section-number",t,{lineHeight:o+"px",ease:Expo.easeOut}),TweenMax.to(".nav-outer",t,{autoAlpha:0,y:100,ease:Expo.easeOut}),TweenMax.to(".nav-container",2*t,{top:"150%",ease:Expo.easeOut}),TweenMax.to(".close-button",t/2,{autoAlpha:0,y:10,ease:Expo.easeOut}),TweenMax.to(".section-overlay",t,{autoAlpha:0}),TweenMax.to(".level",t,{autoAlpha:.3}))}function s(e){e!==E.currentNavIndex?a(e):E.toggleClose()}function l(t){changeLanguage($(this).text().toLowerCase());for(var o=0,a=w.length;a>o;o++)t.srcElement===w[o]?TweenMax.to(w[o],.5,{autoAlpha:1}):TweenMax.to(w[o],.5,{autoAlpha:.5});c(),e()}function c(){document.querySelector(".scene-info").textContent=getCurrentTitle()}function p(e,t){getCurrentLanguage()===w[e].textContent.toLowerCase()?TweenMax.to(w[e],.5,{autoAlpha:1}):TweenMax.to(w[e],.5,{autoAlpha:t?1:.5})}var d,h,x,f,v;this.currentNavIndex=0;var w,T,y,m,g=10,M="down",A=!1,E=this,b=!1,O=new TimelineMax({paused:!0}),S=new TimelineMax({paused:!0}),L=!1,N=!1,q=!1,I=new SplitText(".audio-icon-description",{type:"lines"}),C=new SplitText(".falter-intro-description",{type:"lines"}),X=new SplitText(".falter-intro-mobile-description",{type:"lines"}),k=!1,H=Draggable.create(".section-numbers",{type:"y",edgeResistance:.65,bounds:{top:-150,left:0,width:0,height:300},throwProps:!0,snap:{y:function(e){var t=$(window).width()>670?75:35,o=A?150:t,r=Math.round(e/o)*o,i=r/-150,u=n(i,!0);return E.currentNavIndex=u,E.updateNav(),a(E.currentNavIndex),r}},onLockAxis:function(){}});$(".open-scene").on("click",function(){L||N?(hideMainText(),N||(r(),TweenMax.to(".close-button",.5,{autoAlpha:0}),L=!1),N=!1):E.toggleClose()});var D,P;$("#falter-nav").bind("mousewheel",function(e){A&&(e.originalEvent.wheelDeltaY>0&&!P?(clearTimeout(D),t(),P=!0,D=setTimeout(function(){P=!1},200)):e.originalEvent.wheelDeltaY<0&&!P&&(clearTimeout(D),o(),P=!0,D=setTimeout(function(){P=!1},200)))}),this.audioSettings={volume:1,muted:!1},bowser.ios&&$("body, html, #falter-nav").bind("touchstart",function(e){var t=e.timeStamp,o=$(this).data("lastTouch")||t,a=t-o,n=e.originalEvent.touches.length;$(this).data("lastTouch",t),!a||a>500||n>1||(e.preventDefault(),$(this).trigger("click").trigger("click"))}),e(),this.mainTextWasHidden=function(){this.toggleClose()},this.hideStartTutorial=function(){TweenMax.to(".falter-intro-mobile-container",1,{autoAlpha:0}),TweenMax.to(".falter-intro",1,{autoAlpha:0})},this.mainTextIsVisibleOverride=function(){N=!0},this.showHeadphones=function(){O.play()},this.hideHeadphones=function(){TweenMax.staggerTo(I.lines,1,{y:10,autoAlpha:0,ease:Expo.easeOut},-.1,0),TweenMax.to(".audio-icon",1,{y:5,autoAlpha:0,ease:Expo.easeOut,delay:.1}),TweenMax.to(".audio-icon-container",.5,{autoAlpha:0,ease:Expo.easeOut,delay:.2}),TweenMax.to(".falter-audio",.1,{autoAlpha:0,delay:.7})},this.showFinalSceneNav=function(){q=!0,TweenMax.staggerFromTo(".final-scene-nav .simple-button",.5,{autoAlpha:0,y:20},{onStart:function(){TweenMax.set(".final-scene-nav",{autoAlpha:1})},y:0,autoAlpha:1,delay:2},.2),TweenMax.to(".nav-inner",.2,{autoAlpha:0})},this.setLastSceneHandPos=function(e){},this.setCurrentNavIndex=function(e){E.currentNavIndex=e},this.showTutorial=function(){updateData.usesMouse||(TweenMax.to(".falter-intro-mobile-container",1,{autoAlpha:1,delay:.5}),TweenMax.staggerFromTo(X.lines,1,{y:10,autoAlpha:0},{y:0,autoAlpha:1,delay:.6,ease:Expo.easeOut},.1)),S.play()},this.forceCloseMainTextUi=function(){r(),TweenMax.to(".close-button",.5,{autoAlpha:0}),L=!1},this.setTransitionIsAnimating=function(e,t){b=e,b||0==E.currentNavIndex||L?i(!0,t):r(),E.updateNav()},this.toggleClose=function(e){A=!A,A?pauseExperience():resumeExperience(),u(e)},this.toggleAudio=function(){this.audioSettings.muted?(fadeInAudio(),y.play()):(fadeOutAudio(),y.gotoAndStop(0)),this.audioSettings.muted=!this.audioSettings.muted},this.updateNav=function(){if(c(),!(E.currentNavIndex<0||E.currentNavIndex>g-1||q)){var e=$(window).width()>670?75:35,t=A?150:e,o=-t*E.currentNavIndex,a=-10*E.currentNavIndex,n=new TimelineMax;n.to(".gradient.opaque-left",.2,{scaleX:.6,ease:Quad.easeOut},0),n.to(".gradient.short",.2,{scaleX:.6,ease:Quad.easeOut},0),n.to(".gradient.opaque-right",.2,{scaleX:.9,ease:Quad.easeOut},0),n.to(".gradient",.5,{scaleX:1,ease:Quad.easeOut}),TweenMax.to(".section-numbers",.5,{y:o,ease:Expo.easeOut,onStart:H[0].disable,onUpdate:H[0].update,onComplete:function(){A&&!updateData.usesMouse&&H[0].enable()}}),TweenMax.to(".section-titles",1,{y:a+"px",ease:Expo.easeOut}),0==E.currentNavIndex?(i(),TweenMax.to(".nav-inner",.5,{autoAlpha:0})):1==E.currentNavIndex?(h.style.pointerEvents="none",TweenMax.killTweensOf(".nav-inner"),TweenMax.set(".arrow.up",{autoAlpha:0}),TweenMax.set(".nav-inner",{autoAlpha:1}),TweenMax.to(".arrow.down",.5,{autoAlpha:1})):E.currentNavIndex==g-1?(TweenMax.to(".arrow.up",.5,{autoAlpha:1}),TweenMax.to(".nav-inner",.5,{autoAlpha:1}),TweenMax.to(".arrow.down",.5,{autoAlpha:0}),x.style.pointerEvents="none"):(TweenMax.to(".arrow",.5,{autoAlpha:1}),TweenMax.to(".nav-inner",.5,{autoAlpha:1}),h.style.pointerEvents="auto",x.style.pointerEvents="auto");for(var r=0;g>r;r++)b?(f[r].style.pointerEvents="none",h.style.pointerEvents="none",x.style.pointerEvents="none"):(f[r].style.pointerEvents="auto",h.style.pointerEvents="auto",x.style.pointerEvents="auto"),0==r?(TweenMax.set(f[r],{autoAlpha:0}),TweenMax.set(v[r],{autoAlpha:0}),TweenMax.set(m[r],{autoAlpha:0,display:"none"}),f[r].style.pointerEvents="none"):r==E.currentNavIndex?(TweenMax.to(f[r],.5,{autoAlpha:1}),TweenMax.to(v[r],.5,{autoAlpha:1}),TweenMax.to(m[r],.5,{autoAlpha:1})):r==E.currentNavIndex-1||r==E.currentNavIndex+1?(TweenMax.to(f[r],.5,{autoAlpha:A?.2:0}),TweenMax.to(v[r],.5,{autoAlpha:.05}),TweenMax.to(m[r],.5,{autoAlpha:.2}),A||(f[r].style.pointerEvents="none")):(TweenMax.to(f[r],.5,{autoAlpha:A?.05:0}),TweenMax.to(v[r],.5,{autoAlpha:0}),f[r].style.pointerEvents="none",TweenMax.to(m[r],.5,{autoAlpha:.2}))}},this.showCloseButton=function(){L=!0,TweenMax.to(".close-button",.5,{autoAlpha:1})},this.hideCloseButton=function(){TweenMax.to(".close-button",.5,{autoAlpha:0})},function(){d=document.querySelector("#falter-nav"),f=d.querySelectorAll(".section-number"),v=d.querySelectorAll(".section-title"),h=d.querySelector(".arrow.up"),x=d.querySelector(".arrow.down"),h.addEventListener("mousedown",t),x.addEventListener("mousedown",o),w=d.querySelectorAll(".lang"),m=d.querySelectorAll(".dot"),T=d.querySelector(".site-audio");var e=T.querySelectorAll(".filler");y=new TimelineMax({paused:!1});for(var a=0;a<e.length;a++){var n=.5*Math.random()+.55,c=40*Math.random()+40;y.to(e[a],n,{height:c+"%",repeat:-1,yoyo:!0,ease:Strong.easeInOut},0)}var g=d.querySelector(".close-button");g.addEventListener("mousedown",function(e){L?(hideMainText(),r(),TweenMax.to(".close-button",.5,{autoAlpha:0}),L=!1,A=!1):E.toggleClose()}),g.addEventListener("mouseover",function(e){playCloseHover()}),d.querySelector(".scene-info-button").addEventListener("mousedown",function(e){L=!0,i(!0,!0),showMainText(),TweenMax.to(".close-button",.5,{autoAlpha:1})}),TweenMax.set(".close-line-left,.close-line-right",{x:0,y:0}),$(".close-button-animated").on("mouseenter",function(e){var t=new TimelineMax;t.fromTo(".close-line.left.start",.4,{left:20,top:-20,scaleX:0},{left:0,top:0,scaleX:1,ease:Expo.easeOut},.3),t.fromTo(".close-line.left.end",.4,{left:0,top:0,scaleX:1},{left:-5,top:5,scaleX:2,ease:Linear.easeNone},0),t.to(".close-line.left.end",.4,{left:-10,top:10,scaleX:0,ease:Expo.easeOut},.2),t.fromTo(".close-line.right.start",.4,{left:-20,top:-20,scaleX:0},{left:0,top:0,scaleX:1,ease:Expo.easeOut},.4),t.fromTo(".close-line.right.end",.4,{left:0,top:0,scaleX:1},{left:5,top:5,scaleX:2,ease:Linear.easeNone},.1),t.to(".close-line.right.end",.4,{left:10,top:10,scaleX:0,ease:Expo.easeOut},.3)}),d.querySelector(".close-about-button").addEventListener("mousedown",function(e){hideAboutPage();var t=new TimelineMax;t.to(".about-falter .close-about-button",.5,{autoAlpha:0}),t.staggerTo(".about-falter .partner",.5,{autoAlpha:0,rotationX:-40,y:20,ease:Expo.easeOut},.05,"-=.4"),t.staggerTo(".about-falter .social-link",.5,{autoAlpha:0},.05,0),t.to(".about-falter .copy",.5,{autoAlpha:0,y:50,ease:Expo.easeOut},"-=.4"),t.to(".about-falter .falter-image",1,{autoAlpha:0,rotationX:-20,y:50,ease:Expo.easeOut},"-=.4"),t.to(".about-falter",.5,{autoAlpha:0},"-=.8")}),d.querySelector(".close-about-button .hitarea").addEventListener("mouseover",function(e){playCloseHover()}),d.querySelector(".about").addEventListener("mousedown",function(e){showAboutPage();var t=new TimelineMax;t.fromTo(".about-falter",.5,{autoAlpha:0},{autoAlpha:1}),t.fromTo(".about-falter .close-about-button",.5,{autoAlpha:0},{autoAlpha:1},"-=.4"),t.fromTo(".about-falter .falter-image",1,{autoAlpha:0,rotationX:-20,y:50},{y:0,autoAlpha:1,rotationX:0,ease:Expo.easeOut},"-=.4"),t.fromTo(".about-falter .copy",1,{autoAlpha:0,y:50},{y:0,autoAlpha:1,ease:Expo.easeOut},"-=.9"),t.staggerFromTo(".about-falter .social-link",.5,{autoAlpha:0},{autoAlpha:1},.2,"-=.9"),t.staggerFromTo(".about-falter .partner",.5,{autoAlpha:0,rotationX:-40,y:20,transformPerspective:800},{y:0,autoAlpha:1,rotationX:0,ease:Expo.easeOut},.05,"-=.9")}),u(!0),d.querySelector(".top-circle").addEventListener("mouseenter",function(e){k||playTutorialCircleHover()}),T.addEventListener("mousedown",function(e){E.toggleAudio()});for(var M=document.querySelectorAll("a.simple-hover"),a=0;a<M.length;a++)!function(e){M[e].addEventListener("mouseover",function(t){M[e].querySelector(".underline");TweenMax.to(M[e],.5,{alpha:.7})})}(a),function(e){M[e].addEventListener("mouseout",function(t){M[e].querySelector(".underline");TweenMax.to(M[e],.5,{alpha:1})})}(a);for(var a=0;a<m.length;a++)!function(e){m[e].addEventListener("mousedown",function(t){s(e)})}(a),function(e){m[e].addEventListener("mouseover",function(e){TweenMax.to(this,.5,{autoAlpha:1,scale:1.1})})}(a),function(e){m[e].addEventListener("mouseout",function(t){e!==E.currentNavIndex&&TweenMax.to(this,.5,{autoAlpha:.2,scale:1})})}(a);for(var a=0;a<f.length;a++)!function(e){f[e].addEventListener("mousedown",function(t){s(e)})}(a),function(e){f[e].addEventListener("mouseover",function(t){e!=E.currentNavIndex||A||(TweenMax.to(this,.5,{autoAlpha:.3}),TweenMax.staggerFromTo(".nav-hover-icon .line",.5,{width:0},{width:20,ease:Expo.easeOut},.05),TweenMax.to(".arrow.up",.5,{y:-5}),TweenMax.to(".arrow.down",.5,{y:5}))})}(a),function(e){f[e].addEventListener("mouseout",function(t){e==E.currentNavIndex&&TweenMax.to(this,.5,{autoAlpha:1}),TweenMax.killTweensOf(".nav-hover-icon .line"),TweenMax.allTo(".nav-hover-icon .line",.2,{width:0,ease:Expo.easeOut}),TweenMax.to(".arrow.up",.5,{y:0}),TweenMax.to(".arrow.down",.5,{y:0})})}(a);for(var a=0,b=w.length;b>a;a++)$(w[a]).on("mousedown",l),function(e){w[e].addEventListener("mouseover",function(t){p(e,!0),playNavHover()})}(a),function(e){w[e].addEventListener("mouseout",function(t){p(e,!1)})}(a),p(a);document.querySelector(".scene-info-button").style.paddingBottom="2px",d.querySelector(".logo").addEventListener("mouseenter",function(e){playNavHover()}),d.querySelector(".scene-info-button").addEventListener("mouseenter",function(e){playNavHover()}),d.querySelector("#audio-control").addEventListener("mouseenter",function(e){playNavHover()}),d.querySelector(".about-falter-button").addEventListener("mouseenter",function(e){playNavHover()}),d.querySelector(".social").addEventListener("mouseenter",function(e){playNavHover()}),d.querySelector(".go-falter").addEventListener("mouseenter",function(e){playNavHover()}),d.querySelector(".reload").addEventListener("mouseenter",function(e){playNavHover()}),d.querySelector(".overrideCloseButton").addEventListener("mouseenter",function(e){playCloseHover()})}(),function(){$(".final-scene-nav .reload").on("mousedown",function(){TweenMax.to(".final-scene-nav",.5,{autoAlpha:0,y:20}),E.currentNavIndex=1,E.updateNav(),jumpToScene(1),q=!1})}(),function(){function e(e){for(var t=$("."+e),o=t.width(),a=o/2,n=2*a,r=new TimelineMax({paused:!1}),u=0,s=0;360>s;s++)if(s%i==0){u++;var l=$('<span class="circle-small-dot">'),c=s*Math.PI/180;t.append(l),TweenMax.set(l,{x:n*Math.cos(c),y:n*Math.sin(c),autoAlpha:0}),r.to(l,.5,{x:a*Math.cos(c),y:a*Math.sin(c),autoAlpha:1,ease:Expo.easeOut},0)}return r}function t(){u.progress>1&&(u.progress=1,o()),u.progress<0&&(u.progress=0),u.yPos<0&&(u.yPos=0),TweenMax.set(".top-circle",{y:u.yPos}),u.progress=u.yPos/$(".connecting-line").height(),n(!1,u.progress),overideUiparallax(u.progress)}function o(){s||(s=!0,TweenMax.to(".falter-intro",.5,{autoAlpha:0,delay:.4,ease:Expo.easeOut}),TweenMax.to(".target-circle",.5,{scale:1.3,autoAlpha:0,delay:.1,ease:Expo.easeOut}),TweenMax.to(u,.5,{yPos:$(".connecting-line").height()+$(".target-circle").height()+.5,ease:Expo.easeOut,onUpdate:t}),TweenMax.staggerTo(C.lines,1,{autoAlpha:0,y:30,ease:Expo.easeOut},-.1),playTutorialComplete(),jumpToScene(E.currentNavIndex+1))}function a(){for(var e=$(".connecting-line"),t=e.height(),o=5,a=0;t>a;a++)if(a%o==0){var r=$('<span class="small-dot">');e.append(r),TweenMax.set(r,{y:a,autoAlpha:0})}return n(!0)}function n(e,t){var t=t||0,o=$(".connecting-line .small-dot"),a=new TimelineMax;return o.each(function(n){var r=n/o.length<t?0:n/o.length;a.to(this,1,{autoAlpha:r,ease:Expo.easeOut},e?.01*n:0)}),a}function r(){var e=new TimelineMax({repeat:-1,repeatDelay:1}),a=$(".top-circle");e.staggerTo(".top-circle .pulsate",2,{width:150,height:150,borderRadius:200,ease:Expo.easeOut,autoAlpha:0},.2),e.to(".top-circle .main",.5,{width:50,height:50,borderRadius:50,ease:Expo.easeOut}),a.on("touchstart mouseover",function(e){k||TweenMax.to(this,.5,{scale:.9}),e.preventDefault()}),a.on("touchend mouseout",function(t){k||(TweenMax.to(this,.5,{scale:1}),e.play()),t.preventDefault()}),a.on("touchstart mousedown",function(t){e.pause(),TweenMax.to(e,.2,{progress:0,ease:Expo.easeOut}),TweenMax.to(this,.5,{scale:.5,ease:Expo.easeOut}),k=!0,t.preventDefault()}),$("#falter-nav").on("mouseup touchend",function(n){k&&(k=!1,u.progress<.8?(e.play(),TweenMax.to(a,.5,{scale:.9,ease:Expo.easeOut}),TweenMax.to(u,.5,{yPos:0,ease:Expo.easeOut,onUpdate:t})):o())})}var i=10,u={yPos:0,progress:0},s=!1;if(TweenMax.set(".audio-icon-description",{autoAlpha:1}),O.add(e("audio-icon-container")),O.fromTo(".audio-icon",1,{y:10,autoAlpha:0,rotationX:90},{rotationX:0,y:0,autoAlpha:1,ease:Expo.easeOut},0),O.staggerFromTo(I.lines,1,{y:10,autoAlpha:0},{y:0,autoAlpha:1,ease:Expo.easeOut},.1,.1),updateData.usesMouse)$(document).on("mousemove touchmove",function(e){if(!s){var o="touchmove"===e.type?e.originalEvent.touches[0].pageY:e.clientY,a=o-$(".falter-intro").position().top-$(".top-circle").height()/2;k&&(TweenMax.to(u,.2,{yPos:a,onUpdate:t}),t()),e.preventDefault()}}),r(),TweenMax.set(".falter-intro-description",{autoAlpha:1}),S.fromTo(".top-circle",.5,{autoAlpha:0,scale:.8},{autoAlpha:1,scale:1}),S.add(a(),"-=.4"),S.add(e("target-circle"),"-=1"),S.staggerFromTo(C.lines,1,{autoAlpha:0,y:20},{autoAlpha:1,y:0,ease:Expo.easeOut},.1,"-=1");else{S=new TimelineMax({repeat:-1,paused:!0});for(var l=0;l<introTutorial.frames.length;l++){var c=introTutorial.frames[l].frame;S.set(".falter-intro-mobile img",{x:-c.x,y:-c.y},.04*l)}}}()};</script></head><body><div id=falter-nav><div class=falter-intro-mobile-container><div class=falter-intro-mobile><img src="assets/images/intro_tutorial.png"></div><div class=falter-intro-mobile-description></div></div><div class=falter-intro><div class=top-circle><div class="circle main"></div><div class="pulsate circle"></div></div><div class=connecting-line></div><div class=target-circle></div><div class=falter-intro-description></div></div><div class="ui top left logo"><a class=simple-hover target=_blank onclick=document.location.reload(); style="cursor: pointer;"><img src="assets/images/logo_falter.png" width=58 height=18></a></div><div class="ui bottom left social"><a style="cursor: pointer;" target=_blank class="social-link twitter-link simple-hover"><img src="assets/images/twitter.png" width=15 height=12></a> <a style="cursor: pointer;" target=_blank class="social-link fb-link simple-hover"><img src="assets/images/fb.png" width=7 height=14></a></div><div class="ui bottom right about"><a style="cursor: pointer;" class="simple-hover about-falter-button"></a></div><a class="ui top horz-center simple-hover scene-info-button" style="cursor: pointer;"><div class=scene-info-group><div class=scene-info-more alt=""></div><div class=scene-info-underline><p class=scene-info></p></div></div></a><div class="ui top right"><a class=lang style="cursor: pointer;">DE</a> <a class=lang style="cursor: pointer;">EN</a> <a id=audio-control class=site-audio><div class=eq-bar><span class=filler></span></div><div class=eq-bar><span class=filler></span></div><div class=eq-bar><span class=filler></span></div><div class=eq-bar><span class=filler></span></div></a></div><div class="ui vert-center right"><div class=section-dots><span class=dot></span> <span class=dot></span> <span class=dot></span> <span class=dot></span> <span class=dot></span> <span class=dot></span> <span class=dot></span> <span class=dot></span> <span class=dot></span> <span class=dot></span></div></div><div class=section-overlay></div><div class="open-scene simple-button">Szene öffnen</div><div class=nav-container><div class="nav-outer left"><div class="gradient opaque-left"></div><div class=section-titles><span class=section-title>Text Scene 0</span> <span class=section-title>Text Scene 1</span> <span class=section-title>Text Scene 2</span> <span class=section-title>Text Scene 3</span> <span class=section-title>Text Scene 4</span> <span class=section-title>Text Scene 5</span> <span class=section-title>Text Scene 6</span> <span class=section-title>Text Scene 7</span> <span class=section-title>Text Scene 8</span> <span class=section-title>Text Scene 9</span></div><div class="gradient short"></div></div><div class=nav-inner><div class="arrow up simple-hover"></div><div class="arrow down simple-hover"></div><div class=nav-hover-icon><span class=line></span> <span class="line short"></span> <span class=line></span></div><div class=section-numbers><span class=section-number>0</span> <span class=section-number>1</span> <span class=section-number>2</span> <span class=section-number>3</span> <span class=section-number>4</span> <span class=section-number>5</span> <span class=section-number>6</span> <span class=section-number>7</span> <span class=section-number>8</span> <span class=section-number>9</span></div></div><div class="nav-outer right"><div class="gradient opaque-right"></div></div></div><div class="close-button close-button-animated"><span class="close-line left start"></span> <span class="close-line right start"></span> <span class="close-line left end"></span> <span class="close-line right end"></span> <span class=hitarea></span></div><div class="close-button close-button-animated overrideCloseButton" style="display: none;"><span class="close-line left start"></span> <span class="close-line right start"></span> <span class="close-line left end"></span> <span class="close-line right end"></span> <span class=hitarea></span></div><div class=about-falter><a style="cursor: pointer;" class="close-about-button close-button-animated"><span class="close-line left start"></span> <span class="close-line right start"></span> <span class="close-line left end"></span> <span class="close-line right end"></span> <span class=hitarea></span></a><div class=falter-image><img src="assets/images/falter-zeitung.jpg" width=520 alt=248></div><div class="copy about-description"></div><div class=social-icons><a target=_blank href="https://twitter.com/intent/tweet?text=Hello%20world" class="social-link about-twitter-link simple-hover"><img src="assets/images/twitter-black.png" width=15 height=12></a> <a href="https://www.facebook.com/sharer/sharer.php?u=www.falter.at" target=_blank class="social-link about-fb-link simple-hover"><img src="assets/images/fb-black.png" width=7 height=13></a></div><div class=partner-links><div class=partner><span class="title partner-agency">Agency:</span><a class=simple-hover target=_blank href="http://www.jvm.at/projekte/">Jung v. Matt/Donau <span class=underline></span></a></div><div class=partner><span class=title>Digital:</span><a class=simple-hover target=_blank href="http://wild.as/">WILD<span class=underline></span></a></div><div class=partner><span class=title>Illustration:</span><a class=simple-hover target=_blank href="http://www.salonalpin.net/">Salon Alpin<span class=underline></span></a></div><div class=partner><span class=title>Sound Design:</span><a class=simple-hover target=_blank href="http://www.fifth-music.com/">Fifth Music<span class=underline></span></a></div></div></div><div class=falter-audio><div class=audio-icon-container><svg class=audio-icon x=0 y=0 width=62.2 height=54.5 viewbox="0, 0, 62.2, 54.5"><path d="M7.1,30.6 C7.5,14.5 17.1,1.5 31.3,1.5 C45.5,1.5 55.1,14.5 55.5,30.6" fill-opacity=0 stroke=#FFFFFF stroke-width=3 stroke-miterlimit=10></path><path d="M49.773,29.3 C47.982,29.3 46.461,30.553 46.192,32.343 L43.507,47.561 C43.149,49.53 44.491,51.499 46.461,51.857 L53.801,53.11 C53.98,53.11 54.248,53.2 54.427,53.2 C56.218,53.2 57.739,51.947 58.008,50.157 L60.693,34.939 C61.051,32.97 59.709,31.001 57.739,30.643 L50.399,29.39 C50.22,29.3 50.041,29.3 49.773,29.3 L49.773,29.3 z" fill-opacity=0 stroke=#FFFFFF stroke-width=3></path><path d="M3.854,31.095 C2.199,31.778 1.272,33.518 1.707,35.275 L5.037,50.364 C5.458,52.321 7.451,53.628 9.408,53.207 L16.67,51.562 C16.835,51.494 17.118,51.474 17.283,51.405 C18.938,50.722 19.866,48.982 19.43,47.225 L16.1,32.136 C15.679,30.179 13.686,28.872 11.73,29.293 L4.467,30.938 C4.268,30.924 4.102,30.992 3.854,31.095 L3.854,31.095 z" fill-opacity=0 stroke=#FFFFFF stroke-width=3></path></svg></div><div class=audio-icon-description></div></div><div class=final-scene-nav><a href="https://shop.falter.at/abos/falter-abos/falter-test-abo/falter-4-wochen-gratis-testen.html?ref=731" target=_blank class="go-falter simple-button"><span class="icon link-arrow"><svg x=0px y=0px viewbox="0 0 26.2 37.8" xml:space=preserve><polyline fill=none stroke=#000 stroke-width=5 stroke-miterlimit=10 points="1.7,35.9 22.2,18.8 1.6,1.9"></polyline></svg></span> <span class="copy visit-falter"></span></a> <a style="cursor: pointer;" class="reload simple-button"><span class=icon><svg x=0 y=0 width=131 height=118 viewbox="0, 0, 131, 118"><g><path d="M96.122,86.835 C82.72,101.579 60.713,104.678 43.76,94.209 C26.807,83.739 19.722,62.675 26.903,44.088 C34.084,25.502 53.491,14.672 73.08,18.321 C92.668,21.969 106.875,39.06 106.882,58.985" fill-opacity=0 stroke=#000 stroke-width=8 stroke-miterlimit=10></path><path d="M89.402,52.495 L108.752,73.065 L123.122,48.755 L89.402,52.495 z" fill=#000></path></g></svg></span> <span class="copy replay-experience"></span></a></div></div><script src="js/lib/three.min.js"></script><script>THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){function e(){if(l===x){var e=new THREE.RenderableObject;return R.push(e),x++,l++,e}return R[l++]}function r(){if(p===T){var e=new THREE.RenderableVertex;return y.push(e),T++,p++,e}return y[p++]}function t(){if(u===g){var e=new THREE.RenderableFace;return H.push(e),g++,u++,e}return H[u++]}function n(){if(h===b){var e=new THREE.RenderableLine;return w.push(e),b++,h++,e}return w[h++]}function i(){if(v===S){var e=new THREE.RenderableSprite;return M.push(e),S++,v++,e}return M[v++]}function o(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.z!==r.z?r.z-e.z:e.id!==r.id?e.id-r.id:0}function a(e,r){var t=0,n=1,i=e.z+e.w,o=r.z+r.w,a=-e.z+e.w,s=-r.z+r.w;return i>=0&&o>=0&&a>=0&&s>=0?!0:0>i&&0>o||0>a&&0>s?!1:(0>i?t=Math.max(t,i/(i-o)):0>o&&(n=Math.min(n,i/(i-o))),0>a?t=Math.max(t,a/(a-s)):0>s&&(n=Math.min(n,a/(a-s))),t>n?!1:(e.lerp(r,t),r.lerp(e,1-n),!0))}var s,l,c,p,E,u,d,h,f,v,m,R=[],x=0,y=[],T=0,H=[],g=0,w=[],b=0,M=[],S=0,z={objects:[],lights:[],elements:[]},V=new THREE.Vector3,j=new THREE.Vector4,O=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),L=new THREE.Box3,C=new Array(3),k=(new Array(4),new THREE.Matrix4),N=new THREE.Matrix4,W=new THREE.Matrix4,B=new THREE.Matrix3,F=new THREE.Frustum,P=new THREE.Vector4,A=new THREE.Vector4;this.projectVector=function(e,r){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(r)},this.unprojectVector=function(e,r){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(r)},this.pickingRay=function(e,r){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var I=function(){var e=[],i=[],o=null,a=null,s=new THREE.Matrix3,l=function(r){o=r,a=o.material,s.getNormalMatrix(o.matrixWorld),e.length=0,i.length=0},p=function(e){var r=e.position,t=e.positionWorld,n=e.positionScreen;t.copy(r).applyMatrix4(m),n.copy(t).applyMatrix4(N);var i=1/n.w;n.x*=i,n.y*=i,n.z*=i,e.visible=n.x>=-1&&n.x<=1&&n.y>=-1&&n.y<=1&&n.z>=-1&&n.z<=1},u=function(e,t,n){c=r(),c.position.set(e,t,n),p(c)},h=function(r,t,n){e.push(r,t,n)},f=function(e,r){i.push(e,r)},v=function(e,r,t){return e.visible===!0||r.visible===!0||t.visible===!0?!0:(C[0]=e.positionScreen,C[1]=r.positionScreen,C[2]=t.positionScreen,O.isIntersectionBox(L.setFromPoints(C)))},R=function(e,r,t){return(t.positionScreen.x-e.positionScreen.x)*(r.positionScreen.y-e.positionScreen.y)-(t.positionScreen.y-e.positionScreen.y)*(r.positionScreen.x-e.positionScreen.x)<0},x=function(e,r){var t=y[e],i=y[r];d=n(),d.id=o.id,d.v1.copy(t),d.v2.copy(i),d.z=(t.positionScreen.z+i.positionScreen.z)/2,d.renderOrder=o.renderOrder,d.material=o.material,z.elements.push(d)},T=function(r,n,l){var c=y[r],p=y[n],u=y[l];if(v(c,p,u)!==!1&&(a.side===THREE.DoubleSide||R(c,p,u)===!0)){E=t(),E.id=o.id,E.v1.copy(c),E.v2.copy(p),E.v3.copy(u),E.z=(c.positionScreen.z+p.positionScreen.z+u.positionScreen.z)/3,E.renderOrder=o.renderOrder,E.normalModel.fromArray(e,3*r),E.normalModel.applyMatrix3(s).normalize();for(var d=0;3>d;d++){var h=E.vertexNormalsModel[d];h.fromArray(e,3*arguments[d]),h.applyMatrix3(s).normalize();var f=E.uvs[d];f.fromArray(i,2*arguments[d])}E.vertexNormalsLength=3,E.material=o.material,z.elements.push(E)}};return{setObject:l,projectVertex:p,checkTriangleVisibility:v,checkBackfaceCulling:R,pushVertex:u,pushNormal:h,pushUv:f,pushLine:x,pushTriangle:T}},D=new I;this.projectScene=function(c,R,x,T){u=0,h=0,v=0,z.elements.length=0,c.autoUpdate===!0&&c.updateMatrixWorld(),null===R.parent&&R.updateMatrixWorld(),k.copy(R.matrixWorldInverse.getInverse(R.matrixWorld)),N.multiplyMatrices(R.projectionMatrix,k),F.setFromMatrix(N),l=0,z.objects.length=0,z.lights.length=0,c.traverseVisible(function(r){if(r instanceof THREE.Light)z.lights.push(r);else if(r instanceof THREE.Mesh||r instanceof THREE.Line||r instanceof THREE.Sprite){var t=r.material;if(t.visible===!1)return;(r.frustumCulled===!1||F.intersectsObject(r)===!0)&&(s=e(),s.id=r.id,s.object=r,V.setFromMatrixPosition(r.matrixWorld),V.applyProjection(N),s.z=V.z,s.renderOrder=r.renderOrder,z.objects.push(s))}}),x===!0&&z.objects.sort(o);for(var H=0,g=z.objects.length;g>H;H++){var w=z.objects[H].object,b=w.geometry;if(D.setObject(w),m=w.matrixWorld,p=0,w instanceof THREE.Mesh){if(b instanceof THREE.BufferGeometry){var M=b.attributes,S=b.groups;if(void 0===M.position)continue;for(var O=M.position.array,L=0,C=O.length;C>L;L+=3)D.pushVertex(O[L],O[L+1],O[L+2]);if(void 0!==M.normal)for(var I=M.normal.array,L=0,C=I.length;C>L;L+=3)D.pushNormal(I[L],I[L+1],I[L+2]);if(void 0!==M.uv)for(var G=M.uv.array,L=0,C=G.length;C>L;L+=2)D.pushUv(G[L],G[L+1]);if(null!==b.index){var U=b.index.array;if(S.length>0)for(var H=0;H<S.length;H++)for(var q=S[H],L=q.start,C=q.start+q.count;C>L;L+=3)D.pushTriangle(U[L],U[L+1],U[L+2]);else for(var L=0,C=U.length;C>L;L+=3)D.pushTriangle(U[L],U[L+1],U[L+2])}else for(var L=0,C=O.length/3;C>L;L+=3)D.pushTriangle(L,L+1,L+2)}else if(b instanceof THREE.Geometry){var J=b.vertices,K=b.faces,Q=b.faceVertexUvs[0];B.getNormalMatrix(m);for(var X=w.material,Y=X instanceof THREE.MeshFaceMaterial,Z=Y===!0?w.material:null,$=0,_=J.length;_>$;$++){var ee=J[$];if(V.copy(ee),X.morphTargets===!0)for(var re=b.morphTargets,te=w.morphTargetInfluences,ne=0,ie=re.length;ie>ne;ne++){var oe=te[ne];if(0!==oe){var ae=re[ne],se=ae.vertices[$];V.x+=(se.x-ee.x)*oe,V.y+=(se.y-ee.y)*oe,V.z+=(se.z-ee.z)*oe}}D.pushVertex(V.x,V.y,V.z)}for(var le=0,ce=K.length;ce>le;le++){var pe=K[le];if(X=Y===!0?Z.materials[pe.materialIndex]:w.material,void 0!==X){var Ee=X.side,ue=y[pe.a],de=y[pe.b],he=y[pe.c];if(D.checkTriangleVisibility(ue,de,he)!==!1){var fe=D.checkBackfaceCulling(ue,de,he);if(Ee!==THREE.DoubleSide){if(Ee===THREE.FrontSide&&fe===!1)continue;if(Ee===THREE.BackSide&&fe===!0)continue}E=t(),E.id=w.id,E.v1.copy(ue),E.v2.copy(de),E.v3.copy(he),E.normalModel.copy(pe.normal),fe!==!1||Ee!==THREE.BackSide&&Ee!==THREE.DoubleSide||E.normalModel.negate(),E.normalModel.applyMatrix3(B).normalize();for(var ve=pe.vertexNormals,me=0,Re=Math.min(ve.length,3);Re>me;me++){var xe=E.vertexNormalsModel[me];xe.copy(ve[me]),fe!==!1||Ee!==THREE.BackSide&&Ee!==THREE.DoubleSide||xe.negate(),xe.applyMatrix3(B).normalize()}E.vertexNormalsLength=ve.length;var ye=Q[le];if(void 0!==ye)for(var Te=0;3>Te;Te++)E.uvs[Te].copy(ye[Te]);E.color=pe.color,E.material=X,E.z=(ue.positionScreen.z+de.positionScreen.z+he.positionScreen.z)/3,E.renderOrder=w.renderOrder,z.elements.push(E)}}}}}else if(w instanceof THREE.Line){if(b instanceof THREE.BufferGeometry){var M=b.attributes;if(void 0!==M.position){for(var O=M.position.array,L=0,C=O.length;C>L;L+=3)D.pushVertex(O[L],O[L+1],O[L+2]);if(null!==b.index)for(var U=b.index.array,L=0,C=U.length;C>L;L+=2)D.pushLine(U[L],U[L+1]);else for(var He=w instanceof THREE.LineSegments?2:1,L=0,C=O.length/3-1;C>L;L+=He)D.pushLine(L,L+1)}}else if(b instanceof THREE.Geometry){W.multiplyMatrices(N,m);var J=w.geometry.vertices;if(0===J.length)continue;ue=r(),ue.positionScreen.copy(J[0]).applyMatrix4(W);for(var He=w instanceof THREE.LineSegments?2:1,$=1,_=J.length;_>$;$++)ue=r(),ue.positionScreen.copy(J[$]).applyMatrix4(W),($+1)%He>0||(de=y[p-2],P.copy(ue.positionScreen),A.copy(de.positionScreen),a(P,A)===!0&&(P.multiplyScalar(1/P.w),A.multiplyScalar(1/A.w),d=n(),d.id=w.id,d.v1.positionScreen.copy(P),d.v2.positionScreen.copy(A),d.z=Math.max(P.z,A.z),d.renderOrder=w.renderOrder,d.material=w.material,w.material.vertexColors===THREE.VertexColors&&(d.vertexColors[0].copy(w.geometry.colors[$]),d.vertexColors[1].copy(w.geometry.colors[$-1])),z.elements.push(d)))}}else if(w instanceof THREE.Sprite){j.set(m.elements[12],m.elements[13],m.elements[14],1),j.applyMatrix4(N);var ge=1/j.w;j.z*=ge,j.z>=-1&&j.z<=1&&(f=i(),f.id=w.id,f.x=j.x*ge,f.y=j.y*ge,f.z=j.z,f.renderOrder=w.renderOrder,f.object=w,f.rotation=w.rotation,f.scale.x=w.scale.x*Math.abs(f.x-(j.x+R.projectionMatrix.elements[0])/(j.w+R.projectionMatrix.elements[12])),f.scale.y=w.scale.y*Math.abs(f.y-(j.y+R.projectionMatrix.elements[5])/(j.w+R.projectionMatrix.elements[13])),f.material=w.material,z.elements.push(f))}}return T===!0&&z.elements.sort(o),z}};</script><script>THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.texturePath=""},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,r,a){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,n=new THREE.XHRLoader(i.manager);n.setCrossOrigin(this.crossOrigin),n.load(e,function(e){i.parse(JSON.parse(e),t)},r,a)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),a=this.parseImages(e.images,function(){void 0!==t&&t(o)}),i=this.parseTextures(e.textures,a),n=this.parseMaterials(e.materials,i),o=this.parseObject(e.object,r,n);return e.animations&&(o.animations=this.parseAnimations(e.animations)),(void 0===e.images||0===e.images.length)&&void 0!==t&&t(o),o},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new THREE.JSONLoader,a=new THREE.BufferGeometryLoader,i=0,n=e.length;n>i;i++){var o,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new THREE[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":o=new THREE.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleBufferGeometry":o=new THREE.CircleBufferGeometry(s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CircleGeometry":o=new THREE.CircleGeometry(s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":o=new THREE.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":o=new THREE.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"SphereBufferGeometry":o=new THREE.SphereBufferGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":o=new THREE.DodecahedronGeometry(s.radius,s.detail);break;case"IcosahedronGeometry":o=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"OctahedronGeometry":o=new THREE.OctahedronGeometry(s.radius,s.detail);break;case"TetrahedronGeometry":o=new THREE.TetrahedronGeometry(s.radius,s.detail);break;case"RingGeometry":o=new THREE.RingGeometry(s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":o=new THREE.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":o=new THREE.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":o=a.parse(s);break;case"Geometry":o=r.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var r={};if(void 0!==e){var a=new THREE.MaterialLoader;a.setTextures(t);for(var i=0,n=e.length;n>i;i++){var o=a.parse(e[i]);r[o.uuid]=o}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var a=THREE.AnimationClip.parse(e[r]);t.push(a)}return t},parseImages:function(e,t){function r(e){return a.manager.itemStart(e),o.load(e,function(){a.manager.itemEnd(e)})}var a=this,i={};if(void 0!==e&&e.length>0){var n=new THREE.LoadingManager(t),o=new THREE.ImageLoader(n);o.setCrossOrigin(this.crossOrigin);for(var s=0,d=e.length;d>s;s++){var c=e[s],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:a.texturePath+c.url;i[c.uuid]=r(h)}}return i},parseTextures:function(e,t){function r(e){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),THREE[e])}var a={};if(void 0!==e)for(var i=0,n=e.length;n>i;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new THREE.Texture(t[o.image]);s.needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=r(o.mapping)),void 0!==o.offset&&(s.offset=new THREE.Vector2(o.offset[0],o.offset[1])),void 0!==o.repeat&&(s.repeat=new THREE.Vector2(o.repeat[0],o.repeat[1])),void 0!==o.minFilter&&(s.minFilter=r(o.minFilter)),void 0!==o.magFilter&&(s.magFilter=r(o.magFilter)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),Array.isArray(o.wrap)&&(s.wrapS=r(o.wrap[0]),s.wrapT=r(o.wrap[1])),a[o.uuid]=s}return a},parseObject:function(){var e=new THREE.Matrix4;return function(t,r,a){function i(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function n(e){return void 0===e?void 0:(void 0===a[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),a[e])}var o;switch(t.type){case"Scene":o=new THREE.Scene;break;case"PerspectiveCamera":o=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":o=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":o=new THREE.AmbientLight(t.color);break;case"DirectionalLight":o=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":o=new THREE.PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":o=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent,t.decay);break;case"HemisphereLight":o=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":o=new THREE.Mesh(i(t.geometry),n(t.material));break;case"LOD":o=new THREE.LOD;break;case"Line":o=new THREE.Line(i(t.geometry),n(t.material),t.mode);break;case"PointCloud":case"Points":o=new THREE.Points(i(t.geometry),n(t.material));break;case"Sprite":o=new THREE.Sprite(n(t.material));break;case"Group":o=new THREE.Group;break;default:o=new THREE.Object3D}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var s in t.children)o.add(this.parseObject(t.children[s],r,a));if("LOD"===t.type)for(var d=t.levels,c=0;c<d.length;c++){var h=d[c],s=o.getObjectByProperty("uuid",h.object);void 0!==s&&o.addLevel(s,h.distance)}return o}}()};</script><script>var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,o,r;e=e||{},t=void 0!==e.parent?e.parent:document.body,o=void 0!==e.id?e.id:"oldie",r=Detector.getWebGLErrorMessage(),r.id=o,t.appendChild(r)}};"object"==typeof module&&(module.exports=Detector);</script><script>function loadJSON(e,n){var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET",e,!0),t.onreadystatechange=function(){4===t.readyState&&200===t.status&&n(t.responseText)},t.send(null)}</script><script>var SimplexNoise=function(t){void 0==t&&(t=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(var r=0;256>r;r++)this.p[r]=Math.floor(256*t.random());this.perm=[];for(var r=0;512>r;r++)this.perm[r]=this.p[255&r];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};SimplexNoise.prototype.dot=function(t,r,i){return t[0]*r+t[1]*i},SimplexNoise.prototype.noise=function(t,r){var i,h,s,o,e,p=.5*(Math.sqrt(3)-1),a=(t+r)*p,m=Math.floor(t+a),d=Math.floor(r+a),n=(3-Math.sqrt(3))/6,v=(m+d)*n,f=m-v,l=d-v,M=t-f,g=r-l;M>g?(o=1,e=0):(o=0,e=1);var u=M-o+n,x=g-e+n,c=M-1+2*n,N=g-1+2*n,S=255&m,y=255&d,q=this.perm[S+this.perm[y]]%12,b=this.perm[S+o+this.perm[y+e]]%12,j=this.perm[S+1+this.perm[y+1]]%12,k=.5-M*M-g*g;0>k?i=0:(k*=k,i=k*k*this.dot(this.grad3[q],M,g));var w=.5-u*u-x*x;0>w?h=0:(w*=w,h=w*w*this.dot(this.grad3[b],u,x));var z=.5-c*c-N*N;return 0>z?s=0:(z*=z,s=z*z*this.dot(this.grad3[j],c,N)),70*(i+h+s)},SimplexNoise.prototype.noise3d=function(t,r,i){var h,s,o,e,p,a,m,d,n,v,f=1/3,l=(t+r+i)*f,M=Math.floor(t+l),g=Math.floor(r+l),u=Math.floor(i+l),x=1/6,c=(M+g+u)*x,N=M-c,S=g-c,y=u-c,q=t-N,b=r-S,j=i-y;q>=b?b>=j?(p=1,a=0,m=0,d=1,n=1,v=0):q>=j?(p=1,a=0,m=0,d=1,n=0,v=1):(p=0,a=0,m=1,d=1,n=0,v=1):j>b?(p=0,a=0,m=1,d=0,n=1,v=1):j>q?(p=0,a=1,m=0,d=0,n=1,v=1):(p=0,a=1,m=0,d=1,n=1,v=0);var k=q-p+x,w=b-a+x,z=j-m+x,A=q-d+2*x,B=b-n+2*x,C=j-v+2*x,D=q-1+3*x,E=b-1+3*x,F=j-1+3*x,G=255&M,H=255&g,I=255&u,J=this.perm[G+this.perm[H+this.perm[I]]]%12,K=this.perm[G+p+this.perm[H+a+this.perm[I+m]]]%12,L=this.perm[G+d+this.perm[H+n+this.perm[I+v]]]%12,O=this.perm[G+1+this.perm[H+1+this.perm[I+1]]]%12,P=.6-q*q-b*b-j*j;0>P?h=0:(P*=P,h=P*P*this.dot(this.grad3[J],q,b,j));var Q=.6-k*k-w*w-z*z;0>Q?s=0:(Q*=Q,s=Q*Q*this.dot(this.grad3[K],k,w,z));var R=.6-A*A-B*B-C*C;0>R?o=0:(R*=R,o=R*R*this.dot(this.grad3[L],A,B,C));var T=.6-D*D-E*E-F*F;return 0>T?e=0:(T*=T,e=T*T*this.dot(this.grad3[O],D,E,F)),32*(h+s+o+e)};</script><script>function computeCurl(n,o,e,i,d){var s,u,c,r,t=10;s=d.noise3d(n,o+t,e),u=d.noise3d(n,o-t,e),c=(s-u)/(2*t),s=d.noise3d(n,o,e+t),u=d.noise3d(n,o,e-t),r=(s-u)/(2*t),i[0]=c-r,s=d.noise3d(n,o,e+t),u=d.noise3d(n,o,e-t),c=(s-u)/(2*t),s=d.noise3d(n+t,o,e),u=d.noise3d(n+t,o,e),r=(s-u)/(2*t),i[1]=c-r,s=d.noise3d(n+t,o,e),u=d.noise3d(n-t,o,e),c=(s-u)/(2*t),s=d.noise3d(n,o+t,e),u=d.noise3d(n,o-t,e),r=(s-u)/(2*t),i[2]=c-r}</script><script>(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function a(t){B=t}function i(t){X=t}function r(){return function(){process.nextTick(u)}}function o(){return function(){Y(u)}}function s(){var t=0,e=new V(u),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=u,function(){t.port2.postMessage(0)}}function l(){return function(){setTimeout(u,1)}}function u(){for(var t=0;P>t;t+=2){var e=K[t],n=K[t+1];e(n),K[t]=void 0,K[t+1]=void 0}P=0}function h(){try{var t=require,e=t("vertx");return Y=e.runOnLoop||e.runOnContext,o()}catch(n){return l()}}function f(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function p(t){try{return t.then}catch(e){return et.error=e,et}}function d(t,e,n,a){try{t.call(e,n,a)}catch(i){return i}}function y(t,e,n){X(function(t){var a=!1,i=d(n,e,function(n){a||(a=!0,e!==n?b(t,n):x(t,n))},function(e){a||(a=!0,w(t,e))},"Settle: "+(t._label||" unknown promise"));!a&&i&&(a=!0,w(t,i))},t)}function A(t,e){e._state===$?x(t,e._result):e._state===tt?w(t,e._result):M(e,void 0,function(e){b(t,e)},function(e){w(t,e)})}function g(t,n){if(n.constructor===t.constructor)A(t,n);else{var a=p(n);a===et?w(t,et.error):void 0===a?x(t,n):e(a)?y(t,n,a):x(t,n)}}function b(e,n){e===n?w(e,m()):t(n)?g(e,n):x(e,n)}function _(t){t._onerror&&t._onerror(t._result),E(t)}function x(t,e){t._state===J&&(t._result=e,t._state=$,0!==t._subscribers.length&&X(E,t))}function w(t,e){t._state===J&&(t._state=tt,t._result=e,X(_,t))}function M(t,e,n,a){var i=t._subscribers,r=i.length;t._onerror=null,i[r]=e,i[r+$]=n,i[r+tt]=a,0===r&&t._state&&X(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var a,i,r=t._result,o=0;o<e.length;o+=3)a=e[o],i=e[o+n],a?T(n,a,i,r):i(r);t._subscribers.length=0}}function R(){this.error=null}function I(t,e){try{return t(e)}catch(n){return nt.error=n,nt}}function T(t,n,a,i){var r,o,s,c,l=e(a);if(l){if(r=I(a,i),r===nt?(c=!0,o=r.error,r=null):s=!0,n===r)return void w(n,v())}else r=i,s=!0;n._state!==J||(l&&s?b(n,r):c?w(n,o):t===$?x(n,r):t===tt&&w(n,r))}function L(t,e){try{e(function(e){b(t,e)},function(e){w(t,e)})}catch(n){w(t,n)}}function O(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(f),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?x(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&x(n.promise,n._result))):w(n.promise,n._validationError())}function z(t){return new at(this,t).promise}function G(t){function e(t){b(i,t)}function n(t){w(i,t)}var a=this,i=new a(f);if(!Z(t))return w(i,new TypeError("You must pass an array to race.")),i;for(var r=t.length,o=0;i._state===J&&r>o;o++)M(a.resolve(t[o]),void 0,e,n);return i}function C(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(f);return b(n,t),n}function N(t){var e=this,n=new e(f);return w(n,t),n}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(t){this._id=ct++,this._state=void 0,this._result=void 0,this._subscribers=[],f!==t&&(e(t)||F(),this instanceof j||D(),L(this,t))}function S(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=lt)}var k;k=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Y,B,Q,Z=k,P=0,X=({}.toString,function(t,e){K[P]=t,K[P+1]=e,P+=2,2===P&&(B?B(u):Q())}),U="undefined"!=typeof window?window:void 0,q=U||{},V=q.MutationObserver||q.WebKitMutationObserver,H="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),W="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,K=new Array(1e3);Q=H?r():V?s():W?c():void 0===U&&"function"==typeof require?h():l();var J=void 0,$=1,tt=2,et=new R,nt=new R;O.prototype._validateInput=function(t){return Z(t)},O.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},O.prototype._init=function(){this._result=new Array(this.length)};var at=O;O.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,a=t._input,i=0;n._state===J&&e>i;i++)t._eachEntry(a[i],i)},O.prototype._eachEntry=function(t,e){var a=this,i=a._instanceConstructor;n(t)?t.constructor===i&&t._state!==J?(t._onerror=null,a._settledAt(t._state,e,t._result)):a._willSettleAt(i.resolve(t),e):(a._remaining--,a._result[e]=t)},O.prototype._settledAt=function(t,e,n){var a=this,i=a.promise;i._state===J&&(a._remaining--,t===tt?w(i,n):a._result[e]=n),0===a._remaining&&x(i,a._result)},O.prototype._willSettleAt=function(t,e){var n=this;M(t,void 0,function(t){n._settledAt($,e,t)},function(t){n._settledAt(tt,e,t)})};var it=z,rt=G,ot=C,st=N,ct=0,lt=j;j.all=it,j.race=rt,j.resolve=ot,j.reject=st,j._setScheduler=a,j._setAsap=i,j._asap=X,j.prototype={constructor:j,then:function(t,e){var n=this,a=n._state;if(a===$&&!t||a===tt&&!e)return this;var i=new this.constructor(f),r=n._result;if(a){var o=arguments[a-1];X(function(){T(a,i,o,r)})}else M(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var ut=S,ht={Promise:lt,polyfill:ut};"function"==typeof define&&define.amd?define(function(){return ht}):"undefined"!=typeof module&&module.exports?module.exports=ht:"undefined"!=typeof this&&(this.ES6Promise=ht),ut()}).call(this),!function(t){function e(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1}function n(t){var e=new Promise(function(e,n){var a=function(i){setTimeout(function(){t&&t.data?e():i>=20?n():a(++i)},50)};a(0)});return e}function a(){v=m?(t.screen.orientation.angle||0)*l:(t.orientation||0)*l}function i(t){h.orientation.data=t;for(var e in h.orientation.callbacks)h.orientation.callbacks[e].call(this)}function r(t){h.motion.data=t;for(var e in h.motion.callbacks)h.motion.callbacks[e].call(this)}if(void 0===t.FULLTILT||null===t.FULLTILT){var o=Math.PI,s=o/2,c=2*o,l=o/180,u=180/o,h={orientation:{active:!1,callbacks:[],data:void 0},motion:{active:!1,callbacks:[],data:void 0}},f=!1,m=t.screen&&t.screen.orientation&&void 0!==t.screen.orientation.angle&&null!==t.screen.orientation.angle?!0:!1,v=(m?t.screen.orientation.angle:t.orientation||0)*l,p=s,d=o,y=c/3,A=-s,g={};g.version="0.5.3",g.getDeviceOrientation=function(t){var e=new Promise(function(e,a){var i=new g.DeviceOrientation(t);i.start();var r=new n(h.orientation);r.then(function(){i._alphaAvailable=h.orientation.data.alpha&&null!==h.orientation.data.alpha,i._betaAvailable=h.orientation.data.beta&&null!==h.orientation.data.beta,i._gammaAvailable=h.orientation.data.gamma&&null!==h.orientation.data.gamma,e(i)})["catch"](function(){i.stop(),a("DeviceOrientation is not supported")})});return e},g.getDeviceMotion=function(t){var e=new Promise(function(e,a){var i=new g.DeviceMotion(t);i.start();var r=new n(h.motion);r.then(function(){i._accelerationXAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.x,i._accelerationYAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.y,i._accelerationZAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.z,i._accelerationIncludingGravityXAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.x,i._accelerationIncludingGravityYAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.y,i._accelerationIncludingGravityZAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.z,i._rotationRateAlphaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.alpha,i._rotationRateBetaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.beta,i._rotationRateGammaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.gamma,e(i)})["catch"](function(){i.stop(),a("DeviceMotion is not supported")})});return e},g.Quaternion=function(t,n,a,i){var r;this.set=function(t,e,n,a){this.x=t||0,this.y=e||0,this.z=n||0,this.w=a||1},this.copy=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},this.setFromEuler=function(){var t,e,n,a,i,r,o,s,c,u,h,f;return function(m){return m=m||{},n=(m.alpha||0)*l,t=(m.beta||0)*l,e=(m.gamma||0)*l,r=n/2,a=t/2,i=e/2,o=Math.cos(a),s=Math.cos(i),c=Math.cos(r),u=Math.sin(a),h=Math.sin(i),f=Math.sin(r),this.set(u*s*c-o*h*f,o*h*c+u*s*f,o*s*f+u*h*c,o*s*c-u*h*f),this.normalize(),this}}(),this.setFromRotationMatrix=function(){var t;return function(n){return t=n.elements,this.set(.5*Math.sqrt(1+t[0]-t[4]-t[8])*e(t[7]-t[5]),.5*Math.sqrt(1-t[0]+t[4]-t[8])*e(t[2]-t[6]),.5*Math.sqrt(1-t[0]-t[4]+t[8])*e(t[3]-t[1]),.5*Math.sqrt(1+t[0]+t[4]+t[8])),this}}(),this.multiply=function(t){return r=g.Quaternion.prototype.multiplyQuaternions(this,t),this.copy(r),this},this.rotateX=function(t){return r=g.Quaternion.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(r),this},this.rotateY=function(t){return r=g.Quaternion.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(r),this},this.rotateZ=function(t){return r=g.Quaternion.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(r),this},this.normalize=function(){return g.Quaternion.prototype.normalize(this)},this.set(t,n,a,i)},g.Quaternion.prototype={constructor:g.Quaternion,multiplyQuaternions:function(){var t=new g.Quaternion;return function(e,n){var a=e.x,i=e.y,r=e.z,o=e.w,s=n.x,c=n.y,l=n.z,u=n.w;return t.set(a*u+o*s+i*l-r*c,i*u+o*c+r*s-a*l,r*u+o*l+a*c-i*s,o*u-a*s-i*c-r*l),t}}(),normalize:function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w);return 0===e?(t.x=0,t.y=0,t.z=0,t.w=1):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t.w*=e),t},rotateByAxisAngle:function(){var t,e,n=new g.Quaternion,a=new g.Quaternion;return function(i,r,o){return t=(o||0)/2,e=Math.sin(t),a.set((r[0]||0)*e,(r[1]||0)*e,(r[2]||0)*e,Math.cos(t)),n=g.Quaternion.prototype.multiplyQuaternions(i,a),g.Quaternion.prototype.normalize(n)}}()},g.RotationMatrix=function(t,e,n,a,i,r,o,s,c){var u;this.elements=new Float32Array(9),this.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},this.set=function(t,e,n,a,i,r,o,s,c){this.elements[0]=t||1,this.elements[1]=e||0,this.elements[2]=n||0,this.elements[3]=a||0,this.elements[4]=i||1,this.elements[5]=r||0,this.elements[6]=o||0,this.elements[7]=s||0,this.elements[8]=c||1},this.copy=function(t){this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8]},this.setFromEuler=function(){var t,e,n,a,i,r,o,s,c;return function(u){return u=u||{},n=(u.alpha||0)*l,t=(u.beta||0)*l,e=(u.gamma||0)*l,a=Math.cos(t),i=Math.cos(e),r=Math.cos(n),o=Math.sin(t),s=Math.sin(e),c=Math.sin(n),this.set(r*i-c*o*s,-a*c,i*c*o+r*s,i*c+r*o*s,r*a,c*s-r*i*o,-a*s,o,a*i),this.normalize(),this}}(),this.setFromQuaternion=function(){var t,e,n,a;return function(i){return t=i.w*i.w,e=i.x*i.x,n=i.y*i.y,a=i.z*i.z,this.set(t+e-n-a,2*(i.x*i.y-i.w*i.z),2*(i.x*i.z+i.w*i.y),2*(i.x*i.y+i.w*i.z),t-e+n-a,2*(i.y*i.z-i.w*i.x),2*(i.x*i.z-i.w*i.y),2*(i.y*i.z+i.w*i.x),t-e-n+a),this}}(),this.multiply=function(t){return u=g.RotationMatrix.prototype.multiplyMatrices(this,t),this.copy(u),this},this.rotateX=function(t){return u=g.RotationMatrix.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(u),this},this.rotateY=function(t){return u=g.RotationMatrix.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(u),this},this.rotateZ=function(t){return u=g.RotationMatrix.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(u),this},this.normalize=function(){return g.RotationMatrix.prototype.normalize(this)},this.set(t,e,n,a,i,r,o,s,c)},g.RotationMatrix.prototype={constructor:g.RotationMatrix,multiplyMatrices:function(){var t,e,n=new g.RotationMatrix;return function(a,i){return t=a.elements,e=i.elements,n.set(t[0]*e[0]+t[1]*e[3]+t[2]*e[6],t[0]*e[1]+t[1]*e[4]+t[2]*e[7],t[0]*e[2]+t[1]*e[5]+t[2]*e[8],t[3]*e[0]+t[4]*e[3]+t[5]*e[6],t[3]*e[1]+t[4]*e[4]+t[5]*e[7],t[3]*e[2]+t[4]*e[5]+t[5]*e[8],t[6]*e[0]+t[7]*e[3]+t[8]*e[6],t[6]*e[1]+t[7]*e[4]+t[8]*e[7],t[6]*e[2]+t[7]*e[5]+t[8]*e[8]),n}}(),normalize:function(t){var e=t.elements,n=e[0]*e[4]*e[8]-e[0]*e[5]*e[7]-e[1]*e[3]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6];return e[0]/=n,e[1]/=n,e[2]/=n,e[3]/=n,e[4]/=n,e[5]/=n,e[6]/=n,e[7]/=n,e[8]/=n,t.elements=e,t},rotateByAxisAngle:function(){var t,e,n=new g.RotationMatrix,a=new g.RotationMatrix,i=!1;return function(r,o,s){return a.identity(),i=!1,t=Math.sin(s),e=Math.cos(s),1===o[0]&&0===o[1]&&0===o[2]?(i=!0,a.elements[4]=e,a.elements[5]=-t,a.elements[7]=t,a.elements[8]=e):1===o[1]&&0===o[0]&&0===o[2]?(i=!0,a.elements[0]=e,a.elements[2]=t,a.elements[6]=-t,a.elements[8]=e):1===o[2]&&0===o[0]&&0===o[1]&&(i=!0,a.elements[0]=e,a.elements[1]=-t,a.elements[3]=t,a.elements[4]=e),i?(n=g.RotationMatrix.prototype.multiplyMatrices(r,a),n=g.RotationMatrix.prototype.normalize(n)):n=r,n}}()},g.Euler=function(t,e,n){this.set=function(t,e,n){this.alpha=t||0,this.beta=e||0,this.gamma=n||0},this.copy=function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma},this.setFromRotationMatrix=function(){var t,e,n,a;return function(i){t=i.elements,t[8]>0?(e=Math.atan2(-t[1],t[4]),n=Math.asin(t[7]),a=Math.atan2(-t[6],t[8])):t[8]<0?(e=Math.atan2(t[1],-t[4]),n=-Math.asin(t[7]),n+=n>=0?-o:o,a=Math.atan2(t[6],-t[8])):t[6]>0?(e=Math.atan2(-t[1],t[4]),n=Math.asin(t[7]),a=-s):t[6]<0?(e=Math.atan2(t[1],-t[4]),n=-Math.asin(t[7]),n+=n>=0?-o:o,a=-s):(e=Math.atan2(t[3],t[0]),n=t[7]>0?s:-s,a=0),0>e&&(e+=c),e*=u,n*=u,a*=u,this.set(e,n,a)}}(),this.setFromQuaternion=function(){var t,e,n;return function(a){var i=a.w*a.w,r=a.x*a.x,l=a.y*a.y,h=a.z*a.z,f=i+r+l+h,m=a.w*a.x+a.y*a.z,v=1e-6;if(m>(.5-v)*f)t=2*Math.atan2(a.y,a.w),e=s,n=0;else if((-.5+v)*f>m)t=-2*Math.atan2(a.y,a.w),e=-s,n=0;else{var p=i-r+l-h,d=2*(a.w*a.z-a.x*a.y),y=i-r-l+h,A=2*(a.w*a.y-a.x*a.z);y>0?(t=Math.atan2(d,p),e=Math.asin(2*m/f),n=Math.atan2(A,y)):(t=Math.atan2(-d,-p),e=-Math.asin(2*m/f),e+=0>e?o:-o,n=Math.atan2(-A,-y))}0>t&&(t+=c),t*=u,e*=u,n*=u,this.set(t,e,n)}}(),this.rotateX=function(t){return g.Euler.prototype.rotateByAxisAngle(this,[1,0,0],t),this},this.rotateY=function(t){return g.Euler.prototype.rotateByAxisAngle(this,[0,1,0],t),this},this.rotateZ=function(t){return g.Euler.prototype.rotateByAxisAngle(this,[0,0,1],t),this},this.set(t,e,n)},g.Euler.prototype={constructor:g.Euler,rotateByAxisAngle:function(){var t=new g.RotationMatrix;return function(e,n,a){return t.setFromEuler(e),t=g.RotationMatrix.prototype.rotateByAxisAngle(t,n,a),e.setFromRotationMatrix(t),e}}()},g.DeviceOrientation=function(e){this.options=e||{};var n=0,a=200,i=0,r=10;if(this.alphaOffsetScreen=0,this.alphaOffsetDevice=void 0,"game"===this.options.type){var o=function(e){return null!==e.alpha&&(this.alphaOffsetDevice=new g.Euler(e.alpha,0,0),this.alphaOffsetDevice.rotateZ(-v),++i>=r)?void t.removeEventListener("deviceorientation",o,!1):void(++n>=a&&t.removeEventListener("deviceorientation",o,!1))}.bind(this);t.addEventListener("deviceorientation",o,!1)}else if("world"===this.options.type){var s=function(e){return e.absolute!==!0&&void 0!==e.webkitCompassAccuracy&&null!==e.webkitCompassAccuracy&&+e.webkitCompassAccuracy>=0&&+e.webkitCompassAccuracy<50&&(this.alphaOffsetDevice=new g.Euler(e.webkitCompassHeading,0,0),this.alphaOffsetDevice.rotateZ(v),this.alphaOffsetScreen=v,++i>=r)?void t.removeEventListener("deviceorientation",s,!1):void(++n>=a&&t.removeEventListener("deviceorientation",s,!1))}.bind(this);t.addEventListener("deviceorientation",s,!1)}},g.DeviceOrientation.prototype={constructor:g.DeviceOrientation,start:function(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&h.orientation.callbacks.push(e),f||(m?t.screen.orientation.addEventListener("change",a,!1):t.addEventListener("orientationchange",a,!1)),h.orientation.active||(t.addEventListener("deviceorientation",i,!1),h.orientation.active=!0)},stop:function(){h.orientation.active&&(t.removeEventListener("deviceorientation",i,!1),h.orientation.active=!1)},listen:function(t){this.start(t)},getFixedFrameQuaternion:function(){var t=new g.Euler,e=new g.RotationMatrix,n=new g.Quaternion;return function(){var a=h.orientation.data||{alpha:0,beta:0,gamma:0},i=a.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,i-=t.alpha),t.set(i,a.beta,a.gamma),n.setFromEuler(t),n}}(),getScreenAdjustedQuaternion:function(){var t;return function(){return t=this.getFixedFrameQuaternion(),t.rotateZ(-v),t}}(),getFixedFrameMatrix:function(){var t=new g.Euler,e=new g.RotationMatrix;return function(){var n=h.orientation.data||{alpha:0,beta:0,gamma:0},a=n.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,a-=t.alpha),t.set(a,n.beta,n.gamma),e.setFromEuler(t),e}}(),getScreenAdjustedMatrix:function(){var t;return function(){return t=this.getFixedFrameMatrix(),t.rotateZ(-v),t}}(),getFixedFrameEuler:function(){var t,e=new g.Euler;return function(){return t=this.getFixedFrameMatrix(),e.setFromRotationMatrix(t),e}}(),getScreenAdjustedEuler:function(){var t,e=new g.Euler;return function(){return t=this.getScreenAdjustedMatrix(),e.setFromRotationMatrix(t),e}}(),isAbsolute:function(){return h.orientation.data&&h.orientation.data.absolute===!0?!0:!1},getLastRawEventData:function(){return h.orientation.data||{}},_alphaAvailable:!1,_betaAvailable:!1,_gammaAvailable:!1,isAvailable:function(t){switch(t){case this.ALPHA:return this._alphaAvailable;case this.BETA:return this._betaAvailable;case this.GAMMA:return this._gammaAvailable}},ALPHA:"alpha",BETA:"beta",GAMMA:"gamma"},g.DeviceMotion=function(t){this.options=t||{}},g.DeviceMotion.prototype={constructor:g.DeviceMotion,start:function(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&h.motion.callbacks.push(e),f||(m?t.screen.orientation.addEventListener("change",a,!1):t.addEventListener("orientationchange",a,!1)),h.motion.active||(t.addEventListener("devicemotion",r,!1),h.motion.active=!0)},stop:function(){h.motion.active&&(t.removeEventListener("devicemotion",r,!1),h.motion.active=!1)},listen:function(t){this.start(t)},getScreenAdjustedAcceleration:function(){var t=h.motion.data&&h.motion.data.acceleration?h.motion.data.acceleration:{x:0,y:0,z:0},e={};switch(v){case p:e.x=-t.y,e.y=t.x;break;case d:e.x=-t.x,e.y=-t.y;break;case y:case A:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y}return e.z=t.z,e},getScreenAdjustedAccelerationIncludingGravity:function(){var t=h.motion.data&&h.motion.data.accelerationIncludingGravity?h.motion.data.accelerationIncludingGravity:{x:0,y:0,z:0},e={};switch(v){case p:e.x=-t.y,e.y=t.x;break;case d:e.x=-t.x,e.y=-t.y;break;case y:case A:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y}return e.z=t.z,e},getScreenAdjustedRotationRate:function(){var t=h.motion.data&&h.motion.data.rotationRate?h.motion.data.rotationRate:{alpha:0,beta:0,gamma:0},e={};switch(v){case p:e.beta=-t.gamma,e.gamma=t.beta;break;case d:e.beta=-t.beta,e.gamma=-t.gamma;break;case y:case A:e.beta=t.gamma,e.gamma=-t.beta;break;default:e.beta=t.beta,e.gamma=t.gamma}return e.alpha=t.alpha,e},getLastRawEventData:function(){return h.motion.data||{}},_accelerationXAvailable:!1,_accelerationYAvailable:!1,_accelerationZAvailable:!1,_accelerationIncludingGravityXAvailable:!1,_accelerationIncludingGravityYAvailable:!1,_accelerationIncludingGravityZAvailable:!1,_rotationRateAlphaAvailable:!1,_rotationRateBetaAvailable:!1,_rotationRateGammaAvailable:!1,isAvailable:function(t){switch(t){case this.ACCELERATION_X:return this._accelerationXAvailable;case this.ACCELERATION_Y:return this._accelerationYAvailable;case this.ACCELERATION_Z:return this._accelerationZAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_X:return this._accelerationIncludingGravityXAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Y:return this._accelerationIncludingGravityYAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Z:return this._accelerationIncludingGravityZAvailable;case this.ROTATION_RATE_ALPHA:return this._rotationRateAlphaAvailable;case this.ROTATION_RATE_BETA:return this._rotationRateBetaAvailable;case this.ROTATION_RATE_GAMMA:return this._rotationRateGammaAvailable}},ACCELERATION_X:"accelerationX",ACCELERATION_Y:"accelerationY",ACCELERATION_Z:"accelerationZ",ACCELERATION_INCLUDING_GRAVITY_X:"accelerationIncludingGravityX",ACCELERATION_INCLUDING_GRAVITY_Y:"accelerationIncludingGravityY",ACCELERATION_INCLUDING_GRAVITY_Z:"accelerationIncludingGravityZ",ROTATION_RATE_ALPHA:"rotationRateAlpha",ROTATION_RATE_BETA:"rotationRateBeta",ROTATION_RATE_GAMMA:"rotationRateGamma"},t.FULLTILT=g}}(window),!function(t,e){"function"==typeof define&&define.amd?define(function(){return t.GyroNorm=e()}):"object"==typeof module&&module.exports?module.exports=t.GyroNorm=e():t.GyroNorm=e()}(this,function(){function t(t){return Math.round(t*Math.pow(10,g))/Math.pow(10,g)}function e(){var e={};e=_?v.getScreenAdjustedEuler():v.getFixedFrameEuler();var n=p.getScreenAdjustedAcceleration(),i=p.getScreenAdjustedAccelerationIncludingGravity(),r=p.getScreenAdjustedRotationRate(),o=0;A===a?(o=e.alpha-u,o=0>o?360-Math.abs(o):o):o=e.alpha;var s={"do":{alpha:t(o),beta:t(e.beta),gamma:t(e.gamma),absolute:v.isAbsolute()},dm:{x:t(n.x),y:t(n.y),z:t(n.z),gx:t(i.x),gy:t(i.y),gz:t(i.z),alpha:t(r.alpha),beta:t(r.beta),gamma:t(r.gamma)}};return y&&(s.dm.gx*=h,s.dm.gy*=h,s.dm.gz*=h),s}function n(t){b&&("string"==typeof t&&(t={message:t,code:0}),b(t))}var a="game",i="world",r="deviceorientation",o="acceleration",s="accelerationinludinggravity",c="rotationrate",l=null,u=0,h=0,f=!1,m=!1,v=null,p=null,d=50,y=!0,A=a,g=2,b=null,_=!1,x=function(t){};return x.GAME=a,x.WORLD=i,x.DEVICE_ORIENTATION=r,x.ACCELERATION=o,x.ACCELERATION_INCLUDING_GRAVITY=s,x.ROTATION_RATE=c,x.prototype.init=function(t){t&&t.frequency&&(d=t.frequency),t&&t.gravityNormalized&&(y=t.gravityNormalized),t&&t.orientationBase&&(A=t.orientationBase),t&&t.decimalCount&&(g=t.decimalCount),t&&t.logger&&(b=t.logger),t&&t.screenAdjusted&&(_=t.screenAdjusted);var e=new FULLTILT.getDeviceOrientation({type:A}).then(function(t){v=t}),n=(new FULLTILT.getDeviceMotion).then(function(t){p=t,h=p.getScreenAdjustedAccelerationIncludingGravity().z>0?-1:1});return Promise.all([e,n]).then(function(){m=!0})},x.prototype.end=function(){try{m=!1,this.stop(),p.stop(),v.stop()}catch(t){n(t)}},x.prototype.start=function(t){return m?(l=setInterval(function(){t(e())},d),void(f=!0)):void n({message:'GyroNorm is not initialized yet. First call the "init()" function.',code:1})},x.prototype.stop=function(){l&&(clearInterval(l),f=!1)},x.prototype.normalizeGravity=function(t){y=t?!0:!1},x.prototype.setHeadDirection=function(){return _||A===i?!1:(u=v.getFixedFrameEuler().alpha,!0)},x.prototype.startLogging=function(t){t&&(b=t)},x.prototype.stopLogging=function(){b=null},x.prototype.isAvailable=function(t){var e=v.getScreenAdjustedEuler(),n=p.getScreenAdjustedAcceleration(),a=p.getScreenAdjustedAccelerationIncludingGravity(),i=p.getScreenAdjustedRotationRate();switch(t){case r:return e.alpha&&null!==e.alpha&&e.beta&&null!==e.beta&&e.gamma&&null!==e.gamma;case o:return n&&n.x&&n.y&&n.z;case s:return a&&a.x&&a.y&&a.z;case c:return i&&i.alpha&&i.beta&&i.gamma;default:return{deviceOrientationAvailable:e.alpha&&null!==e.alpha&&e.beta&&null!==e.beta&&e.gamma&&null!==e.gamma,accelerationAvailable:n&&n.x&&n.y&&n.z,accelerationIncludingGravityAvailable:a&&a.x&&a.y&&a.z,rotationRateAvailable:i&&i.alpha&&i.beta&&i.gamma}}},x.prototype.isRunning=function(){return f},x});</script><script>!function(){function t(t,n,i){return t.call.apply(t.bind,arguments)}function n(t,n,i){if(!t)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,e),t.apply(n,i)}}return function(){return t.apply(n,arguments)}}function i(e,o,s){return i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:n,i.apply(null,arguments)}function e(t,n){this.F=t,this.k=n||t,this.H=this.k.document}function o(t,n,i){t=t.H.getElementsByTagName(n)[0],t||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function s(t,n,i){n=n||[],i=i||[];for(var e=t.className.split(/\s+/),o=0;o<n.length;o+=1){for(var s=!1,r=0;r<e.length;r+=1)if(n[o]===e[r]){s=!0;break}s||e.push(n[o])}for(n=[],o=0;o<e.length;o+=1){for(s=!1,r=0;r<i.length;r+=1)if(e[o]===i[r]){s=!0;break}s||n.push(e[o])}t.className=n.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function r(t,n){for(var i=t.className.split(/\s+/),e=0,o=i.length;o>e;e++)if(i[e]==n)return!0;return!1}function a(t){if("string"==typeof t.fa)return t.fa;var n=t.k.location.protocol;return"about:"==n&&(n=t.F.location.protocol),"https:"==n?"https:":"http:"}function h(t,n,i){function e(){h&&s&&r&&(h(a),h=null)}n=t.createElement("link",{rel:"stylesheet",href:n,media:"all"});var s=!1,r=!0,a=null,h=i||null;Y?(n.onload=function(){s=!0,e()},n.onerror=function(){s=!0,a=Error("Stylesheet failed to load"),e()}):setTimeout(function(){s=!0,e()},0),o(t,"head",n)}function l(t,n,i,e){var o=t.H.getElementsByTagName("head")[0];if(o){var s=t.createElement("script",{src:n}),r=!1;return s.onload=s.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i&&i(null),s.onload=s.onreadystatechange=null,"HEAD"==s.parentNode.tagName&&o.removeChild(s))},o.appendChild(s),setTimeout(function(){r||(r=!0,i&&i(Error("Script load timeout")))},e||5e3),s}return null}function f(){this.S=0,this.K=null}function u(t){return t.S++,function(){t.S--,p(t)}}function c(t,n){t.K=n,p(t)}function p(t){0==t.S&&t.K&&(t.K(),t.K=null)}function d(t){this.ea=t||"-"}function g(t,n){this.Q=t,this.M=4,this.L="n";var i=(n||"n4").match(/^([nio])([1-9])$/i);i&&(this.L=i[1],this.M=parseInt(i[2],10))}function m(t){return y(t)+" "+(t.M+"00")+" 300px "+v(t.Q)}function v(t){var n=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var e=t[i].replace(/['"]/g,"");n.push(-1!=e.indexOf(" ")||/^\d/.test(e)?"'"+e+"'":e)}return n.join(",")}function w(t){return t.L+t.M}function y(t){var n="normal";return"o"===t.L?n="oblique":"i"===t.L&&(n="italic"),n}function b(t){var n=4,i="n",e=null;return t&&((e=t.match(/(normal|oblique|italic)/i))&&e[1]&&(i=e[1].substr(0,1).toLowerCase()),(e=t.match(/([1-9]00|normal|bold)/i))&&e[1]&&(/bold/i.test(e[1])?n=7:/[1-9]00/.test(e[1])&&(n=parseInt(e[1].substr(0,1),10)))),i+n}function k(t,n){this.a=t,this.j=t.k.document.documentElement,this.O=n,this.g="wf",this.e=new d("-"),this.da=!1!==n.events,this.u=!1!==n.classes}function x(t){t.u&&s(t.j,[t.e.d(t.g,"loading")]),S(t,"loading")}function N(t){if(t.u){var n=r(t.j,t.e.d(t.g,"active")),i=[],e=[t.e.d(t.g,"loading")];n||i.push(t.e.d(t.g,"inactive")),s(t.j,i,e)}S(t,"inactive")}function S(t,n,i){t.da&&t.O[n]&&(i?t.O[n](i.getName(),w(i)):t.O[n]())}function _(){this.t={}}function j(t,n,i){var e,o=[];for(e in n)if(n.hasOwnProperty(e)){var s=t.t[e];s&&o.push(s(n[e],i))}return o}function T(t,n){this.a=t,this.h=n,this.m=this.a.createElement("span",{"aria-hidden":"true"},this.h)}function C(t,n){var i,e=t.m;i="display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+v(n.Q)+";"+("font-style:"+y(n)+";font-weight:"+(n.M+"00")+";"),e.style.cssText=i}function A(t){o(t.a,"body",t.m)}function E(t,n,i,e,o,s){this.G=t,this.J=n,this.f=e,this.a=i,this.v=o||3e3,this.h=s||void 0}function F(t,n,i,e,o,s,r){this.G=t,this.J=n,this.a=i,this.f=e,this.h=r||"BESbswy",this.s={},this.v=o||3e3,this.Z=s||null,this.D=this.C=this.A=this.w=null,this.w=new T(this.a,this.h),this.A=new T(this.a,this.h),this.C=new T(this.a,this.h),this.D=new T(this.a,this.h),C(this.w,new g(this.f.getName()+",serif",w(this.f))),C(this.A,new g(this.f.getName()+",sans-serif",w(this.f))),C(this.C,new g("serif",w(this.f))),C(this.D,new g("sans-serif",w(this.f))),A(this.w),A(this.A),A(this.C),A(this.D)}function I(){if(null===z){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);z=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return z}function W(t,n,i){for(var e in Z)if(Z.hasOwnProperty(e)&&n===t.s[Z[e]]&&i===t.s[Z[e]])return!0;return!1}function B(t){var n,i=t.w.m.offsetWidth,e=t.A.m.offsetWidth;(n=i===t.s.serif&&e===t.s["sans-serif"])||(n=I()&&W(t,i,e)),n?X()-t.ga>=t.v?I()&&W(t,i,e)&&(null===t.Z||t.Z.hasOwnProperty(t.f.getName()))?L(t,t.G):L(t,t.J):O(t):L(t,t.G)}function O(t){setTimeout(i(function(){B(this)},t),50)}function L(t,n){setTimeout(i(function(){this.w.remove(),this.A.remove(),this.C.remove(),this.D.remove(),n(this.f)},t),0)}function P(t,n,i){this.a=t,this.p=n,this.P=0,this.ba=this.Y=!1,this.v=i}function q(t){0==--t.P&&t.Y&&(t.ba?(t=t.p,t.u&&s(t.j,[t.e.d(t.g,"active")],[t.e.d(t.g,"loading"),t.e.d(t.g,"inactive")]),S(t,"active")):N(t.p))}function D(t){this.F=t,this.q=new _,this.$=0,this.T=this.U=!0}function H(t,n,e,o,r){var a=0==--t.$;(t.T||t.U)&&setTimeout(function(){var t=r||null,h=o||null||{};if(0===e.length&&a)N(n.p);else{n.P+=e.length,a&&(n.Y=a);var l,f=[];for(l=0;l<e.length;l++){var u=e[l],c=h[u.getName()],p=n.p,d=u;p.u&&s(p.j,[p.e.d(p.g,d.getName(),w(d).toString(),"loading")]),S(p,"fontloading",d),p=null,null===tt&&(tt=window.FontFace?(p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))?42<parseInt(p[1],10):!0:!1),p=tt?new E(i(n.V,n),i(n.W,n),n.a,u,n.v,c):new F(i(n.V,n),i(n.W,n),n.a,u,n.v,t,c),f.push(p)}for(l=0;l<f.length;l++)f[l].start()}},0)}function $(t,n,i){var e=[],o=i.timeout;x(n);var e=j(t.q,i,t.a),s=new P(t.a,n,o);for(t.$=e.length,n=0,i=e.length;i>n;n++)e[n].load(function(n,i,e){H(t,s,n,i,e)})}function G(t,n,i){this.N=t?t:n+nt,this.o=[],this.R=[],this.ca=i||""}function K(t,n){for(var i=n.length,e=0;i>e;e++){var o=n[e].split(":");3==o.length&&t.R.push(o.pop());var s="";2==o.length&&""!=o[1]&&(s=":"),t.o.push(o.join(s))}}function M(t){this.o=t,this.aa=[],this.I={}}function J(t,n){this.a=t,this.c=n}function R(t,n){this.a=t,this.c=n,this.X=[]}function Q(t,n){this.a=t,this.c=n}function U(t,n){this.a=t,this.c=n}function V(t,n){this.a=t,this.c=n}var X=Date.now||function(){return+new Date},Y=!!window.FontFace;e.prototype.createElement=function(t,n,i){if(t=this.H.createElement(t),n)for(var e in n)n.hasOwnProperty(e)&&("style"==e?t.style.cssText=n[e]:t.setAttribute(e,n[e]));return i&&t.appendChild(this.H.createTextNode(i)),t},d.prototype.d=function(t){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return n.join(this.ea)},g.prototype.getName=function(){return this.Q},T.prototype.remove=function(){var t=this.m;t.parentNode&&t.parentNode.removeChild(t)},E.prototype.start=function(){var t=this.a.k.document,n=this;Promise.race([new Promise(function(t,i){setTimeout(function(){i(n.f)},n.v)}),t.fonts.load(m(this.f),this.h)]).then(function(t){1<=t.length?n.G(n.f):n.J(n.f)},function(){n.J(n.f)})};var Z={ia:"serif",ha:"sans-serif"},z=null;F.prototype.start=function(){this.s.serif=this.C.m.offsetWidth,this.s["sans-serif"]=this.D.m.offsetWidth,this.ga=X(),B(this)};var tt=null;P.prototype.V=function(t){var n=this.p;n.u&&s(n.j,[n.e.d(n.g,t.getName(),w(t).toString(),"active")],[n.e.d(n.g,t.getName(),w(t).toString(),"loading"),n.e.d(n.g,t.getName(),w(t).toString(),"inactive")]),S(n,"fontactive",t),this.ba=!0,q(this)},P.prototype.W=function(t){var n=this.p;if(n.u){var i=r(n.j,n.e.d(n.g,t.getName(),w(t).toString(),"active")),e=[],o=[n.e.d(n.g,t.getName(),w(t).toString(),"loading")];i||e.push(n.e.d(n.g,t.getName(),w(t).toString(),"inactive")),s(n.j,e,o)}S(n,"fontinactive",t),q(this)},D.prototype.load=function(t){this.a=new e(this.F,t.context||this.F),this.U=!1!==t.events,this.T=!1!==t.classes,$(this,new k(this.a,t),t)};var nt="//fonts.googleapis.com/css";G.prototype.d=function(){if(0==this.o.length)throw Error("No fonts to load!");if(-1!=this.N.indexOf("kit="))return this.N;for(var t=this.o.length,n=[],i=0;t>i;i++)n.push(this.o[i].replace(/ /g,"+"));return t=this.N+"?family="+n.join("%7C"),0<this.R.length&&(t+="&subset="+this.R.join(",")),0<this.ca.length&&(t+="&text="+encodeURIComponent(this.ca)),t};var it={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},et={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ot={i:"i",italic:"i",n:"n",normal:"n"},st=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;M.prototype.parse=function(){for(var t=this.o.length,n=0;t>n;n++){var i=this.o[n].split(":"),e=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var s,r=i[1];if(s=[],r)for(var r=r.split(","),a=r.length,h=0;a>h;h++){var l;if(l=r[h],l.match(/^[\w-]+$/))if(l=st.exec(l.toLowerCase()),null==l)l="";else{var f;if(f=l[1],null==f||""==f)f="4";else{var u=et[f];f=u?u:isNaN(f)?"4":f.substr(0,1)}l=l[2],l=[null==l||""==l?"n":ot[l],f].join("")}else l="";l&&s.push(l)}0<s.length&&(o=s),3==i.length&&(i=i[2],s=[],i=i?i.split(","):s,0<i.length&&(i=it[i[0]])&&(this.I[e]=i))}for(this.I[e]||(i=it[e])&&(this.I[e]=i),i=0;i<o.length;i+=1)this.aa.push(new g(e,o[i]))}};var rt={Arimo:!0,Cousine:!0,Tinos:!0};J.prototype.load=function(t){var n=new f,i=this.a,e=new G(this.c.api,a(i),this.c.text),o=this.c.families;K(e,o);var s=new M(o);s.parse(),h(i,e.d(),u(n)),c(n,function(){t(s.aa,s.I,rt)})},R.prototype.B=function(t){var n=this.a;return a(this.a)+(this.c.api||"//f.fontdeck.com/s/css/js/")+(n.k.location.hostname||n.F.location.hostname)+"/"+t+".js"},R.prototype.load=function(t){var n=this.c.id,i=this.a.k,e=this;n?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[n]=function(n,i){for(var o=0,s=i.fonts.length;s>o;++o){var r=i.fonts[o];e.X.push(new g(r.name,b("font-weight:"+r.weight+";font-style:"+r.style)))}t(e.X)},l(this.a,this.B(n),function(n){n&&t([])})):t([])},Q.prototype.B=function(t){return(this.c.api||"https://use.typekit.net")+"/"+t+".js"},Q.prototype.load=function(t){var n=this.c.id,i=this.a.k;n?l(this.a,this.B(n),function(n){if(n)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){n=i.Typekit.config.fn;for(var e=[],o=0;o<n.length;o+=2)for(var s=n[o],r=n[o+1],a=0;a<r.length;a++)e.push(new g(s,r[a]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(h){}t(e)}},2e3):t([])},U.prototype.B=function(t,n){var i=a(this.a),e=(this.c.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return i+"//"+e+"/"+t+".js"+(n?"?v="+n:"")},U.prototype.load=function(t){function n(){if(o["__mti_fntLst"+i]){var e,s=o["__mti_fntLst"+i](),r=[];if(s)for(var a=0;a<s.length;a++){var h=s[a].fontfamily;void 0!=s[a].fontStyle&&void 0!=s[a].fontWeight?(e=s[a].fontStyle+s[a].fontWeight,r.push(new g(h,e))):r.push(new g(h))}t(r)}else setTimeout(function(){n()},50)}var i=this.c.projectId,e=this.c.version;if(i){var o=this.a.k;l(this.a,this.B(i,e),function(i){i?t([]):n()}).id="__MonotypeAPIScript__"+i}else t([])},V.prototype.load=function(t){var n,i,e=this.c.urls||[],o=this.c.families||[],s=this.c.testStrings||{},r=new f;for(n=0,i=e.length;i>n;n++)h(this.a,e[n],u(r));var a=[];for(n=0,i=o.length;i>n;n++)if(e=o[n].split(":"),e[1])for(var l=e[1].split(","),p=0;p<l.length;p+=1)a.push(new g(e[0],l[p]));else a.push(new g(e[0]));c(r,function(){t(a,s)})};var at=new D(window);at.q.t.custom=function(t,n){return new V(n,t)},at.q.t.fontdeck=function(t,n){return new R(n,t)},at.q.t.monotype=function(t,n){return new U(n,t)},at.q.t.typekit=function(t,n){return new Q(n,t)},at.q.t.google=function(t,n){return new J(n,t)};var ht={load:i(at.load,at)};"function"==typeof define&&define.amd?define(function(){return ht}):"undefined"!=typeof module&&module.exports?module.exports=ht:(window.WebFont=ht,window.WebFontConfig&&at.load(window.WebFontConfig))}();</script><script>!function(){var e={},o=null,n=!0,t=!1;try{"undefined"!=typeof AudioContext?o=new AudioContext:"undefined"!=typeof webkitAudioContext?o=new webkitAudioContext:n=!1}catch(r){n=!1}if(!n)if("undefined"!=typeof Audio)try{new Audio}catch(r){t=!0}else t=!0;if(n){var a="undefined"==typeof o.createGain?o.createGainNode():o.createGain();a.gain.value=1,a.connect(o.destination)}var i=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=n,this.ctx=o,this.noAudio=t,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};i.prototype={volume:function(e){var o=this;if(e=parseFloat(e),e>=0&&1>=e){o._volume=e,n&&(a.gain.value=e);for(var t in o._howls)if(o._howls.hasOwnProperty(t)&&o._howls[t]._webAudio===!1)for(var r=0;r<o._howls[t]._audioNode.length;r++)o._howls[t]._audioNode[r].volume=o._howls[t]._volume*o._volume;return o}return n?a.gain.value:o._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var o=this;o._muted=e,n&&(a.gain.value=e?0:o._volume);for(var t in o._howls)if(o._howls.hasOwnProperty(t)&&o._howls[t]._webAudio===!1)for(var r=0;r<o._howls[t]._audioNode.length;r++)o._howls[t]._audioNode[r].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!o||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var n=function(){var t=o.createBuffer(1,1,22050),r=o.createBufferSource();r.buffer=t,r.connect(o.destination),"undefined"==typeof r.start?r.noteOn(0):r.start(0),setTimeout(function(){(r.playbackState===r.PLAYING_STATE||r.playbackState===r.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchend",n,!1))},0)};return window.addEventListener("touchend",n,!1),e}}};var u=null,d={};t||(u=new Audio,d={mp3:!!u.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var l=new i(d),f=function(e){var t=this;t._autoplay=e.autoplay||!1,t._buffer=e.buffer||!1,t._duration=e.duration||0,t._format=e.format||null,t._loop=e.loop||!1,t._loaded=!1,t._sprite=e.sprite||{},t._src=e.src||"",t._pos3d=e.pos3d||[0,0,-.5],t._volume=void 0!==e.volume?e.volume:1,t._urls=e.urls||[],t._rate=e.rate||1,t._model=e.model||null,t._onload=[e.onload||function(){}],t._onloaderror=[e.onloaderror||function(){}],t._onend=[e.onend||function(){}],t._onpause=[e.onpause||function(){}],t._onplay=[e.onplay||function(){}],t._onendTimer=[],t._webAudio=n&&!t._buffer,t._audioNode=[],t._webAudio&&t._setupAudioNode(),"undefined"!=typeof o&&o&&l.iOSAutoEnable&&l._enableiOSAudio(),l._howls.push(t),t.load()};if(f.prototype={load:function(){var e=this,o=null;if(t)return void e.on("loaderror");for(var n=0;n<e._urls.length;n++){var r,a;if(e._format)r=e._format;else{if(a=e._urls[n],r=/^data:audio\/([^;,]+);/i.exec(a),r||(r=/\.([^.]+)$/.exec(a.split("?",1)[0])),!r)return void e.on("loaderror");r=r[1].toLowerCase()}if(d[r]){o=e._urls[n];break}}if(!o)return void e.on("loaderror");if(e._src=o,e._webAudio)_(e,o);else{var u=new Audio;u.addEventListener("error",function(){u.error&&4===u.error.code&&(i.noAudio=!0),e.on("loaderror",{type:u.error?u.error.code:0})},!1),e._audioNode.push(u),u.src=o,u._pos=0,u.preload="auto",u.volume=l._muted?0:e._volume*l.volume();var f=function(){e._duration=Math.ceil(10*u.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),u.removeEventListener("canplaythrough",f,!1)};u.addEventListener("canplaythrough",f,!1),u.load()}return e},urls:function(e){var o=this;return e?(o.stop(),o._urls="string"==typeof e?[e]:e,o._loaded=!1,o.load(),o):o._urls},play:function(e,n){var t=this;return"function"==typeof e&&(n=e),e&&"function"!=typeof e||(e="_default"),t._loaded?t._sprite[e]?(t._inactiveNode(function(r){r._sprite=e;var a=r._pos>0?r._pos:t._sprite[e][0]/1e3,i=0;t._webAudio?(i=t._sprite[e][1]/1e3-r._pos,r._pos>0&&(a=t._sprite[e][0]/1e3+a)):i=t._sprite[e][1]/1e3-(a-t._sprite[e][0]/1e3);var u,d=!(!t._loop&&!t._sprite[e][2]),f="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var o={id:f,sprite:e,loop:d};u=setTimeout(function(){!t._webAudio&&d&&t.stop(o.id).play(e,o.id),t._webAudio&&!d&&(t._nodeById(o.id).paused=!0,t._nodeById(o.id)._pos=0,t._clearEndTimer(o.id)),t._webAudio||d||t.stop(o.id),t.on("end",f)},1e3*i),t._onendTimer.push({timer:u,id:o.id})}(),t._webAudio){var _=t._sprite[e][0]/1e3,s=t._sprite[e][1]/1e3;r.id=f,r.paused=!1,p(t,[d,_,s],f),t._playStart=o.currentTime,r.gain.value=t._volume,"undefined"==typeof r.bufferSource.start?d?r.bufferSource.noteGrainOn(0,a,86400):r.bufferSource.noteGrainOn(0,a,i):d?r.bufferSource.start(0,a,86400):r.bufferSource.start(0,a,i)}else{if(4!==r.readyState&&(r.readyState||!navigator.isCocoonJS))return t._clearEndTimer(f),function(){var o=t,a=e,i=n,u=r,d=function(){o.play(a,i),u.removeEventListener("canplaythrough",d,!1)};u.addEventListener("canplaythrough",d,!1)}(),t;r.readyState=4,r.id=f,r.currentTime=a,r.muted=l._muted||r.muted,r.volume=t._volume*l.volume(),setTimeout(function(){r.play()},0)}return t.on("play"),"function"==typeof n&&n(f),t}),t):("function"==typeof n&&n(),t):(t.on("load",function(){t.play(e,n)}),t)},pause:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.pause(e)}),o;o._clearEndTimer(e);var n=e?o._nodeById(e):o._activeNode();if(n)if(n._pos=o.pos(null,e),o._webAudio){if(!n.bufferSource||n.paused)return o;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return o.on("pause"),o},stop:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.stop(e)}),o;o._clearEndTimer(e);var n=e?o._nodeById(e):o._activeNode();if(n)if(n._pos=0,o._webAudio){if(!n.bufferSource||n.paused)return o;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return o},mute:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.mute(e)}),o;var n=e?o._nodeById(e):o._activeNode();return n&&(o._webAudio?n.gain.value=0:n.muted=!0),o},unmute:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.unmute(e)}),o;var n=e?o._nodeById(e):o._activeNode();return n&&(o._webAudio?n.gain.value=o._volume:n.muted=!1),o},volume:function(e,o){var n=this;if(e=parseFloat(e),e>=0&&1>=e){if(n._volume=e,!n._loaded)return n.on("play",function(){n.volume(e,o)}),n;var t=o?n._nodeById(o):n._activeNode();return t&&(n._webAudio?t.gain.value=e:t.volume=e*l.volume()),n}return n._volume},loop:function(e){var o=this;return"boolean"==typeof e?(o._loop=e,o):o._loop},sprite:function(e){var o=this;return"object"==typeof e?(o._sprite=e,o):o._sprite},pos:function(e,n){var t=this;if(!t._loaded)return t.on("load",function(){t.pos(e)}),"number"==typeof e?t:t._pos||0;e=parseFloat(e);var r=n?t._nodeById(n):t._activeNode();if(r)return e>=0?(t.pause(n),r._pos=e,t.play(r._sprite,n),t):t._webAudio?r._pos+(o.currentTime-t._playStart):r.currentTime;if(e>=0)return t;for(var a=0;a<t._audioNode.length;a++)if(t._audioNode[a].paused&&4===t._audioNode[a].readyState)return t._webAudio?t._audioNode[a]._pos:t._audioNode[a].currentTime},pos3d:function(e,o,n,t){var r=this;if(o="undefined"!=typeof o&&o?o:0,n="undefined"!=typeof n&&n?n:-.5,!r._loaded)return r.on("play",function(){r.pos3d(e,o,n,t)}),r;if(!(e>=0||0>e))return r._pos3d;if(r._webAudio){var a=t?r._nodeById(t):r._activeNode();a&&(r._pos3d=[e,o,n],a.panner.setPosition(e,o,n),a.panner.panningModel=r._model||"HRTF")}return r},fade:function(e,o,n,t,r){var a=this,i=Math.abs(e-o),u=e>o?"down":"up",d=i/.01,l=n/d;if(!a._loaded)return a.on("load",function(){a.fade(e,o,n,t,r)}),a;a.volume(e,r);for(var f=1;d>=f;f++)!function(){var e=a._volume+("up"===u?.01:-.01)*f,n=Math.round(1e3*e)/1e3,i=o;setTimeout(function(){a.volume(n,r),n===i&&t&&t()},l*f)}()},fadeIn:function(e,o,n){return this.volume(0).play().fade(0,e,o,n)},fadeOut:function(e,o,n,t){var r=this;return r.fade(r._volume,e,o,function(){n&&n(),r.pause(t),r.on("end")},t)},_nodeById:function(e){for(var o=this,n=o._audioNode[0],t=0;t<o._audioNode.length;t++)if(o._audioNode[t].id===e){n=o._audioNode[t];break}return n},_activeNode:function(){for(var e=this,o=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){o=e._audioNode[n];break}return e._drainPool(),o},_inactiveNode:function(e){for(var o=this,n=null,t=0;t<o._audioNode.length;t++)if(o._audioNode[t].paused&&4===o._audioNode[t].readyState){e(o._audioNode[t]),n=!0;break}if(o._drainPool(),!n){var r;if(o._webAudio)r=o._setupAudioNode(),e(r);else{o.load(),r=o._audioNode[o._audioNode.length-1];var a=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",i=function(){r.removeEventListener(a,i,!1),e(r)};r.addEventListener(a,i,!1)}}},_drainPool:function(){var e,o=this,n=0;for(e=0;e<o._audioNode.length;e++)o._audioNode[e].paused&&n++;for(e=o._audioNode.length-1;e>=0&&!(5>=n);e--)o._audioNode[e].paused&&(o._webAudio&&o._audioNode[e].disconnect(0),n--,o._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var o=this,n=0,t=0;t<o._onendTimer.length;t++)if(o._onendTimer[t].id===e){n=t;break}var r=o._onendTimer[n];r&&(clearTimeout(r.timer),o._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,t=e._audioNode.length;return n[t]="undefined"==typeof o.createGain?o.createGainNode():o.createGain(),n[t].gain.value=e._volume,n[t].paused=!0,n[t]._pos=0,n[t].readyState=4,n[t].connect(a),n[t].panner=o.createPanner(),n[t].panner.panningModel=e._model||"equalpower",n[t].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[t].panner.connect(n[t]),n[t]},on:function(e,o){var n=this,t=n["_on"+e];if("function"==typeof o)t.push(o);else for(var r=0;r<t.length;r++)o?t[r].call(n,o):t[r].call(n);return n},off:function(e,o){var n=this,t=n["_on"+e],r=o?o.toString():null;if(r){for(var a=0;a<t.length;a++)if(r===t[a].toString()){t.splice(a,1);break}}else n["_on"+e]=[];return n},unload:function(){for(var o=this,n=o._audioNode,t=0;t<o._audioNode.length;t++)n[t].paused||(o.stop(n[t].id),o.on("end",n[t].id)),o._webAudio?n[t].disconnect(0):n[t].src="";for(t=0;t<o._onendTimer.length;t++)clearTimeout(o._onendTimer[t].timer);var r=l._howls.indexOf(o);null!==r&&r>=0&&l._howls.splice(r,1),delete e[o._src],o=null}},n)var _=function(o,n){if(n in e)return o._duration=e[n].duration,void c(o);if(/^data:[^;]+;base64,/.test(n)){for(var t=atob(n.split(",")[1]),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);s(r.buffer,o,n)}else{var i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){s(i.response,o,n)},i.onerror=function(){o._webAudio&&(o._buffer=!0,o._webAudio=!1,o._audioNode=[],delete o._gainNode,delete e[n],o.load())};try{i.send()}catch(u){i.onerror()}}},s=function(n,t,r){o.decodeAudioData(n,function(o){o&&(e[r]=o,c(t,o))},function(e){t.on("loaderror")})},c=function(e,o){e._duration=o?o.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},p=function(n,t,r){var a=n._nodeById(r);a.bufferSource=o.createBufferSource(),a.bufferSource.buffer=e[n._src],a.bufferSource.connect(a.panner),a.bufferSource.loop=t[0],t[0]&&(a.bufferSource.loopStart=t[1],a.bufferSource.loopEnd=t[1]+t[2]),a.bufferSource.playbackRate.value=n._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:l,Howl:f}}),"undefined"!=typeof exports&&(exports.Howler=l,exports.Howl=f),"undefined"!=typeof window&&(window.Howler=l,window.Howl=f)}();</script><script>function addNoiseSpecks(e,t,a,i,n,o,s,r){for(var u=new THREE.BufferGeometry,l=[],d=[],m=[],c=[],p=Object.keys(o.frames),f=p.length,h=(e*(o.meta.size.w/o.meta.size.h),[]),g=0;f>g;g++)h.push(getSpritesheetData(o,p[g]));var y,v=0;for(g=0;t>g;g++){y=getPolygonDataFromSpritesheet(o,p[g%f]);for(var S=0,D=y.positions.length;D>S;S++)d.push(e*y.pixelSizeScaler*y.positions[S]);for(S=0,D=y.uvs.length;D>S;S++)m.push(y.uvs[S]);for(S=0,D=y.indices.length;D>S;S++)c.push(v+y.indices[S]);v+=y.numVertices;var x=Math.random();for(S=0,D=y.numVertices;D>S;S++)l.push(x)}u.addAttribute("position",new THREE.BufferAttribute(new Float32Array(d),3)),u.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(m),2)),u.addAttribute("offset",new THREE.BufferAttribute(new Float32Array(l),1)),u.setIndex(new THREE.BufferAttribute(new Uint16Array(c),1));var b={map:{type:"t",value:r},time:{type:"f",value:0},range:{type:"f",value:0},rangeSize:{type:"f",value:s},rangeEnd:{type:"f",value:s},aspect:{type:"f",value:n.aspect},alpha:{type:"f",value:a},scaler:{type:"f",value:1}},T=new THREE.ShaderMaterial({vertexShader:document.getElementById("noiseSpecksVertexShader").textContent,fragmentShader:document.getElementById("noiseSpecksFragmentShader").textContent,side:THREE.DoubleSide,uniforms:b,transparent:!0,depthTest:!1,depthWrite:!1}),C=new THREE.Mesh(u,T);return C.frustumCulled=!1,n.needsAspect.push(C),i.add(C),C}function addMainTextCloseButton(e,t,a,i,n){var o=.04,s=.06,r=0,u=.7;t.mainTextCloseButtonRangeStart.x=r-o,t.mainTextCloseButtonRangeStart.y=u-s,t.mainTextCloseButtonRangeEnd.x=r+o,t.mainTextCloseButtonRangeEnd.y=u+s;var l,d;l=getSpritesheetData(i.ui,"ui_close"),d=getUvsFromSpritesheetData(i.ui,l);var m=[10,10,0,10,10,0,10,10,0,10,10,0],c=[0,1,2,1,3,2],p=new THREE.BufferGeometry;p.name="MainTextCloseButtonGeo",p.addAttribute("position",new THREE.BufferAttribute(new Float32Array(m),3)),p.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(d),2)),p.setIndex(new THREE.BufferAttribute(new Uint16Array(c),1));var f=new THREE.ShaderMaterial({vertexShader:document.getElementById("uiTextureButtonVertexShader").textContent,fragmentShader:document.getElementById("uiTextureButtonFragmentShader").textContent,side:THREE.DoubleSide,uniforms:{map:{type:"t",value:n},alpha:{type:"f",value:0},aspect:{type:"f",value:a.aspect}},transparent:!0,depthTest:!1,depthWrite:!1});t.mainTextCloseButton=new THREE.Mesh(p,f),t.mainTextCloseButton.frustumCulled=!1,a.needsAspect.push(t.mainTextCloseButton),e.add(t.mainTextCloseButton)}function addSceneScripts(e,t){for(var a=0;t>a;a++)addScript("/scenes/"+a+"/setup.js",document.body),addScript("/scenes/"+a+"/animate.js",document.body);return t}function animateTransition(e,t,a){if(t.runningTransition){t.transitionTime+=e.delta,t.relTransitionTime=t.transitionTime/t.transitionTotalDuration,t.mapperdTransitionTime=easeInOutQuad(easeOutCubic(t.relTransitionTime));var i=.25;t.relTransitionTime<i?transitionShaker.setDistance(mapClamped(t.relTransitionTime,0,i,0,.015)):t.relTransitionTime<=.3&&transitionShaker.setDistance(mapClamped(t.relTransitionTime,i,.3,.015,0)),transitionShaker.step(e.delta),t.transitionMaterial.uniforms.xUvOffset.value=transitionShaker.getOffset().x,t.goingDown?(t.transitionMaterial.uniforms.yOffset.value=lerp(uiElements.transitionMaterialBottomEdgePosition,uiElements.transitionMaterialTopHiddenPosition,t.mapperdTransitionTime),t.relTransitionTime<i?(t.transitionMaterial.uniforms.yOffset.value<2*uiElements.transitionMaterialBottomEdgePosition?t.transitionToSceneOffset=t.transitionMaterial.uniforms.yOffset.value:a.uniforms.yOffset.value=t.transitionMaterial.uniforms.yOffset.value-t.transitionToSceneOffset,e.additionalYPos=mapClamped(t.transitionMaterial.uniforms.yOffset.value,.31,1.4,0,.5)):(a.uniforms.yOffset.value=mapClamped(t.transitionMaterial.uniforms.yOffset.value,6.5,7,-2,0),e.additionalYPos=mapClamped(t.transitionMaterial.uniforms.yOffset.value,6.35,9.5,-1,0))):(t.transitionMaterial.uniforms.yOffset.value=lerp(uiElements.transitionMaterialTopEdgePosition,uiElements.transitionMaterialBottomHiddenPosition,t.mapperdTransitionTime),t.relTransitionTime<i?(a.uniforms.yOffset.value=mapClamped(t.transitionMaterial.uniforms.yOffset.value,6,8,-2,0),e.additionalYPos=mapClamped(t.transitionMaterial.uniforms.yOffset.value,6.5,9,-.8,0)):(a.uniforms.yOffset.value=mapClamped(t.transitionMaterial.uniforms.yOffset.value,.8,2.7,0,2),e.additionalYPos=mapClamped(t.transitionMaterial.uniforms.yOffset.value,.015,.77,0,1))),!t.switchedScenes&&t.relTransitionTime>i&&(e.audioManager.stopSceneSounds(e.sceneId),e.usesMouse&&(e.uiElements.pointer.visible=!0),t.switchedScenes=!0,e.sceneId=t.nextScene,e.sceneTime=0,sceneContainer.firstRun[e.sceneId](e,e.sceneData[e.sceneId],!1),e.lockMouse=!1,e.uiElements.uiMousePos.x=map(e.mousePos.x,0,1,-1,1),e.uiElements.uiMousePos.y=map(e.mousePos.y,0,1,1,-1),e.uiYPosOffset=0,e.uiZPosOffset=0,e.scenesMaterial.uniforms.brightness.value=0,e.scenesMaterial.uniforms.brightnessMultiplier.value=1,e.sceneCamera.position.x=mapClamped(e.aspect,0,1.2,e.cameraAspectOffsets[e.sceneId],0),e.navigationController.setCurrentNavIndex(e.sceneId),e.navigationController.updateNav(),resetSceneShaker(),hidePositionedDivs(),e.sceneTextsContainer.className="quickFadeOut"),t.relTransitionTime>=.4&&((sceneContainer.hasShownText[t.nextScene]||"de"!==uiElements.lang)&&showHeadText(!0),e.noiseSpecks.visible=!0,e.showLargeNoiseSpecks[t.nextScene]&&(e.largeNoiseSpecks.visible=!0),e.sceneTextsContainer.className="quickFadeIn"),t.relTransitionTime>=.6&&(sceneContainer.hasShownText[t.nextScene]||"de"!==uiElements.lang||(showMainText(!0),sceneContainer.hasShownText[t.nextScene]=!0)),t.relTransitionTime>=.8&&(a.uniforms.yOffset.value=0,t.previousScene=t.nextScene,a.uniforms.blurAmount.value=0,e.uiYPosOffset=0,e.uiZPosOffset=0),t.relTransitionTime>=.92&&(e.additionalYPos=0,t.runningTransition=!1,e.navigationController.setTransitionIsAnimating(!1),hideHeadText())}}function animateUI(e,t,a){if(a.pointer.material.uniforms.pos.value.x=a.uiMousePos.x,a.pointer.material.uniforms.pos.value.y=a.uiMousePos.y,t.uiActive){e.usesMouse?e.uiYPosOffset=lerp(e.uiYPosOffset,mapClamped(a.uiMousePos.y,a.mouseTransitionYRange.b,a.mouseTransitionYRange.t,1,-1),10*e.delta):e.uiYPosOffset=lerp(e.uiYPosOffset,mapClamped(a.uiMousePos.y,a.mouseTransitionYRange.b,a.mouseTransitionYRange.t,-1,1),10*e.delta),e.uiZPosOffset=lerp(e.uiZPosOffset,-1,4*e.delta),a.pointer.material.uniforms.pos.value.x=a.mousePosTransitionStart.x,a.pointer.material.uniforms.pos.value.y=clamp(a.uiMousePos.y,a.mouseTransitionYRange.b,a.mouseTransitionYRange.t),a.pointer.material.uniforms.innerSize.value=lerp(a.pointer.material.uniforms.innerSize.value,uiConfig.pointerClickedInner,16*e.delta),a.pointer.material.uniforms.outerSize.value=lerp(a.pointer.material.uniforms.outerSize.value,uiConfig.pointerClickedOuter,14.5*e.delta),a.pointer.material.uniforms.alpha.value=lerp(a.pointer.material.uniforms.alpha.value,uiConfig.pointerClickedAlpha,12*e.delta);var i=mapClamped(a.uiMousePos.y,a.mouseTransitionYRange.b,a.mouseTransitionYRange.t,uiConfig.transitionCirclesSmall,uiConfig.transitionCirclesBig);a.topCircle.material.uniforms.innerSize.value=lerp(a.topCircle.material.uniforms.innerSize.value,i,4*e.delta),a.topCircle.material.uniforms.outerSize.value=lerp(a.topCircle.material.uniforms.outerSize.value,i,4*e.delta);var n=mapClamped(a.uiMousePos.y,a.mouseTransitionYRange.b,a.mouseTransitionYRange.t,uiConfig.transitionCirclesBig,uiConfig.transitionCirclesSmall);a.bottomCircle.material.uniforms.innerSize.value=lerp(a.bottomCircle.material.uniforms.innerSize.value,n,3*e.delta),a.bottomCircle.material.uniforms.outerSize.value=lerp(a.bottomCircle.material.uniforms.outerSize.value,n,3*e.delta),t.runningTransition||(a.toTopCircle=mapClamped(a.uiMousePos.y,a.mousePosTransitionStart.y,a.mouseTransitionYRange.t,0,1),a.toBottomCircle=mapClamped(a.uiMousePos.y,a.mouseTransitionYRange.b,a.mousePosTransitionStart.y,1,0),a.topCircle.material.uniforms.pos.value.y=lerp(a.topCircle.material.uniforms.pos.value.y,lerp(a.mouseTransitionYRange.t,a.mouseTransitionYRange.t-uiConfig.transitionCirclesYMouseClosingDistance,a.toTopCircle),10*e.delta),a.bottomCircle.material.uniforms.pos.value.y=lerp(a.bottomCircle.material.uniforms.pos.value.y,lerp(a.mouseTransitionYRange.b,a.mouseTransitionYRange.b+uiConfig.transitionCirclesYMouseClosingDistance,a.toBottomCircle),10*e.delta),t.canGoDown&&a.toBottomCircle>0?(t.transitionMaterial.uniforms.frame.value!==e.sceneId&&(t.transitionMaterial.uniforms.frame.value=e.sceneId),t.transitionMaterial.uniforms.yOffset.value=mapClamped(a.toBottomCircle,.1,.8,a.transitionMaterialBottomHiddenPosition,a.transitionMaterialBottomEdgePosition)):t.canGoUp&&(t.transitionMaterial.uniforms.frame.value!==e.sceneId-1&&(t.transitionMaterial.uniforms.frame.value=e.sceneId-1),t.transitionMaterial.uniforms.yOffset.value=mapClamped(a.toTopCircle,.1,.8,a.transitionMaterialTopHiddenPosition,a.transitionMaterialTopEdgePosition))),a.uiMousePos.y<a.bottomCircle.material.uniforms.pos.value.y+uiConfig.transitionStartDistance?e.usesMouse?goToNextScene():goToPreviousScene():a.uiMousePos.y>a.topCircle.material.uniforms.pos.value.y-uiConfig.transitionStartDistance&&(e.usesMouse?goToPreviousScene():goToNextScene())}else e.uiYPosOffset=lerp(e.uiYPosOffset,0,.4*e.delta),e.uiZPosOffset=lerp(e.uiZPosOffset,0,2*e.delta),t.transitionMaterial.uniforms.yOffset.value=0,e.scenesMaterial.uniforms.yOffset.value=lerp(e.scenesMaterial.uniforms.yOffset.value,0,20*e.delta),a.pointerIsInsideActiveRange=a.uiMousePos.y>uiConfig.mouseValidYRange.b&&a.uiMousePos.y<uiConfig.mouseValidYRange.t,a.pointerIsInsideActiveRange?a.pointer.material.uniforms.alpha.value=lerp(a.pointer.material.uniforms.alpha.value,uiConfig.pointerNormalAlpha,10*e.delta):(a.pointer.material.uniforms.alpha.value=lerp(a.pointer.material.uniforms.alpha.value,uiConfig.pointerOutsideInteractionAlpha,9*e.delta),a.pointer.material.uniforms.innerSize.value=lerp(a.pointer.material.uniforms.innerSize.value,uiConfig.pointerOutsideInteractionInner,7*e.delta),a.pointer.material.uniforms.outerSize.value=lerp(a.pointer.material.uniforms.outerSize.value,uiConfig.pointerOutsideInteractionOuter,4.5*e.delta)),a.topCircle.material.uniforms.alpha.value=lerp(a.topCircle.material.uniforms.alpha.value,0,5*e.delta),a.topCircle.material.uniforms.alpha.value<.001&&(a.topCircle.visible=!1),a.bottomCircle.material.uniforms.alpha.value=lerp(a.bottomCircle.material.uniforms.alpha.value,0,5*e.delta),a.bottomCircle.material.uniforms.alpha.value<.001&&(a.bottomCircle.visible=!1),t.runningTransition||!a.pointerIsInsideActiveRange?t.goingDown?(a.bottomCircle.material.uniforms.innerSize.value=lerp(a.bottomCircle.material.uniforms.innerSize.value,uiConfig.transitionCirclesSelectedSize,3*e.delta),a.bottomCircle.material.uniforms.outerSize.value=lerp(a.bottomCircle.material.uniforms.outerSize.value,uiConfig.transitionCirclesSelectedSize,3*e.delta)):(a.topCircle.material.uniforms.innerSize.value=lerp(a.topCircle.material.uniforms.innerSize.value,uiConfig.transitionCirclesSelectedSize,4*e.delta),a.topCircle.material.uniforms.outerSize.value=lerp(a.topCircle.material.uniforms.outerSize.value,uiConfig.transitionCirclesSelectedSize,4*e.delta)):e.forceClickedPointer||(a.pointer.material.uniforms.innerSize.value=lerp(a.pointer.material.uniforms.innerSize.value,uiConfig.pointerNormalInner,17*e.delta),a.pointer.material.uniforms.outerSize.value=lerp(a.pointer.material.uniforms.outerSize.value,uiConfig.pointerNormalOuter,17*e.delta));e.forceClickedPointer&&(a.pointer.material.uniforms.innerSize.value=lerp(a.pointer.material.uniforms.innerSize.value,uiConfig.pointerClickedInner,16*e.delta),a.pointer.material.uniforms.outerSize.value=lerp(a.pointer.material.uniforms.outerSize.value,uiConfig.pointerClickedOuter,14.5*e.delta))}function configureAnimatedSpriteGeometry(e,t,a,i){recursivlyUpdateAnimatedSprites(e,a,t,i)}function recursivlyUpdateAnimatedSprites(e,t,a,i){for(var n=0,o=e.children.length;o>n;n++){if(e.children[n].userData.animatedSprite){var s,r=new THREE.BufferGeometry,u=[],l=[],d=[],m=[],c=[],p=!1;"undefined"!=typeof e.children[n].userData.storeNormalizedUVs&&e.children[n].userData.storeNormalizedUVs&&(p=!0);for(var f=0,h=e.children[n].userData.numFrames;h>f;f++){s=e.children[n].userData.baseName+padString(f.toString(),"0",e.children[n].userData.numberPadding);for(var g=getPolygonGeometry(e.children[n],t,s),y=l.length/3,v=0,S=g.index.array.length;S>v;v++)m.push(y+g.index.array[v]);for(v=0,S=g.attributes.position.array.length;S>v;v++)l.push(g.attributes.position.array[v]);for(v=0,S=g.attributes.uv.array.length;S>v;v++)d.push(g.attributes.uv.array[v]);for(v=0,S=g.attributes.position.array.length/3;S>v;v++)u.push(f);if(p){var D=getPolygonSpriteNormalizedUvs(t,s);for(v=0,S=D.length;S>v;v++)c.push(D[v])}}r.addAttribute("position",new THREE.BufferAttribute(new Float32Array(l),3)),r.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(d),2)),r.addAttribute("frameIndex",new THREE.BufferAttribute(new Float32Array(u),1)),p&&r.addAttribute("normalizedUv",new THREE.BufferAttribute(new Float32Array(c),2)),r.setIndex(new THREE.BufferAttribute(new Uint16Array(m),1)),e.children[n].geometry=r;var x={map:{type:"t",value:a},frame:{type:"f",value:0},frameUnlooped:{type:"f",value:0},numFrames:{type:"f",value:e.children[n].userData.numFrames},speed:{type:"f",value:e.children[n].userData.speed},loopRestart:{type:"f",value:0}};"ShaderMaterial"===e.children[n].material.type&&(x=e.children[n].material.uniforms,x.map.value=a);var b=new THREE.ShaderMaterial({vertexShader:document.getElementById("animatedSpriteVertexShader").textContent,fragmentShader:document.getElementById("animatedSpriteFragmentShader").textContent,side:THREE.DoubleSide,uniforms:x,transparent:!0});e.children[n].material=b,"undefined"!=typeof e.children[n].userData.numWaitFrames&&(b.uniforms.numFrames.value+=e.children[n].userData.numWaitFrames),"undefined"==typeof updateData.animatedSprites[i]&&(updateData.animatedSprites[i]=[],updateData.animatedSpritesPingPong[i]=[],updateData.animatedSpritesCustomRestart[i]=[],updateData.animatedSpritesSoundTriggers[i]=[]),"undefined"!=typeof e.children[n].userData.pingPong&&e.children[n].userData.pingPong?updateData.animatedSpritesPingPong[i].push(b):"undefined"!=typeof e.children[n].userData.loopRestart?(b.uniforms.loopRestart.value=e.children[n].userData.loopRestart,updateData.animatedSpritesCustomRestart[i].push(b)):updateData.animatedSprites[i].push(b),"undefined"!=typeof e.children[n].userData.triggerSoundName&&updateData.animatedSpritesSoundTriggers[i].push({sound:e.children[n].userData.triggerSoundName,frame:e.children[n].userData.triggerSoundFrame,material:b,wasTriggered:!1})}recursivlyUpdateAnimatedSprites(e.children[n],t,a,i)}}function configureHoriontalWobblers(e,t,a,i){recursivlyUpdateHoriontalWobblers(e,a,t,i)}function recursivlyUpdateHoriontalWobblers(e,t,a,i){for(var n=0,o=e.children.length;o>n;n++){if(e.children[n].userData.horizontalWobble){e.children[n].visible=!0;var s=new THREE.ShaderMaterial({uniforms:{time:{type:"f",value:0},mouseVelocityAnim:{type:"f",value:0},noiseStartOffset:{type:"f",value:200*Math.random()},topNoiseScale:{type:"f",value:e.children[n].userData.topNoiseScale},topNoiseSpeed:{type:"f",value:e.children[n].userData.topNoiseSpeed},topNoiseOffset:{type:"f",value:e.children[n].userData.topNoiseOffset},bottomNoiseScale:{type:"f",value:e.children[n].userData.bottomNoiseScale},bottomNoiseSpeed:{type:"f",value:e.children[n].userData.bottomNoiseSpeed},bottomNoiseOffset:{type:"f",value:e.children[n].userData.bottomNoiseOffset},map:{type:"t",value:a}},vertexShader:document.getElementById("horizontalWobblerVertexShader").textContent,fragmentShader:document.getElementById("horizontalWobblerFragmentShader").textContent,side:THREE.DoubleSide,transparent:!0});"undefined"==typeof updateData.geometryWobblers[i]&&(updateData.geometryWobblers[i]=[]),updateData.geometryWobblers[i].push(s),e.children[n].geometry=getPolygonGeometry(e.children[n],t);for(var r=getPolygonDataFromSpritesheet(t,e.children[n].userData.textureName),u=[],l=0,d=3*r.numVertices;d>l;l+=3)u.push(Math.max(0,r.positions[l+1]-.05));e.children[n].geometry.addAttribute("isTop",new THREE.BufferAttribute(new Float32Array(u),1)),e.children[n].geometry.needsUpdate=!0,e.children[n].material=s,e.children[n].material.needsUpdate=!0}recursivlyUpdateHoriontalWobblers(e.children[n],t,a,i)}}function configureMainText(e,t,a,i,n){e.mainTextCanvas=document.createElement("canvas"),e.mainTextCanvas.id="mainTextCanvas",e.mainTextCanvasContext=e.mainTextCanvas.getContext("2d"),document.body.appendChild(e.mainTextCanvas),e.headTextCanvas=document.createElement("canvas"),e.headTextCanvas.id="headTextCanvas",e.headTextCanvasContext=e.headTextCanvas.getContext("2d"),document.body.appendChild(e.headTextCanvas);var o=new THREE.TextureLoader(n);o.load("images/mainTextMask.png",function(t){t.wrapS=THREE.MirroredRepeatWrapping,t.wrapT=THREE.MirroredRepeatWrapping;var n=mapClamped(a.aspect,1.3,2,0,.25);window.innerWidth>700&&(n=0);var o=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:null},alphaMap:{type:"t",value:t},xScale:{type:"f",value:Math.min(window.innerHeight/window.innerWidth,1)+n},yScale:{type:"f",value:Math.min(window.innerWidth/window.innerHeight,1)+n*a.aspect},yOffset:{type:"f",value:0},noiseOffset:{type:"f",value:200*Math.random()},alpha:{type:"f",value:-.5},modAlpha:{type:"f",value:0},xDirection:{type:"f",value:0},yDirection:{type:"f",value:0}},vertexShader:document.getElementById("fadedtextVertexShader").textContent,fragmentShader:document.getElementById("fadedtextFragmentShader").textContent,transparent:!0,depthTest:!1,depthWrite:!1,blending:THREE.AdditiveBlending}),s=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:null},alphaMap:{type:"t",value:t},xScale:{type:"f",value:Math.min(window.innerHeight/window.innerWidth,1)+n},yScale:{type:"f",value:Math.min(window.innerWidth/window.innerHeight,1)+n*a.aspect},yOffset:{type:"f",value:0},noiseOffset:{type:"f",value:200*Math.random()},alpha:{type:"f",value:-.5},modAlpha:{type:"f",value:0},xDirection:{type:"f",value:.1},yDirection:{type:"f",value:.5}},vertexShader:document.getElementById("fadedtextVertexShader").textContent,fragmentShader:document.getElementById("fadedtextFragmentShader").textContent,transparent:!0,depthTest:!1,depthWrite:!1,blending:THREE.AdditiveBlending});a.textNoiseUpdates.push(o),a.textNoiseUpdates.push(s),e.headTextMesh=new THREE.Mesh(getFullScreenQuad(.05,.55),s),e.mainTextMesh=new THREE.Mesh(getFullScreenQuad(-.55,-.05),o);for(var r=0,u=3*e.mainTextMesh.geometry.attributes.position.count;u>r;r++)e.mainTextMesh.geometry.attributes.position.array[r]*=.8,e.headTextMesh.geometry.attributes.position.array[r]*=.8;e.mainTextMesh.frustumCulled=!1,i.add(e.mainTextMesh),e.headTextMesh.frustumCulled=!1,i.add(e.headTextMesh),runTextCanvasResize();var l=new THREE.Texture(e.mainTextCanvas);l.generateMipmaps=!1,l.magFilter=THREE.LinearFilter,l.minFilter=THREE.LinearFilter,l.needsUpdate=!0;var d=new THREE.Texture(e.headTextCanvas);d.generateMipmaps=!1,d.magFilter=THREE.LinearFilter,d.minFilter=THREE.LinearFilter,d.needsUpdate=!0,o.uniforms.map.value=l,o.needsUpdate=!0,s.uniforms.map.value=d,s.needsUpdate=!0})}function runTextCanvasResize(){updateMainCanvasSize(uiElements,uiConfig,nearestPow2(Math.min(window.innerWidth*window.devicePixelRatio*uiConfig.mainTextMeshRelHeight,window.innerHeight*window.devicePixelRatio*uiConfig.mainTextMeshRelHeight)))}function updateMainCanvasSize(e,t,a){null!==e.mainTextCanvas&&(e.mainTextCanvas.width=a,e.mainTextCanvas.height=a/4,e.mainTextCanvasContext.fillStyle="#FFF",e.mainTextCanvas.style.height="1px",e.headTextCanvas.width=a,e.headTextCanvas.height=a/4,e.headTextCanvasContext.fillStyle="#FFF",e.headTextCanvas.style.height="1px",updateTextCanvases(e,e.currentMainTextTitle,e.currentMainText),null!==e.mainTextMesh.material.uniforms.map.value&&(e.mainTextMesh.material.uniforms.map.value.needsUpdate=!0),null!==e.headTextMesh.material.uniforms.map.value&&(e.headTextMesh.material.uniforms.map.value.needsUpdate=!0))}function configureNoiseFadedTexture(e,t,a,i){for(var n=0,o=e.children.length;o>n;n++)if(e.children[n].userData.noiseFadedTexture){e.children[n].visible=!0;var s=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:t},time:{type:"f",value:200*Math.random()},fadeNoiseScale:{type:"f",value:e.children[n].userData.fadeNoiseScale},fadeNoiseSpeed:{type:"f",value:e.children[n].userData.fadeNoiseSpeed},fadeNoiseClampBottom:{type:"f",value:e.children[n].userData.fadeNoiseClampBottom},fadeNoiseClampTop:{type:"f",value:e.children[n].userData.fadeNoiseClampTop},fadeNoiseMultiplier:{type:"f",value:e.children[n].userData.fadeNoiseMultiplier},numTextureRepeatX:{type:"f",value:e.children[n].userData.numTextureRepeatX},numTextureRepeatY:{type:"f",value:e.children[n].userData.numTextureRepeatY},repeatEdgeBSFadeOut:{type:"f",value:e.children[n].userData.repeatEdgeBSFadeOut},outColor:{type:"f",value:e.children[n].userData.outColor},fadeOutY:{type:"f",value:e.children[n].userData.fadeOutY},fadeOutYMin:{type:"f",value:e.children[n].userData.fadeOutYMin},fadeOutYMax:{type:"f",value:e.children[n].userData.fadeOutYMax},uvStart:{type:"2fv",value:[0,0]},uvSize:{type:"2fv",value:[1,1]}},vertexShader:document.getElementById("noiseFadedTextureVertexShader").textContent,fragmentShader:document.getElementById("noiseFadedTextureFragmentShader").textContent,side:THREE.DoubleSide,transparent:!0});"undefined"==typeof updateData.noiseFadedTextures[i]&&(updateData.noiseFadedTextures[i]=[]),updateData.noiseFadedTextures[i].push(s),e.children[n].geometry=getPolygonGeometry(e.children[n],a),polygonUvData=getPolygonUvFrameFromSpritesheet(a,e.children[n].userData.textureName),s.uniforms.uvStart.value=[polygonUvData.uvStart.x,polygonUvData.uvStart.y],s.uniforms.uvSize.value=[polygonUvData.uvSize.w,polygonUvData.uvSize.h],e.children[n].geometry.needsUpdate=!0,e.children[n].material=s,e.children[n].material.needsUpdate=!0}}function configureParticlesAndClouds(e,t,a,i){recursivlyUpdateParticlesClouds(e,a,t,i)}function recursivlyUpdateParticlesClouds(e,t,a,i){for(var n=0,o=e.children.length;o>n;n++){if(e.children[n].userData.cloudNoise){e.children[n].visible=!0;var s=new THREE.ShaderMaterial({uniforms:{cloudScale:{type:"f",value:e.children[n].userData.cloudScale},cloudSpeed:{type:"f",value:e.children[n].userData.cloudSpeed},cloudMoveSpeed:{type:"f",value:0},displaceAmount:{type:"f",value:e.children[n].userData.displaceAmount},offset:{type:"f",value:999.9*Math.random()},time:{type:"f",value:2},aspect:{type:"f",value:e.children[n].scale.x/e.children[n].scale.y},color:{type:"f",value:e.children[n].userData.cloudColor},alpha:{type:"f",value:e.children[n].userData.cloudAlpha},map:{type:"t",value:a},uvStart:{type:"2fv",value:[0,0]},uvSize:{type:"2fv",value:[1,1]},fade:{type:"f",value:1}},vertexShader:document.getElementById("cloudNoiseVertexShader").textContent,fragmentShader:document.getElementById("cloudNoiseFragmentShader").textContent,side:THREE.DoubleSide,transparent:!0});e.children[n].userData.additiveCloud&&(s.blending=THREE.AdditiveBlending),"undefined"==typeof updateData.cloudNoiseMaterials[i]&&(updateData.cloudNoiseMaterials[i]=[]),"undefined"==typeof e.children[n].userData.cloudMoveSpeed&&(s.uniforms.cloudMoveSpeed.value=e.children[n].userData.cloudMoveSpeed),updateData.cloudNoiseMaterials[i].push(s),e.children[n].geometry=getPolygonGeometry(e.children[n],t,e.children[n].userData.textureName);var r=[e.children[n].geometry.attributes.uv.array[4],e.children[n].geometry.attributes.uv.array[5]],u=[e.children[n].geometry.attributes.uv.array[2]-e.children[n].geometry.attributes.uv.array[4],e.children[n].geometry.attributes.uv.array[3]-e.children[n].geometry.attributes.uv.array[5]];s.uniforms.uvStart.value=r,s.uniforms.uvSize.value=u,e.children[n].material=s,e.children[n].material.needsUpdate=!0}if(e.children[n].userData.particles){e.children[n].material.visible=!1;var l=new BufferParticles(e.children[n],e.children[n].userData,a,t);"undefined"==typeof updateData.particleSystems[i]&&(updateData.particleSystems[i]=[]),updateData.particleSystems[i].push(l)}recursivlyUpdateParticlesClouds(e.children[n],t,a,i)}}function configureTextureControlledOverExposure(e,t,a,i){for(var n=0,o=e.children.length;o>n;n++)if(e.children[n].userData.textureControlledOverExposure){e.children[n].visible=!0;var s=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:t},time:{type:"f",value:200*Math.random()},exposureCycleSpeed:{type:"f",value:e.children[n].userData.exposureCycleSpeed},interactionExposureCycleSpeed:{type:"f",value:e.children[n].userData.interactionExposureCycleSpeed},exposureAmount:{type:"f",value:e.children[n].userData.exposureAmount},additionalWidth:{type:"f",value:0}},vertexShader:document.getElementById("textureControlledOverExposureVertexShader").textContent,fragmentShader:document.getElementById("textureControlledOverExposureFragmentShader").textContent,side:THREE.DoubleSide,transparent:!0});"undefined"==typeof updateData.textureControllerOverExposures[i]&&(updateData.textureControllerOverExposures[i]=[]),updateData.textureControllerOverExposures[i].push(s),e.children[n].geometry=getPolygonGeometry(e.children[n],a),e.children[n].geometry.needsUpdate=!0,e.children[n].material=s,e.children[n].material.needsUpdate=!0}}function configureTransitions(e,t,a,i,n,o,s,r){for(var u,l,d=new THREE.BufferGeometry,m=getFullScreenQuad(n,o,1.1),c=[],p=[],f=[],h=[],g=0,y=Object.keys(s.transition.frames).length;y>g;g++){u=getSpritesheetData(s.transition,g.toString()),l=getUvsFromSpritesheetData(s.transition,u);for(var v=p.length/3,S=0,D=m.index.array.length;D>S;S++)h.push(v+m.index.array[S]);for(S=0,D=m.attributes.position.array.length;D>S;S++)p.push(m.attributes.position.array[S]);for(S=0,D=l.length;D>S;S++)f.push(l[S]);for(S=0;4>S;S++)c.push(g)}d.addAttribute("position",new THREE.BufferAttribute(new Float32Array(p),3)),d.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(f),2)),d.addAttribute("frameIndex",new THREE.BufferAttribute(new Float32Array(c),1)),d.setIndex(new THREE.BufferAttribute(new Uint16Array(h),1)),e.material.uniforms.map.value=r,e.geometry=d}function getFullScreenQuad(e,t,a){var i,n=new THREE.BufferGeometry;i="undefined"!=typeof a?new THREE.BufferAttribute(new Float32Array([-a,e,0,a,e,0,-a,t,0,a,t,0]),3):new THREE.BufferAttribute(new Float32Array([-1,e,0,1,e,0,-1,t,0,1,t,0]),3),n.addAttribute("position",i);var o=new THREE.BufferAttribute(new Float32Array([0,0,1,0,0,1,1,1]),2);n.addAttribute("uv",o);var s=new Uint16Array([0,1,2,1,3,2]);return n.setIndex(new THREE.BufferAttribute(s,1)),n}function goToScene(e,t,a,i){if(a.tutorialWasCompleted||(a.tutorialWasCompleted=!0,t.navigationController.hideStartTutorial()),i.goingDown=t.sceneId<e,0===t.sceneId&&null!==a.mouseshakeInstruction&&(a.mouseshakeInstruction.className="quickFadeOut",a.mouseshakeInstructionId=window.setTimeout(function(){a.mouseshakeInstruction.style.display="none",a.mouseshakeInstructionsWereShown=!0},1e3)),i.runningTransition===!1){i.uiActive=!1,i.runningTransition=!0,i.switchedScenes=!1,i.transitionTime=0,t.noiseSpecks.visible=!1,t.largeNoiseSpecks.visible=!1,t.audioManager.stopSceneSounds(t.sceneId),i.nextScene=e,t.navigationController.setTransitionIsAnimating(!0),quickFadeOutPositionedDivs(),t.forceClickedPointer=!1;var n;n=i.goingDown?e-1:e,i.transitionMaterial.uniforms.frame.value=n,t.audioManager.playTransition(n),t.lockMouse=!0,a.uiMousePos.x=a.mousePosTransitionStart.x,a.pointer.material.uniforms.innerSize.value=uiConfig.pointerClickedInner,a.pointer.material.uniforms.outerSize.value=uiConfig.pointerClickedOuter,i.goingDown?a.uiMousePos.y=a.bottomCircle.material.uniforms.pos.value.y:a.uiMousePos.y=a.topCircle.material.uniforms.pos.value.y}}function handleMouseMove(e){updateData.sceneData[0].showingTutorial&&(uiElements.pointer.visible=!0),updateData.mousePosAbs.x=e.clientX,updateData.mousePosAbs.y=e.clientY,updateData.mousePosOld.x=updateData.mousePos.x,updateData.mousePosOld.y=updateData.mousePos.y,updateData.mousePos.x=clamp(e.clientX/window.innerWidth,0,1),updateData.mousePos.y=clamp(e.clientY/window.innerHeight,0,1),updateData.mouseVelocity=clamp(Math.abs(updateData.mousePos.x-updateData.mousePosOld.x)+Math.abs(updateData.mousePos.y-updateData.mousePosOld.y),0,1),updateData.mouseXVelocity=updateData.mousePos.x-updateData.mousePosOld.x,updateData.mouseYVelocity=updateData.mousePos.y-updateData.mousePosOld.y,transitionData.uiActive||(updateData.mousePosCameraOffset.x=updateData.mousePos.x,updateData.mousePosCameraOffset.y=updateData.mousePos.y),updateData.lockMouse||(uiElements.uiMousePos.x=map(updateData.mousePos.x,0,1,-1,1),uiElements.uiMousePos.y=map(updateData.mousePos.y,0,1,1,-1))}function handleMouseDown(e){9===updateData.sceneId&&0===updateData.sceneData[9].currentStage&&updateData.sceneData[9].canHideTutorial&&(updateData.sceneData[9].tutorialDiv.className="fadeOut",updateData.sceneData[9].showingTutorial=!1),null!==updateData.scenesMouseDownHandlers[updateData.sceneId]&&updateData.scenesMouseDownHandlers[updateData.sceneId]()||(updateData.uiElements.tutorialWasCompleted||!updateData.usesMouse)&&startTransitionUi()}function handleFirstInteraction(){Howler.ctx.resume(),document.body.removeEventListener("mousedown",handleFirstInteraction)}function handleAcceleration(e){updateData.mouseVelocity-=updateData.accelerationDelta,updateData.accelerationDelta=e.acceleration.x*e.acceleration.x+e.acceleration.y*e.acceleration.y+e.acceleration.z*e.acceleration.z,updateData.accelerationDelta>1.5?uiElements.showMainText?(updateData.shakeCounter=lerp(updateData.shakeCounter,1,3*updateData.delta),updateData.shakeCounter>.95&&(hideMainText(),updateData.navigationController.forceCloseMainTextUi())):(updateData.accelerationDelta=.5,updateData.mouseVelocity+=updateData.accelerationDelta,updateData.mouseVelocity=Math.min(1,updateData.mouseVelocity)):(updateData.accelerationDelta=0,updateData.shakeCounter=lerp(updateData.shakeCounter,0,3*updateData.delta))}function handleMouseLeave(e){stopTransitionUi(),updateData.mouseVelocity=0,updateData.lockMouse=!1,null!==updateData.scenesMouseUpHandlers[updateData.sceneId]&&updateData.scenesMouseUpHandlers[updateData.sceneId](),updateData.forceClickedPointer=!1}function handleMouseUp(e){null!==updateData.scenesMouseUpHandlers[updateData.sceneId]&&updateData.scenesMouseUpHandlers[updateData.sceneId](),updateData.forceClickedPointer=!1,stopTransitionUi()}function handleKeyDown(e){38===e.keyCode?9===updateData.sceneId&&updateData.sceneData[9].currentStage>0||goToPreviousScene():40===e.keyCode&&updateData.sceneId>0&&goToNextScene()}function handleTouchStart(e){uiElements.pointer.visible=!1,9===updateData.sceneId&&0===updateData.sceneData[9].currentStage&&updateData.sceneData[9].canHideTutorial&&(updateData.sceneData[9].tutorialDiv.className="fadeOut",updateData.sceneData[9].showingTutorial=!1),touches.touchStart(e,updateData,uiElements,uiConfig),null!==updateData.scenesMouseDownHandlers[updateData.sceneId]&&updateData.scenesMouseDownHandlers[updateData.sceneId]()||(updateData.uiElements.tutorialWasCompleted||!updateData.usesMouse)&&(updateData.touchTransitionTimeoutID=window.setTimeout(startTransitionUi,uiConfig.touchTransitionMinHold))}function handleTouchMove(e){uiElements.pointer.visible=!1,e.preventDefault(),touches.touchMove(e,updateData,uiElements,uiConfig)}function handleTouchEnd(e){uiElements.pointer.visible=!1,window.clearTimeout(updateData.touchTransitionTimeoutID),touches.touchEnd(e,updateData,uiElements,uiConfig),null!==updateData.scenesMouseUpHandlers[updateData.sceneId]&&updateData.scenesMouseUpHandlers[updateData.sceneId](),stopTransitionUi()}function hidePositionedDivs(){updateData.sceneData[9].taglineDiv.className="hidden",updateData.sceneData[9].tutorialDiv.className="hidden"}function quickFadeOutPositionedDivs(){updateData.sceneData[9].taglineDiv.className="quickFadeOut",
updateData.sceneData[9].tutorialDiv.className="quickFadeOut"}function loadMainTexts(e){loadJSON("mainTexts.json",function(t){var a=JSON.parse(t),i=Object.keys(a),n=(Object.keys(a).length,Object.keys(a[i[0]].sceneCopy).length);e.hasText=new Array(n),e.data=a;for(var o=0;n>o;o++)e.hasText[o]="undefined"!=typeof a[i[0]].sceneCopy[o].title;setupAll()})}function loadSounds(e,t,a,i,n,o,s,r){function u(){n++,n===o&&r.setupAll()}e.loadingMusic=new Howl({urls:["audio/falter_Web_Preloader_Music_Pad.ogg","audio/falter_Web_Preloader_Music_Pad.mp3"],autoplay:!0,loop:!0,volume:.9});var l=["falter_Web_Preloader_FX01","falter_Web_Preloader_FX02","falter_Web_Preloader_FX03","falter_Web_Preloader_FX04"],d=["ui_navHover","ui_quickSceneChange","ui_tutorialCircleHover","ui_tutorialComplete","ui_navCloseHover"];a.numSounds=l.length;for(var m=0,c=a.numSounds;c>m;m++)a.sounds.push(new Howl({urls:["audio/"+l[m]+".ogg","audio/"+l[m]+".mp3"],autoplay:!1,loop:!1,volume:.9}));for(m=0,c=d.length;c>m;m++)i[d[m]]=new Howl({urls:["audio/"+d[m]+".ogg","audio/"+d[m]+".mp3"],autoplay:!1,loop:!1,volume:.9});var p=["falter_Web_Szene00_FX","falter_Web_Szene01_FX","falter_Web_Szene02_FX","falter_Web_Szene03_FX","falter_Web_Szene04_FX","falter_Web_Szene05_FX","falter_Web_Szene06_FX","falter_Web_Szene07_FX","falter_Web_Szene08_FX","falter_Web_Szene09_FX"],f=["falter_Web_Intro_Music","falter_Web_Intro_FX_Stern_kurz","falter_Web_Intro_FX_Stern_lang","falter_Web_Szene01_Music","falter_Web_Szene01_SD_Moped_BackCopy","moped-loop","moped-drive","moped-loopBack","moped-driveBack","falter_Web_Szene01_SD_Stadt","falter_Web_Szene02_Music","falter_Web_Szene02_SD_Feuer","falter_Web_Szene02_SD_Feuer2","falter_Web_Szene02_SD_Werfen","falter_Web_Szene03_Music","falter_Web_Szene03_SD_Hilfe","falter_Web_Szene03_SD_Klopfen","falter_Web_Szene03_SD_Klopfen2","falter_Web_Szene03_SD_Mobil1","falter_Web_Szene03_SD_Mobil2","falter_Web_Szene03_SD_Mobil3","falter_Web_Szene03_SD_Mobil4","falter_Web_Szene04_Music","falter_Web_Szene04_SD_Kettensaege","falter_Web_Szene05_Music","falter_Web_Szene05_SD_Marschieren","falter_Web_Szene06_Music","falter_Web_Szene06_SD_Tritt1","falter_Web_Szene07_Music","falter_Web_Szene07_SD_Maschine","szene07_huhn1","szene07_huhn2","falter_Web_Szene08_Music","falter_Web_Szene08_SD_Hunde","falter_Web_Szene08_SD_Kameras","falter_Web_Szene09_Music","falter_Web_Szene09_SD_Wirbelwind","wind-licht","end-wirbelwind-licht","falter_Web_Szene10_Music","falter_Web_Szene10_SD_Voegel"];for(o=p.length+f.length+2,m=0,c=p.length;c>m;m++)t[m]=new Howl({urls:["audio/"+p[m]+".ogg","audio/"+p[m]+".mp3"],autoplay:!1,loop:!1,volume:1,onload:u});for(m=0,c=f.length;c>m;m++)e[f[m]]=new Howl({urls:["audio/"+f[m]+".ogg","audio/"+f[m]+".mp3"],autoplay:!1,loop:!1,volume:.9,onload:u});e.endLoop=new Howl({urls:["audio/end-music-licht.ogg","audio/end-music-licht.mp3"],autoplay:!1,loop:!0,volume:.9,onload:function(){n++,n===o&&r.setupAll()}});var h=s;e.endStart=new Howl({urls:["audio/end-music-start-licht.ogg","audio/end-music-start-licht.mp3"],autoplay:!1,loop:!1,volume:.9,onload:function(){n++,n===o&&r.setupAll()},onend:function(){h.playSound("endLoop",9,1)}})}function loadTransitions(e,t,a,i,n,o,s,r){for(var u,l,d=new THREE.BufferGeometry,m=getFullScreenQuad(n,o,1.1),c=[],p=[],f=[],h=[],g=0,y=Object.keys(s.transition.frames).length;y>g;g++){u=getSpritesheetData(s.transition,g.toString()),l=getUvsFromSpritesheetData(s.transition,u);for(var v=p.length/3,S=0,D=m.index.array.length;D>S;S++)h.push(v+m.index.array[S]);for(S=0,D=m.attributes.position.array.length;D>S;S++)p.push(m.attributes.position.array[S]);for(S=0,D=l.length;D>S;S++)f.push(l[S]);for(S=0;4>S;S++)c.push(g-.5)}d.addAttribute("position",new THREE.BufferAttribute(new Float32Array(p),3)),d.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(f),2)),d.addAttribute("frameIndex",new THREE.BufferAttribute(new Float32Array(c),1)),d.setIndex(new THREE.BufferAttribute(new Uint16Array(h),1)),e.material.uniforms.map.value=r,e.geometry=d}function getLanguageStringObject(){return mainTextData.data[uiElements.lang]}function changeLanguage(e){uiElements.lang=e,9===updateData.sceneId&&2===updateData.sceneData[9].currentStage?updateTexts(10):updateTexts(),updatePositionedDivTexts()}function updatePositionedDivTexts(){for(var e=0,t=updateData.positionedDivTextUpdates.length;t>e;e++)updateData.positionedDivTextUpdates[e].div.innerText=mainTextData.data[uiElements.lang].navigationCopy[updateData.positionedDivTextUpdates[e].tag]}function getCurrentLanguage(){return uiElements.lang}function getCurrentTitle(){return uiElements.currentMainTextTitle}function jumpToScene(e){goToScene(e,updateData,uiElements,transitionData)}function getUpdateData(){return updateData}function onFinalSceneExit(){hidePositionedDivs()}function quickJumpToScene(e){updateData.navigationController.setCurrentNavIndex(e),updateData.navigationController.updateNav(),updateData.audioManager.instantStopAllSceneSounds(),sceneContainer.firstRun[e](updateData,updateData.sceneData[e],!0),updateData.sceneId=e,updateTexts(),playQuickSceneChange(),updateData.sceneTime=0,updateData.scenesMaterial.uniforms.brightness.value=0,updateData.scenesMaterial.uniforms.brightnessMultiplier.value=1,updateData.uiElements.pointer.visible=!0,updateData.quickJumpChangedScene=!0,resetSceneShaker(),updateData.forceClickedPointer=!1,hidePositionedDivs()}function goToPreviousScene(){!(updateData.sceneId>1)||9===updateData.sceneId&&updateData.sceneData[9].currentStage>0||updateData.preventSceneChanges||goToScene(updateData.sceneId-1,updateData,uiElements,transitionData)}function goToNextScene(){updateData.sceneId<numScenes-1&&!updateData.preventSceneChanges&&goToScene(updateData.sceneId+1,updateData,uiElements,transitionData)}function updateTexts(e){"undefined"==typeof e&&(e=updateData.sceneId),mainTextData.hasText[e]&&(uiElements.currentMainTextTitle=mainTextData.data[uiElements.lang].sceneCopy[e].title,uiElements.currentMainText=mainTextData.data[uiElements.lang].sceneCopy[e].text,updateTextCanvases(uiElements,uiElements.currentMainTextTitle,uiElements.currentMainText))}function stopTransitionUi(){transitionData.uiActive&&(transitionData.uiActive=!1)}function showHeadText(e,t){!uiElements.showHeadText&&mainTextData.hasText[updateData.sceneId]&&(t!==!0&&updateTexts(updateData.sceneId),e?(uiElements.headTextMesh.material.uniforms.yOffset.value=-.1,uiElements.headTextMesh.material.uniforms.modAlpha.value=0):uiElements.headTextMesh.material.uniforms.yOffset.value=0,uiElements.showHeadText=!0)}function hideHeadText(){uiElements.showHeadText&&(uiElements.showHeadText=!1,updateData.navigationController.setTransitionIsAnimating(!1))}function showMainText(e){updateData.skipMainTextZoom=e,e&&updateTexts(updateData.sceneId),uiElements.showMainText||!mainTextData.hasText[updateData.sceneId]||uiElements.showHeadText||(showHeadText(!1,!0),updateData.isMuted||updateData.isFadedOut||e||fadeDownAudio(),uiElements.showMainText=!0,updateData.mouseVelocityBuildUp=0,updateData.shakeCounter=0,updateData.sceneTextsContainer.className="quickFadeOut",9===updateData.sceneId&&updateData.sceneData[9].showingTutorial&&(updateData.sceneData[9].tutorialDiv.className="hidden"),"de"===uiElements.lang&&e&&(uiElements.sceneTitleInfo.style.display="none",updateData.navigationController.mainTextIsVisibleOverride(),updateData.navigationController.showCloseButton(),uiElements.chapterNav.classList.add("quickFadeOut")),updateData.preventSceneChanges=!0)}function hideMainText(){uiElements.showMainText&&(uiElements.showMainText=!1,updateData.mouseVelocityBuildUp=0,hideHeadText(),updateData.isMuted||updateData.isFadedOut||fadeInAudio(),updateData.sceneTextsContainer.className="fadeIn",updateData.preventSceneChanges=!1,"de"===uiElements.lang&&(uiElements.sceneTitleInfo.style.display="inline",updateData.navigationController.hideCloseButton(),9===updateData.sceneId&&0===updateData.sceneData[9].currentStage&&(updateData.sceneData[9].tutorialDiv.className="fadeIn",updateData.sceneData[9].showingTutorial=!0)),uiElements.chapterNav.style.display="inline",uiElements.chapterNav.classList.remove("quickFadeOut"),uiElements.chapterNav.classList.add("quickFadeIn"),uiElements.chapterNav.classList.add("quickFadeOut"),uiElements.chapterNav.classList.add("quickFadeIn"),uiElements.chapterNav.classList.remove("quickFadeOut"),uiElements.chapterNav.style.opacity=1)}function startTransitionUi(){!transitionData.runningTransition&&!transitionData.uiActive&&uiElements.uiMousePos.y>uiConfig.mouseValidYRange.b&&uiElements.uiMousePos.y<uiConfig.mouseValidYRange.t&&!uiElements.showMainText&&(transitionData.uiActive=!0,updateData.mousePosTransitionStart.x=updateData.mousePos.x,updateData.mousePosTransitionStart.y=updateData.mousePos.y,uiElements.mousePosTransitionStart.x=uiElements.uiMousePos.x,uiElements.mousePosTransitionStart.y=uiElements.uiMousePos.y,uiElements.mouseTransitionYRange.t=uiElements.mousePosTransitionStart.y+uiConfig.transitionCirclesYOffset,uiElements.mouseTransitionYRange.b=uiElements.mousePosTransitionStart.y-uiConfig.transitionCirclesYOffset,updateData.usesMouse||(uiElements.mouseTransitionYRange.t+=.4*uiConfig.transitionCirclesYOffset,uiElements.mouseTransitionYRange.b-=.4*uiConfig.transitionCirclesYOffset),uiElements.topCircle.material.uniforms.innerSize.value=0,uiElements.topCircle.material.uniforms.outerSize.value=0,uiElements.topCircle.material.uniforms.pos.value.x=uiElements.uiMousePos.x,uiElements.topCircle.material.uniforms.pos.value.y=uiElements.uiMousePos.y+uiConfig.transitionCirclesYOffset,uiElements.bottomCircle.material.uniforms.innerSize.value=0,uiElements.bottomCircle.material.uniforms.outerSize.value=0,uiElements.bottomCircle.material.uniforms.pos.value.x=uiElements.uiMousePos.x,uiElements.bottomCircle.material.uniforms.pos.value.y=uiElements.uiMousePos.y-uiConfig.transitionCirclesYOffset,updateData.sceneId>1?(updateData.usesMouse?uiElements.topCircle.visible=!0:uiElements.topCircle.visible=!1,transitionData.canGoUp=!0):transitionData.canGoUp=!1,updateData.sceneId<numScenes-1?(updateData.usesMouse?uiElements.bottomCircle.visible=!0:uiElements.bottomCircle.visible=!1,transitionData.canGoDown=!0):transitionData.canGoDown=!1,uiElements.topCircle.material.uniforms.alpha.value=uiConfig.transitionCirclesAlpha,uiElements.bottomCircle.material.uniforms.alpha.value=uiConfig.transitionCirclesAlpha)}function pauseExperience(){updateData.pause=!0,updateData.navigationController.hideCloseButton(),updateData.isMuted||updateData.isFadedOut||fadeDownAudio(),window.clearTimeout(uiElements.mouseshakeInstructionId),updateData.sceneTextsContainer.className="quickFadeOut",uiElements.headTextMesh.material.uniforms.alpha.value=1.25,updateData.quickJumpStartScene=updateData.sceneId,updateData.preventSceneChanges=!0}function resumeExperience(){updateData.pause=!1,updateData.isMuted||updateData.isFadedOut||fadeInAudio(),updateData.quickJumpStartScene!==updateData.sceneId?sceneContainer.hasShownText[updateData.sceneId]||"de"!==uiElements.lang?(showHeadText(!0),updateData.navigationController.setTransitionIsAnimating(!0,!0),hideHeadText()):(sceneContainer.hasShownText[updateData.sceneId]=!0,updateData.navigationController.setTransitionIsAnimating(!1),uiElements.sceneTitleInfo.style.display="none",uiElements.chapterNav.style.display="none",window.setTimeout(function(){updateData.navigationController.showCloseButton(),showMainText(!0)},600)):updateData.navigationController.setTransitionIsAnimating(!1),updateData.sceneTextsContainer.className="quickFadeIn",updateData.preventSceneChanges=!1}function overideUiparallax(e){updateData.uiYPosOffset=clamp(e,-1,1)}function showAboutPage(){window.clearTimeout(updateData.audioFadeTimeoutId),fadeOutAudio(),updateData.preventSceneChanges=!0}function hideAboutPage(){updateData.wasFadedOut||(updateData.audioFadeTimeoutId=window.setTimeout(fadeInAudio,800)),updateData.preventSceneChanges=!1}function canQuickJump(){return!updateData.isKillingPreviousSounds}function muteAudio(){updateData.wasMuted=Howler._muted,updateData.isMuted=!0,Howler.mute()}function unmuteAudio(){updateData.wasMuted||(updateData.isMuted=!1,Howler.unmute())}function fadeOutAudio(){updateData.wasFadedOut=updateData.isFadedOut,updateData.isFadedOut=!0,updateData.audioGoalVolume=0}function fadeInAudio(){updateData.wasFadedOut=!1,updateData.isFadedOut=!1,updateData.isFadedDown=!1,updateData.audioGoalVolume=uiConfig.maxVolume}function fadeDownAudio(){updateData.isFadedDown=!0,updateData.audioGoalVolume=.1}function resetSceneShaker(){updateData.sceneShaker.setOctaves(3),updateData.sceneShaker.setFrequency(.3),updateData.sceneShaker.setDistance(.4),resetNoiseSpecks()}function resetNoiseSpecks(){updateData.largeNoiseSpecks.material.uniforms.alpha.value=.3,updateData.largeNoiseSpecks.material.uniforms.scaler.value=1}function playNavHover(){}function playOpenedChapterSelection(){updateData.audioManager.playUISound("ui_openedChapterSelection")}function playQuickSceneChange(){updateData.audioManager.playUISound("ui_quickSceneChange")}function playTutorialCircleHover(){updateData.audioManager.playUISound("ui_tutorialCircleHover")}function playTutorialComplete(){updateData.audioManager.playUISound("ui_tutorialComplete")}function playCloseHover(){updateData.audioManager.playUISound("ui_navCloseHover")}function preloadScenes(){for(var e=0;e<numScenes;e++)renderer.render(sceneContainer.scenes[e],camera,scenesSmallerTexture,!0)}function onWindowResize(e){updateData.aspect=window.innerWidth/window.innerHeight,updateData.sceneCamera.fov=updateFOV(window.innerWidth/window.innerHeight,1.75,40,70),updateData.sceneCamera.aspect=updateData.aspect,updateData.sceneCamera.updateProjectionMatrix(),updateData.sceneCamera.position.x=mapClamped(updateData.aspect,0,1.2,updateData.cameraAspectOffsets[updateData.sceneId],0),renderer.setSize(window.innerWidth,window.innerHeight),scenesTexture.setSize(window.innerWidth,window.innerHeight),updateData.scenesMaterial.uniforms.xResolutionMod.value=1/window.innerWidth,updateData.scenesMaterial.uniforms.yResolutionMod.value=1/window.innerHeight;for(var t=0,a=updateData.needsAspect.length;a>t;t++)updateData.needsAspect[t].material.uniforms.aspect.value=updateData.aspect;if(finishedLoading&&(runTextCanvasResize(),transitionData.transitionMaterial.uniforms.aspect.value=window.innerWidth/window.innerHeight,smallerScreenSize={x:Math.floor(.1*window.innerWidth),y:Math.floor(.08*window.innerHeight)},scenesSmallerTexture.setSize(smallerScreenSize.x,smallerScreenSize.y),scenesBlurredTexture.setSize(smallerScreenSize.x,smallerScreenSize.y),blurredMaterial.uniforms.mapSize.value.x=1/smallerScreenSize.x,blurredMaterial.uniforms.mapSize.value.y=1/smallerScreenSize.y,null!==uiElements.mainTextMesh)){var i=mapClamped(updateData.aspect,1.3,2,0,.25);window.innerWidth>700&&(i=0),uiElements.mainTextMesh.material.uniforms.xScale.value=Math.min(window.innerHeight/window.innerWidth,1)+i,uiElements.mainTextMesh.material.uniforms.yScale.value=Math.min(window.innerWidth/window.innerHeight,1)+i*updateData.aspect,uiElements.headTextMesh.material.uniforms.xScale.value=Math.min(window.innerHeight/window.innerWidth,1)+i,uiElements.headTextMesh.material.uniforms.yScale.value=Math.min(window.innerWidth/window.innerHeight,1)+i*updateData.aspect}uiConfig.mouseValidYRange.b=mapClamped(updateData.aspect,1.58,5,-.6,0)}function runFullSetup(){for(var e=new THREE.ObjectLoader,t=JSON.parse(sceneContainer.spritesheetDataRaw),a=JSON.parse(sceneContainer.scenesDataRaw),i=0;i<numScenes;i++){var n=e.parse(a[i]);sceneContainer.scenes[i]=new THREE.Scene,sceneContainer.scenes[i].add(n),recursivlyUpdateObject(sceneContainer.scenes[i],t[i],sceneContainer.sceneTextures[i]),configureParticlesAndClouds(n.children[0],sceneContainer.sceneTextures[i],t[i],i),configureAnimatedSpriteGeometry(n.children[0],sceneContainer.sceneTextures[i],t[i],i),configureHoriontalWobblers(n.children[0],sceneContainer.sceneTextures[i],t[i],i),configureTextureControlledOverExposure(n.children[0],sceneContainer.sceneTextures[i],t[i],i),configureNoiseFadedTexture(n.children[0],sceneContainer.sceneTextures[i],t[i],i)}for(addMainTextCloseButton(scene,uiElements,updateData,t,uiElements.uiTexture),i=0;i<numScenes;i++)sceneContainer.setup[i](sceneContainer.scenes[i].children[0].children[0],updateData,updateData.sceneData[i],t[i]),renderer.render(sceneContainer.scenes[i],updateData.sceneCamera,scenesSmallerTexture,!0),i===updateData.sceneId&&sceneContainer.firstRun[updateData.sceneId](updateData,updateData.sceneData[updateData.sceneId]);loadTransitions(transitionData.transitionQuad,numScenes,updateData,loadingManager,-1,-1-uiConfig.transitionQuadHeight,t,transitionData.texture),configureMainText(uiElements,uiConfig,updateData,scene,loadingManager),updateData.noiseSpecks=addNoiseSpecks(.35,18,.4,scene,updateData,t.noiseSpecks,.1,sceneContainer.noiseSpecksTexture),updateData.largeNoiseSpecks=addNoiseSpecks(2.5,7,.3,scene,updateData,t.largeNoiseSpecks,.6,sceneContainer.largeNoiseSpecksTexture),updateData.largeNoiseSpecks.visible=!1,renderer.domElement.style.display="inline",updatePositionedDivTexts(),updateData.scenesMaterial.uniforms.alpha.value=-.4}function loadScenes(e,t,a,i,n,o,s){for(var r=0;t>r;r++){var u="setup"+r,l="firstRun"+r,d="animate"+r;e.setup[r]=window[u],e.firstRun[r]=window[l],e.animate[r]=window[d]}var m=new Array(t);for(r=0;t>r;r++)m[r]=new THREE.TextureLoader(i),m[r].load("images/"+r.toString()+".map.png",handleLoadedTexture)}function handleLoadedTexture(e){var t=e.image.src,a=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));a=a.replace(/\.map/g,""),sceneContainer.sceneTextures[a]=e,updateData.numScenesLoaded++,updateData.numScenesLoaded===numScenes&&updateData.setupAll()}function recursivlyUpdateObject(e,t,a){updateObject(e,t,a);for(var i=0,n=e.children.length;n>i;i++)recursivlyUpdateObject(e.children[i],t,a)}function updateObject(e,t,a){if(!("undefined"==typeof e.geometry||"PlaneGeometry"!==e.geometry.type||""===e.name||"undefined"==typeof e.userData||"undefined"==typeof e.userData.textureName||e.userData.animatedSprite||e.userData.horizontalWobble||e.userData.textureControlledOverExposure||e.userData.noiseFadedTexture)){e.geometry=getPolygonGeometry(e,t,e.userData.textureName);var i={map:{type:"t",value:a},noiseOffset:{type:"f",value:0},overlayColor:{type:"v3",value:new THREE.Vector3(1,1,1)},alpha:{type:"f",value:1}};"ShaderMaterial"===e.material.type&&(i=e.material.uniforms,i.map.value=a);var n=new THREE.ShaderMaterial({vertexShader:document.getElementById("basicMeshVertexShader").textContent,fragmentShader:document.getElementById("basicMeshFragmentShader").textContent,side:THREE.DoubleSide,uniforms:i,transparent:!0});e.userData.additive===!0&&(n.blending=THREE.AdditiveBlending,n.depthWrite=!1),"undefined"==typeof updateData.noiseUpdates[updateData.sceneId]&&(updateData.noiseUpdates[updateData.sceneId]=[]),"undefined"!=typeof n.uniforms.noiseOffset&&updateData.noiseUpdates[updateData.sceneId].push(n),"ShaderMaterial"===e.material.type&&(n.vertexShader=e.material.vertexShader,n.fragmentShader=e.material.fragmentShader),e.material=n,e.material.needsUpdate=!0}}function getSpritesheetData(e,t){var a={uv:{x:0,y:0,width:0,height:0},trimmed:!0,sourceSize:{},spriteSourceSize:{}};return"undefined"!=typeof e.frames[t]&&(a.uv.x=e.frames[t].frame.x,a.uv.y=e.frames[t].frame.y,a.uv.width=e.frames[t].frame.w,a.uv.height=e.frames[t].frame.h,a.trimmed=e.frames[t].trimmed,a.sourceSize=e.frames[t].sourceSize,a.spriteSourceSize=e.frames[t].spriteSourceSize),a}function getPolygonDataFromSpritesheet(e,t){var a={positions:[],uvs:[],indices:[],pixelSizeScaler:1,numVertices:0};if("undefined"!=typeof e.frames[t]){var i=e.frames[t],n=i.sourceSize.w,o=i.sourceSize.h,s=e.meta.size;a.pixelSizeScaler=i.sourceSize.w/s.w;var r=0,u=0;i.trimmed&&(r=i.frame.x/n,u=i.frame.y/o),a.numVertices=i.vertices.length;for(var l=0,d=i.vertices.length;d>l;l++)a.positions.push(i.vertices[l][0]/n-.5,1-i.vertices[l][1]/o-.5,0);for(l=0,d=i.verticesUV.length;d>l;l++)a.uvs.push(i.verticesUV[l][0]/s.w,1-i.verticesUV[l][1]/s.h);for(l=0,d=i.triangles.length;d>l;l++)a.indices.push(i.triangles[l][0],i.triangles[l][1],i.triangles[l][2])}return a}function getPolygonUvFrameFromSpritesheet(e,t){var a={uvStart:{x:0,y:0},uvSize:{w:1,h:1}};if("undefined"!=typeof e.frames[t]){var i=e.frames[t],n=e.meta.size;a.uvStart.x=i.frame.x/n.w,a.uvStart.y=1-i.frame.y/n.h,a.uvSize.w=i.frame.w/n.w,a.uvSize.h=i.frame.h/n.h*-1}return a}function getPolygonSpriteNormalizedUvs(e,t){for(var a=getPolygonDataFromSpritesheet(e,t),i=getPolygonUvFrameFromSpritesheet(e,t),n=0,o=a.uvs.length;o>n;n+=2)a.uvs[n]=mapClamped(a.uvs[n],i.uvStart.x,i.uvStart.x+i.uvSize.w,0,1),a.uvs[n+1]=mapClamped(a.uvs[n+1],i.uvStart.y,i.uvStart.y+i.uvSize.h,0,1);return a.uvs}function getUvsFromSpritesheetData(e,t){var a=e.meta.size,i=t.uv.x/a.w,n=1-t.uv.y/a.h,o=(t.uv.x+t.uv.width)/a.w,s=1-(t.uv.y+t.uv.height)/a.h;return[i,n,o,n,i,s,o,s]}function getUvValuesFromSpritesheetData(e,t){var a=e.meta.size,i=t.uv.x/a.w,n=1-t.uv.y/a.h,o=(t.uv.x+t.uv.width)/a.w,s=1-(t.uv.y+t.uv.height)/a.h;return[i,n,o-i,n-s]}function getPolygonGeometry(e,t,a){"undefined"==typeof a&&(a=e.userData.textureName);for(var i=getPolygonDataFromSpritesheet(t,a),n=[2*e.geometry.vertices[1].x,2*e.geometry.vertices[1].y],o=0,s=i.positions.length;s>o;o+=3)i.positions[o]*=n[0],i.positions[o+1]*=n[1];var r=new THREE.BufferGeometry;return r.name=e.name+"Geo",r.addAttribute("position",new THREE.BufferAttribute(new Float32Array(i.positions),3)),r.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(i.uvs),2)),r.setIndex(new THREE.BufferAttribute(new Uint16Array(i.indices),1)),r}function getPlaneGeometryFromSprite(e,t,a){var i;i="undefined"==typeof a?getSpritesheetData(t,e.userData.textureName):getSpritesheetData(t,a);var n=[e.geometry.vertices[1].x-e.geometry.vertices[0].x,e.geometry.vertices[2].y-e.geometry.vertices[0].y],o=[e.geometry.vertices[0].x-e.geometry.vertices[1].x,e.geometry.vertices[0].y-e.geometry.vertices[2].y];i.trimmed?(n[0]*=i.spriteSourceSize.x/i.sourceSize.w,n[1]*=i.spriteSourceSize.y/i.sourceSize.h,o[0]*=(i.sourceSize.w-i.spriteSourceSize.x-i.spriteSourceSize.w)/i.sourceSize.w,o[1]*=(i.sourceSize.h-i.spriteSourceSize.y-i.spriteSourceSize.h)/i.sourceSize.h):(n[0]*=0,n[1]*=0,o[0]*=0,o[1]*=0);var s=[e.geometry.vertices[0].x+n[0],e.geometry.vertices[0].y+n[1],e.geometry.vertices[0].z,e.geometry.vertices[1].x+o[0],e.geometry.vertices[1].y+n[1],e.geometry.vertices[1].z,e.geometry.vertices[2].x+n[0],e.geometry.vertices[2].y+o[1],e.geometry.vertices[2].z,e.geometry.vertices[3].x+o[0],e.geometry.vertices[3].y+o[1],e.geometry.vertices[3].z],r=getUvsFromSpritesheetData(t,i),u=[0,1,2,1,3,2],l=new THREE.BufferGeometry;return l.name=e.name+"Geo",l.addAttribute("position",new THREE.BufferAttribute(new Float32Array(s),3)),l.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(r),2)),l.setIndex(new THREE.BufferAttribute(new Uint16Array(u),1)),l}function setTextTexture(e,t,a,i){i.font=t+"pt Parkinson Cond",i.textAlign="center",i.fillText(e,a.x,a.y+.5*t)}function getRandomRange(e,t){return Math.random()*(t-e)+e}function getUnitPositions(e,t){for(var a=[],i=2*Math.PI/e,n=0;e>=n;n++)a[n]={x:Math.sin(i*n)*t,y:Math.cos(i*n)*t};return a}function getPositionHashNoise(e){return 43758.5453*Math.sin(new THREE.Vector3(12.9898,78.233,99999.99).dot(e))%1}function lerp(e,t,a){return e+a*(t-e)}function lerpV2(e,t,a,i){a.x=lerp(e.x,t.x,i),a.y=lerp(e.y,t.y,i)}function inverseLerp(e,t,a){return t-lerp(e,t,a)}function inverseLerpClamped(e,t,a){return t>e?0:e>a?1:(e-t)/(a-t)}function lerpClamped(e,t,a){return 0>a?e:a>1?t:e+a*(t-e)}function clamp(e,t,a){return Math.max(Math.min(e,a),t)}function map(e,t,a,i,n){return(e-t)*(n-i)/(a-t)+i}function mapClamped(e,t,a,i,n){if(a>t){if(t>e)return i;if(e>a)return n}else{if(a>e)return i;if(e>t)return n}return(e-t)*(n-i)/(a-t)+i}function anglesDelta(e,t){var a=e-t;return a+=a>180?-360:-180>a?360:0}function padString(e,t,a){for(var i=[],n=0;a>n;n++)i.push(t);var o=i.join("");return(o+e).slice(-o.length)}function getUnitPositions(e,t){for(var a=[],i=2*Math.PI/e,n=0;e>=n;n++)a[n]={x:Math.sin(i*n)*t,y:Math.cos(i*n)*t};return a}function updateFOV(e,t,a,i){if(t>e)return a;var n=i*Deg2Rad,o=2*Math.atan(Math.tan(n/2)/e);return Rad2Deg*o}function nearestPow2(e){return Math.pow(2,Math.round(Math.log(e)/Math.log(2)))}function easeInOutQuad(e){return e/=.5,1>e?.5*e*e:(e--,-0.5*(e*(e-2)-1))}function easeInOutQuart(e,t,a,i){return e/=i/2,1>e?a/2*e*e*e*e+t:(e-=2,-a/2*(e*e*e*e-2)+t)}function easeOutQuad(e){return-1*e*(e-2)}function easeOutCubic(e){return e--,e*e*e+1}function easeInQuad(e){return e*e}function wrapText(e,t,a,i,n,o){for(var s=t.split(" "),r="",u=0;u<s.length;u++){var l=r+s[u]+" ",d=e.measureText(l),m=d.width;m>n&&u>0?(e.fillText(r,a,i),r=s[u]+" ",i+=o):r=l}e.fillText(r,a,i)}function fillTextMultiLine(e,t,a,i,n,o){o&&(i-=n*(t.match(/\n/g)||[]).length);for(var s=t.split("\n"),r=0;r<s.length;++r)e.fillText(s[r],a,i),i+=n}function oscillate(e,t,a){var i=a-t,n=2*i,o=t+(e-t)%n;return a>o?o:n-o}function getDisatnce(e,t,a,i){return Math.sqrt((a-=e)*a+(i-=t)*i)}function sign(e){return e=+e,0===e?e:e>0?1:-1}function toScreenXY(e,t,a,i){var n=e.project(i),o=.5*(n.x+1),s=.5*(1-n.y);t.x=o*window.innerWidth,t.y=s*window.innerHeight}function getUiCircle(e,t,a,i,n){for(var o=new THREE.BufferGeometry,s=getUnitPositions(e,1),r=[],u=[],l=[],d=[],m=0;4>m;m++)for(var c=0,p=s.length;p>c;c++)if(r.push(s[c].x,s[c].y,0),u.push(0===m||3===m?0:1),l.push(2>m?1:0),m>0&&c>0){var f=r.length/3-1,h=f,g=f-1,y=f-s.length,v=f-s.length-1;d.push(h,y,g),d.push(y,v,g)}o.addAttribute("position",new THREE.BufferAttribute(new Float32Array(r),3)),o.addAttribute("fade",new THREE.BufferAttribute(new Float32Array(u),1)),o.addAttribute("isInner",new THREE.BufferAttribute(new Float32Array(l),1)),o.setIndex(new THREE.BufferAttribute(new Uint16Array(d),1));var S={pos:{type:"v2",value:new THREE.Vector2(0,0)},innerSize:{type:"f",value:a},outerSize:{type:"f",value:i},alpha:{type:"f",value:n},aspect:{type:"f",value:t.aspect}},D=new THREE.ShaderMaterial({vertexShader:document.getElementById("uiCirclesVertexShader").textContent,fragmentShader:document.getElementById("uiCirclesFragmentShader").textContent,side:THREE.DoubleSide,uniforms:S,transparent:!0,depthTest:!1,depthWrite:!1}),x=new THREE.Mesh(o,D);return x.frustumCulled=!1,t.needsAspect.push(x),x}function updateTextCanvases(e,t,a){e.mainTextCanvasContext.clearRect(0,0,e.mainTextCanvas.width,e.mainTextCanvas.height),e.headTextCanvasContext.clearRect(0,0,e.headTextCanvas.width,e.headTextCanvas.height);var i=.07*e.mainTextCanvas.width,n=1.45*i;e.headTextCanvasContext.fillStyle="#FFF",e.mainTextCanvasContext.fillStyle="#FFF",e.mainTextCanvasContext.font=i+"pt Parkinson Cond",e.mainTextCanvasContext.textAlign="center",e.headTextCanvasContext.font=i+"pt Parkinson Cond",e.headTextCanvasContext.textAlign="center",fillTextMultiLine(e.headTextCanvasContext,t.toUpperCase(),.5*e.headTextCanvas.width,e.headTextCanvas.height-.1*n,n,!0);var o=.02*e.mainTextCanvas.width,s=2.4*o,r=.99*e.mainTextCanvas.width;e.mainTextCanvasContext.font=o+"pt bodyFont",e.mainTextCanvasContext.textAlign="center",wrapText(e.mainTextCanvasContext,a,.5*e.mainTextCanvas.width,.5*s,r,s),null!==e.mainTextMesh&&null!==e.headTextMesh&&(null!==e.mainTextMesh.material&&null!==e.mainTextMesh.material.uniforms.map.value&&(e.mainTextMesh.material.uniforms.map.value.needsUpdate=!0),null!==e.headTextMesh.material&&null!==e.headTextMesh.material.uniforms.map.value&&(e.headTextMesh.material.uniforms.map.value.needsUpdate=!0))}function animate0(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=-230;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+30*e.additionalYPos+50*e.uiYPosOffset+5*e.gyroOffset.y,e.scenePosition[2]+40*e.uiZPosOffset),t.clouds.material.uniforms.fadeOut.value=mapClamped(e.uiYPosOffset,.7,1,1,.2)}function firstRun0(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=-200,a&&sceneContainer.scenes[0].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]);var i=0;e.audioManager.setLoop("falter_Web_Intro_Music",!0),e.audioManager.playSound("falter_Web_Intro_Music",i),e.navigationController.hideHeadphones(),"de"===uiElements.lang&&(uiElements.mouseshakeInstruction=document.getElementById("goDownInstructions"),uiElements.mouseshakeInstruction.children[0].textContent=mainTextData.data[uiElements.lang].navigationCopy.introAddititionalHeadline,uiElements.mouseshakeInstruction.className="hidden",uiElements.mouseshakeInstructionId=window.setTimeout(function(){uiElements.mouseshakeInstruction.style.display="inline",uiElements.mouseshakeInstruction.className="fadeIn"},2e3)),e.uiElements.tutorialWasShown||window.setTimeout(function(){e.navigationController.showTutorial(),e.uiElements.tutorialWasShown=!0},1400)}function setup0(e,t,a){a.ready=!0,a.clouds=e.getObjectByName("clouds").children[0]}function animate1(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=20*(e.mousePosCameraOffset.y-.5),n=-80;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+30*e.uiYPosOffset+5*e.gyroOffset.y+900*clamp(e.additionalYPos,-1,0)+140*clamp(e.additionalYPos,0,1),e.scenePosition[2]+30*e.uiZPosOffset),t.truck.position.x=lerp(t.truck.position.x,-360,.9*e.delta),t.bikerBodyCounter+=20*e.delta,t.bikerBodyCounter%=2*Math.PI,t.bikerBody.position.y=Math.sin(t.bikerBodyCounter),t.biker.position.x=t.bikerDriver.update(e.delta),t.bikerDriver.startDriving&&e.audioManager.playSound("moped-drive",1),t.bikerConstantSoundVolume=clamp(3*t.bikerDriver.velocity+.5,0,1)*Math.max(.16,Math.cos(Math.abs(t.biker.position.x/400)*Math.PI))+.1,e.audioManager.setVolume("moped-loop",t.bikerConstantSoundVolume),t.bikerBackBodyCounter+=23*e.delta,t.bikerBackBodyCounter%=2*Math.PI,t.bikerBackBody.position.y=.5*Math.sin(t.bikerBackBodyCounter),t.bikeBack.position.x=t.bikeBackDriver.update(e.delta),t.bikeBackDriver.startDriving&&e.audioManager.playSound("moped-driveBack",1),t.bikerBackConstantSoundVolume=clamp(2*t.bikeBackDriver.velocity+.5,0,1)*Math.max(0,Math.cos(Math.abs(t.bikeBack.position.x/400)*Math.PI)),e.audioManager.setVolume("moped-loopBack",t.bikerBackConstantSoundVolume)}function firstRun1(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=-20,a&&sceneContainer.scenes[1].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]),t.bikerBodyCounter=0,t.bikerBackBodyCounter=0,t.bikerDriver.reset(),t.bikeBackDriver.reset(),t.truck.position.x=-560;var i=1;"undefined"!=typeof uiElements.mobileIntro&&(uiElements.mobileIntro.display="none"),e.audioManager.setLoop("falter_Web_Szene01_Music",!0),e.audioManager.playSound("falter_Web_Szene01_Music",i),e.audioManager.setLoop("falter_Web_Szene01_SD_Stadt",!0),e.audioManager.playSound("falter_Web_Szene01_SD_Stadt",i,.4),e.audioManager.setLoop("moped-loop",!0),e.audioManager.playSound("moped-loop",i,.6),e.audioManager.setLoop("moped-loopBack",!0),e.audioManager.playSound("moped-loopBack",i,.6),e.audioManager.playSound("falter_Web_Szene01_SD_Moped_BackCopy",i,0),e.largeNoiseSpecks.visible=!1,e.showLargeNoiseSpecks[0]=!1,e.usesMouse&&(e.uiElements.pointer.visible=!0)}function setup1(e,t,a){a.ready=!0,a.truck=e.getObjectByName("truck"),a.bikeBack=e.getObjectByName("biker-2"),a.biker=e.getObjectByName("biker-1"),
a.bikerBody=e.getObjectByName("biker-1-base"),a.bikerConstantSoundVolume=.5,a.bikerBackConstantSoundVolume=.2,a.bikerBackBody=e.getObjectByName("biker-2-base"),a.bikerBodyCounter=0,a.bikerBackBodyCounter=0,a.bikerDriver=new GoalDriverRandomLoop({startPosition:-100,startGoal:100,startVelocity:0,startTimeToNextMove:7,maxSpeed:1,acceleration:2,minGoalDistance:200,maxGoalDistance:400,minTimeToNextMove:10,maxTimeToNextMove:25,maxPosition:400,loopPosition:-600,loopGoal:-400,startDelay:.3}),a.bikeBackDriver=new GoalDriverRandomLoop({startPosition:-300,startGoal:-200,startVelocity:0,startTimeToNextMove:15,maxSpeed:.8,acceleration:2.5,minGoalDistance:200,maxGoalDistance:400,minTimeToNextMove:20,maxTimeToNextMove:30,maxPosition:400,loopPosition:-400,loopGoal:-200,startDelay:1.5})}function animate2(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=-200;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+50*e.uiYPosOffset+5*e.gyroOffset.y+600*clamp(e.additionalYPos,-1,0)+100*clamp(e.additionalYPos,0,1),e.scenePosition[2]+40*e.uiZPosOffset),t.flameCounter+=e.delta,t.background.material.uniforms.overexpose.value=t.backgroundShaker.getOffset().x+3*e.mouseVelocityAnim,t.backgroundShaker.step(e.delta),t.backgroundShaker.setDistance(.1+8*e.mouseVelocityAnim),t.backgroundShaker.setFrequency(2.5+14*e.mouseVelocityAnim),e.scenesMaterial.uniforms.brightnessMultiplier.value=.8+Math.abs(t.fullScreenShaker.getOffset().x+1.2*e.mouseVelocityAnim),t.fullScreenShaker.step(e.delta),t.fullScreenShaker.setDistance(.05+3*e.mouseVelocityAnim),t.fullScreenShaker.setFrequency(1+5*e.mouseVelocityAnim),t.particles.children[0].material.uniforms.fade.value=.6+5*e.mouseVelocityAnim;var o=mapClamped(e.mouseVelocityAnim,0,.6,.1,.001);t.flameCounter>o&&(t.flameCounter%=o,t.flameBack.position.x=getRandomRange(-20,20),t.flameBack.position.y=getRandomRange(-10,10),t.flameBack.material.uniforms.width.value=getRandomRange(.6,1.82),t.flameBack.material.uniforms.height.value=getRandomRange(.7,1.8),t.flameBack.material.uniforms.xOffset.value=Math.random(),t.flameBack.material.uniforms.yOffset.value=Math.random(),t.flameFront.position.x=getRandomRange(-20,20),t.flameFront.position.y=getRandomRange(-10,10),t.flameFront.material.uniforms.width.value=getRandomRange(.6,1.82),t.flameFront.material.uniforms.height.value=getRandomRange(.7,1.8),t.flameFront.material.uniforms.xOffset.value=Math.random(),t.flameFront.material.uniforms.yOffset.value=Math.random(),t.flameSpecks.position.x=getRandomRange(-20,20),t.flameSpecks.position.y=getRandomRange(-10,10),t.flameSpecks.material.uniforms.width.value=getRandomRange(0,0),t.flameSpecks.material.uniforms.height.value=getRandomRange(2,2),t.flameSpecks.material.uniforms.xOffset.value=Math.random(),t.flameSpecks.material.uniforms.yOffset.value=Math.random(),t.flameCenter.position.x=getRandomRange(-20,20),t.flameCenter.position.y=getRandomRange(-10,10),t.flameCenter.material.uniforms.width.value=getRandomRange(1.5,4),t.flameCenter.material.uniforms.height.value=getRandomRange(.2,.8),t.flameCenter.material.uniforms.xOffset.value=Math.random(),t.flameCenter.material.uniforms.yOffset.value=Math.random())}function firstRun2(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=-180,a&&sceneContainer.scenes[2].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]),t.flameCounter=0,t.particles.children[0].material.uniforms.fade.value=.5;var i=2;e.audioManager.setLoop("falter_Web_Szene02_Music",!0),e.audioManager.playSound("falter_Web_Szene02_Music",i),e.audioManager.setLoop("falter_Web_Szene02_SD_Feuer",!0),e.audioManager.playSound("falter_Web_Szene02_SD_Feuer",i),e.audioManager.setLoop("falter_Web_Szene02_SD_Feuer2",!0),e.audioManager.playSound("falter_Web_Szene02_SD_Feuer2",i),e.audioManager.setLoop("falter_Web_Szene02_SD_Werfen",!0),e.audioManager.stopSound("falter_Web_Szene02_SD_Werfen"),e.audioManager.playSound("falter_Web_Szene02_SD_Werfen",i),t.bookBurner.material.uniforms.frame.value=0}function setup2(e,t,a,i){a.ready=!0,t.cameraAspectOffsets[2]=250,a.particles=e.getObjectByName("sparks"),a.bookBurner=e.getObjectByName("bookBurner"),a.flameBack=e.getObjectByName("flameBack"),a.flameBack.material.uniforms.color.value=.862,a.flameBack.material.uniforms.outerCutoff.value=.32,a.flameBack.material.uniforms.outerStretch.value=.32,a.flameFront=e.getObjectByName("flameFront"),a.flameFront.material=a.flameBack.material.clone(),a.flameFront.material.uniforms.map.value=a.flameBack.material.uniforms.map.value,a.flameFront.material.uniforms.color.value=.964,a.flameFront.material.uniforms.color.value=.964,a.flameFront.material.uniforms.outerCutoff.value=.54,a.flameFront.material.uniforms.outerStretch.value=.15,a.flameSpecks=e.getObjectByName("flameSpecks"),a.flameSpecks.material=a.flameBack.material.clone(),a.flameSpecks.material.uniforms.map.value=a.flameBack.material.uniforms.map.value,a.flameSpecks.material.uniforms.color.value=.988,a.flameSpecks.material.uniforms.outerCutoff.value=.8,a.flameSpecks.material.uniforms.outerStretch.value=.17,a.flameCenter=e.getObjectByName("flameCenter"),a.flameCenter.material=a.flameBack.material.clone(),a.flameCenter.material.uniforms.map.value=a.flameBack.material.uniforms.map.value,a.flameCenter.material.uniforms.color.value=.78,a.flameCenter.material.uniforms.outerCutoff.value=.53,a.flameCenter.material.uniforms.outerStretch.value=.54,a.flameBack.material.fragmentShader=a.flameBack.material.fragmentShader.replace("r;//CHANNEL","r"),a.flameFront.material.fragmentShader=a.flameFront.material.fragmentShader.replace("r;//CHANNEL","r"),a.flameSpecks.material.fragmentShader=a.flameSpecks.material.fragmentShader.replace("r;//CHANNEL","g"),a.flameCenter.material.fragmentShader=a.flameCenter.material.fragmentShader.replace("r;//CHANNEL","b"),a.flameBack.material.depthTest=!1,a.flameFront.material.depthTest=!1,a.flameSpecks.material.depthTest=!1,a.flameCenter.material.depthTest=!1,a.flameBack.material.depthWrite=!1,a.flameFront.material.depthWrite=!1,a.flameSpecks.material.depthWrite=!1,a.flameCenter.material.depthWrite=!1,a.flameBack.material.needsUpdate=!0,a.flameFront.material.needsUpdate=!0,a.flameSpecks.material.needsUpdate=!0,a.flameCenter.material.needsUpdate=!0;var n=getPolygonSpriteNormalizedUvs(i,"flamesData");a.flameBack.geometry.addAttribute("normalizedUV",new THREE.BufferAttribute(new Float32Array(n),2)),a.flameFront.geometry.addAttribute("normalizedUV",new THREE.BufferAttribute(new Float32Array(n),2)),a.flameSpecks.geometry.addAttribute("normalizedUV",new THREE.BufferAttribute(new Float32Array(n),2)),a.flameCenter.geometry.addAttribute("normalizedUV",new THREE.BufferAttribute(new Float32Array(n),2)),polygonUvData=getPolygonUvFrameFromSpritesheet(i,"flamesData");var o=[polygonUvData.uvStart.x,polygonUvData.uvStart.y],s=[polygonUvData.uvSize.w,polygonUvData.uvSize.h];a.flameBack.material.uniforms.uvStart.value=o,a.flameBack.material.uniforms.uvSize.value=s,a.flameFront.material.uniforms.uvStart.value=o,a.flameFront.material.uniforms.uvSize.value=s,a.flameSpecks.material.uniforms.uvStart.value=o,a.flameSpecks.material.uniforms.uvSize.value=s,a.flameCenter.material.uniforms.uvStart.value=o,a.flameCenter.material.uniforms.uvSize.value=s,a.background=e.getObjectByName("background");var r={map:{type:"t",value:a.background.material.uniforms.map.value},overexpose:{type:"f",value:.5}};a.background.material=new THREE.ShaderMaterial({vertexShader:document.getElementById("textureOverexposeVertexShader").textContent,fragmentShader:document.getElementById("textureOverexposeFragmentShader").textContent,side:THREE.DoubleSide,uniforms:r,transparent:!0}),a.backgroundShaker=new Screenshake,a.fullScreenShaker=new Screenshake,a.backgroundShaker.setOctaves(3),a.backgroundShaker.setFrequency(2.5),a.backgroundShaker.setDistance(.1)}function animate3(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=-280;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+15*e.uiYPosOffset+5*e.gyroOffset.y+400*clamp(e.additionalYPos,-1,0)+100*clamp(e.additionalYPos,0,1),e.scenePosition[2]+30*e.uiZPosOffset),e.audioManager.setVolume("falter_Web_Szene03_SD_Hilfe",mapClamped(e.mouseVelocityAnim,0,.05,.4,1)),e.audioManager.setVolume("falter_Web_Szene03_SD_Klopfen",mapClamped(e.mouseVelocityAnim,0,.05,.3,1)),e.audioManager.setVolume("falter_Web_Szene03_SD_Klopfen2",mapClamped(e.mouseVelocityAnim,0,.05,.3,1)),e.audioManager.setVolume("falter_Web_Szene03_SD_Mobil1",mapClamped(e.mouseVelocityAnim,0,.05,.3,.8)),e.audioManager.setVolume("falter_Web_Szene03_SD_Mobil2",mapClamped(e.mouseVelocityAnim,0,.05,.3,.8)),e.audioManager.setVolume("falter_Web_Szene03_SD_Mobil3",mapClamped(e.mouseVelocityAnim,0,.05,.3,.8)),e.audioManager.setVolume("falter_Web_Szene03_SD_Mobil4",mapClamped(e.mouseVelocityAnim,0,.05,.3,.8))}function firstRun3(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=-200,a&&sceneContainer.scenes[3].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]);var i=3;e.audioManager.setLoop("falter_Web_Szene03_Music",!0),e.audioManager.playSound("falter_Web_Szene03_Music",i),e.audioManager.setLoop("falter_Web_Szene03_SD_Hilfe",!0),e.audioManager.playSound("falter_Web_Szene03_SD_Hilfe",i,.4),e.audioManager.setLoop("falter_Web_Szene03_SD_Klopfen",!0),e.audioManager.playSound("falter_Web_Szene03_SD_Klopfen",i,.3),e.audioManager.setLoop("falter_Web_Szene03_SD_Klopfen2",!0),e.audioManager.playSound("falter_Web_Szene03_SD_Klopfen2",i,.3),e.audioManager.setLoop("falter_Web_Szene03_SD_Mobil1",!0),e.audioManager.playSound("falter_Web_Szene03_SD_Mobil1",i,.3),e.audioManager.setLoop("falter_Web_Szene03_SD_Mobil2",!0),e.audioManager.playSound("falter_Web_Szene03_SD_Mobil2",i,.3),e.audioManager.setLoop("falter_Web_Szene03_SD_Mobil3",!0),e.audioManager.playSound("falter_Web_Szene03_SD_Mobil3",i,.3),e.audioManager.setLoop("falter_Web_Szene03_SD_Mobil4",!0),e.audioManager.playSound("falter_Web_Szene03_SD_Mobil4",i,.3)}function setup3(e,t,a){a.ready=!0}function animate4(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=-40;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+10*e.uiYPosOffset+5*e.gyroOffset.y+300*clamp(e.additionalYPos,-1,0)+40*clamp(e.additionalYPos,0,1),e.scenePosition[2]+20*e.uiZPosOffset),e.audioManager.setVolume("falter_Web_Szene04_SD_Kettensaege",mapClamped(e.mouseVelocityAnim,0,.05,.3,1))}function firstRun4(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=0,a&&sceneContainer.scenes[4].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]);var i=4;e.audioManager.setLoop("falter_Web_Szene04_Music",!0),e.audioManager.playSound("falter_Web_Szene04_Music",i),e.audioManager.setLoop("falter_Web_Szene04_SD_Kettensaege",!0),e.audioManager.playSound("falter_Web_Szene04_SD_Kettensaege",i,.4)}function setup4(e,t,a){a.ready=!0,t.cameraAspectOffsets[4]=80}function animate5(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=-100-400*e.mouseVelocityAnim;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+90*e.uiYPosOffset+5*e.gyroOffset.y+400*clamp(e.additionalYPos,-1,0)+140*clamp(e.additionalYPos,0,1),e.scenePosition[2]+40*e.uiZPosOffset),t.marchCounter+=.4*e.delta+.13*e.mouseVelocityAnim,t.marchCounter%=1,t.baseSoldat.material.uniforms.marchAmount.value=t.marchCounter,t.baseSoldat.material.uniforms.yOffset.value=90*e.uiYPosOffset+100*e.additionalYPos}function firstRun5(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=-170,a&&sceneContainer.scenes[5].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]),t.marchCounter=0;var i=5;e.audioManager.setLoop("falter_Web_Szene05_Music",!0),e.audioManager.playSound("falter_Web_Szene05_Music",i),e.audioManager.setLoop("falter_Web_Szene05_SD_Marschieren",!0),e.audioManager.playSound("falter_Web_Szene05_SD_Marschieren",i)}function setup5(e,t,a,i){a.ready=!0,t.cameraAspectOffsets[5]=40,a.baseSoldat=e.getObjectByName("soldat");var n=12,o=11,s=470,r=-140,u=-50,l=350,d=-50,m=-150;a.marchingSoldier=[],a.tmpVector3=new THREE.Vector3,a.tmpDirection=new THREE.Vector3,a.startPositions=[],a.marchCounter=0;for(var c=0,p=a.baseSoldat.geometry.attributes.position.count,f=[],h=[],g=[],y=[],v=[],S=[],D=0,x=n*o;x>D;D++){for(var b=0,T=2*a.baseSoldat.geometry.attributes.uv.count;T>b;b++)h.push(a.baseSoldat.geometry.attributes.uv.array[b]);for(b=0,T=2*a.baseSoldat.geometry.attributes.normalizedUv.count;T>b;b++)S.push(a.baseSoldat.geometry.attributes.normalizedUv.array[b]);for(b=0,T=a.baseSoldat.geometry.attributes.frameIndex.count;T>b;b++)y.push(a.baseSoldat.geometry.attributes.frameIndex.array[b]);for(b=0,T=a.baseSoldat.geometry.index.count;T>b;b++)g.push(c+a.baseSoldat.geometry.index.array[b]);c+=p}for(var C={x:0,y:0,z:0},M=n-1;M>=0;M--)for(D=o-1;D>=0;D--){C.x=-800+D*s+M%2*m,C.y=0+D*r+M*l,C.z=-800+D*u+M*d;for(var P=0,w=p;w>P;P++)v.push(C.x,C.y,C.z);for(P=0,w=3*p;w>P;P+=3)f.push(C.x+a.baseSoldat.geometry.attributes.position.array[P],C.y+a.baseSoldat.geometry.attributes.position.array[P+1],C.z+a.baseSoldat.geometry.attributes.position.array[P+2])}var E=new THREE.BufferGeometry;E.name="Scene5 Soldiers Geo",E.addAttribute("position",new THREE.BufferAttribute(new Float32Array(f),3)),E.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(h),2)),E.addAttribute("normalizedUv",new THREE.BufferAttribute(new Float32Array(S),2)),E.addAttribute("centerPosition",new THREE.BufferAttribute(new Float32Array(v),3)),E.addAttribute("frameIndex",new THREE.BufferAttribute(new Float32Array(y),1)),E.setIndex(new THREE.BufferAttribute(new Uint16Array(g),1)),a.baseSoldat.geometry=E;var _={map:{type:"t",value:a.baseSoldat.material.uniforms.map.value},frame:{type:"f",value:0},numFrames:{type:"f",value:a.baseSoldat.material.uniforms.numFrames.value},speed:{type:"f",value:a.baseSoldat.material.uniforms.speed.value},marchDirection:{type:"3f",value:[0,0,0]},marchAmount:{type:"f",value:0},yOffset:{type:"f",value:0}};a.baseSoldat.material=new THREE.ShaderMaterial({vertexShader:document.getElementById("animatedSpriteColorFadeVertexShader").textContent,fragmentShader:document.getElementById("animatedSpriteColorFadeFragmentShader").textContent,side:THREE.DoubleSide,uniforms:_,transparent:!0}),D=0,M=0,_.marchDirection.value[0]=D*s+M%2*m,_.marchDirection.value[1]=D*r+M*l,_.marchDirection.value[2]=D*u+M*d,D=1,M=2,_.marchDirection.value[0]-=D*s+M%2*m,_.marchDirection.value[1]-=D*r+M*l,_.marchDirection.value[2]-=D*u+M*d,a.baseSoldat.material.needsUpdate=!0,a.baseSoldat.needsUpdate=!0,"undefined"==typeof t.animatedSprites[5]&&(t.animatedSprites[5]=[]),t.animatedSprites[5].push(a.baseSoldat.material)}function animate6(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=-60;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+40*e.uiYPosOffset+5*e.gyroOffset.y+3300*clamp(e.additionalYPos,-1,0)+60*clamp(e.additionalYPos,0,1),e.scenePosition[2]+40*e.uiZPosOffset),t.lookAtVector.set(e.mousePos.x-.2,e.mousePos.y-.5),t.lookAtVector.normalize();var o=Math.atan2(t.lookAtVector.y,t.lookAtVector.x);o=clamp(o,-.07,.08);for(var s=0,r=t.figures.length;r>s;s++)t.figures[s].rotation.z=lerp(t.figures[s].rotation.z,-o,e.delta*t.figureRotationSpeed[s]);for(t.moveOffsetAmount=mapClamped(e.mousePos.y,.3,.8,0,1),s=0,r=t.figures.length;r>s;s++)t.figures[s].position.x=lerp(t.figures[s].position.x,t.basePosition[s]+t.moveOffset[s]*t.moveOffsetAmount,1.3*e.delta)}function firstRun6(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=0,a&&sceneContainer.scenes[6].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]),t.lookAtVector.set(0,0);var i=6;e.audioManager.setLoop("falter_Web_Szene06_Music",!0),e.audioManager.playSound("falter_Web_Szene06_Music",i);for(var n=0,o=t.figures.length;o>n;n++)t.figures[n].position.x=t.basePosition[n]-getRandomRange(130,200)}function setup6(e,t,a){a.ready=!0,t.cameraAspectOffsets[6]=80,a.lookAtVector=new THREE.Vector2(0,0),a.figures=[];for(var i=1;7>i;i++)a.figures.push(e.getObjectByName("fig"+i.toString()));for(a.figureRotationSpeed=[],i=0,l=a.figures.length;i<l;i++)a.figureRotationSpeed.push(getRandomRange(.2,4));for(a.basePosition=[],i=0,l=a.figures.length;i<l;i++)a.basePosition.push(a.figures[i].position.x);for(a.moveOffset=[],i=0,l=a.figures.length;i<l;i++)a.moveOffset.push(getRandomRange(.1,15));a.moveOffsetAmount=0}function animate7(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=-150;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+40*e.uiYPosOffset+5*e.gyroOffset.y+500*clamp(e.additionalYPos,-1,0)+100*clamp(e.additionalYPos,0,1),e.scenePosition[2]+30*e.uiZPosOffset),t.syncAnimCounter+=e.delta*t.syncAnimSpeed,t.front.position.x=mapClamped(Math.sin(t.syncAnimCounter),-.8,.1,t.frontMinX,t.frontMaxX),t.spike.position.x=mapClamped(Math.sin(t.syncAnimCounter),-.15,.8,t.spikeMinX,t.spikeMaxX),t.smallPump.position.y=mapClamped(Math.sin(3*t.syncAnimCounter),-.4,.9,t.smallPumpMinY,t.smallPumpMaxY),t.bigPump.position.y=mapClamped(Math.sin(.6*t.syncAnimCounter),-.9,.2,t.bigPumpMinY,t.bigPumpMaxY),t.machineBody.position.x-=t.machineBodyShaker.getOffset().x,t.machineBody.position.y-=t.machineBodyShaker.getOffset().y,t.machineBodyShaker.setDistance(mapClamped(Math.sin(t.syncAnimCounter),-.15,.8,.4,.9)),t.machineBodyShaker.step(e.delta),t.machineBody.position.x+=t.machineBodyShaker.getOffset().x,t.machineBody.position.y+=t.machineBodyShaker.getOffset().y,t.rad1.rotation.z-=e.delta+.02*t.machineBodyShaker.getOffset().y,t.rad1.rotation.z%=2*Math.PI,t.rad2.rotation.z+=mapClamped(Math.sin(t.syncAnimCounter),-.3,.5,-.1,.05)+.005*t.machineBodyShaker.getOffset().y,t.rad3.rotation.z-=mapClamped(Math.sin(t.syncAnimCounter),-.15,.8,.1,.03)+mapClamped(Math.sin(t.syncAnimCounter),-.2,.6,-.05,.05)+.03*t.machineBodyShaker.getOffset().x;for(var o=0,s=t.otherMachines.length;s>o;o++)t.otherMachineShakers[o].step(e.delta),t.otherMachines[o].position.x=t.otherMachinesBaseX[o]+t.otherMachineShakers[o].getOffset().x,t.otherMachines[o].position.y=t.otherMachinesBaseY[o]+t.otherMachineShakers[o].getOffset().y;t.chickenRaycaster.setFromCamera(e.uiElements.uiMousePos,e.sceneCamera),t.chickenSoundCounter<5&&(t.chickenSoundCounter+=e.delta),t.pointerIsOverChickens=t.chickenRaycaster.intersectObject(t.chickens).length>0,t.pointerIsOverChickens&&!t.pointerWasOverChickens&&t.chickenSoundCounter>.5&&(t.chickenSoundToggle?e.audioManager.playSound("szene07_huhn1",7,1):e.audioManager.playSound("szene07_huhn2",7,1),t.chickenSoundToggle=!t.chickenSoundToggle,t.chickenSoundCounter=0),t.pointerWasOverChickens=t.pointerIsOverChickens}function firstRun7(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=-150,a&&sceneContainer.scenes[7].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]),t.chickens.material.uniforms.frame.value=0,t.syncAnimCounter=t.syncAnimStart;var i=7;e.audioManager.setLoop("falter_Web_Szene07_Music",!0),e.audioManager.playSound("falter_Web_Szene07_Music",i)}function setup7(e,t,a){a.ready=!0,t.cameraAspectOffsets[7]=-200,a.chickens=e.getObjectByName("sequence"),a.chickenSpeed=a.chickens.material.uniforms.speed.value,a.chickenSoundToggle=!1,a.chickenRaycaster=new THREE.Raycaster,a.chickenSoundCounter=0,a.pointerIsOverChickens=!1,a.pointerWasOverChickens=!1,a.syncAnimSpeed=a.chickenSpeed,a.syncAnimSpeed/=a.chickens.material.uniforms.numFrames.value,a.syncAnimSpeed*=2*Math.PI,a.syncAnimStart=1/a.chickens.material.uniforms.numFrames.value*3*Math.PI*6,a.syncAnimCounter=a.syncAnimStart,a.front=e.getObjectByName("frontteil"),a.frontMinX=-625,a.frontMaxX=-560,a.spike=e.getObjectByName("spitze"),a.spikeMinX=-580,a.spikeMaxX=-443,a.smallPump=e.getObjectByName("zylinderkopf small"),a.smallPumpMinY=-245,a.smallPumpMaxY=-276,a.bigPump=e.getObjectByName("zylinderkopf big"),a.bigPumpMinY=-270,a.bigPumpMaxY=-330,a.machineBody=e.getObjectByName("body"),a.rad1=e.getObjectByName("rad1"),a.rad2=e.getObjectByName("rad2"),a.rad3=e.getObjectByName("rad3"),a.machineBodyShaker=new Screenshake,a.machineBodyShaker.setOctaves(3),a.machineBodyShaker.setFrequency(.9),a.machineBodyShaker.setDistance(.7),a.otherMachines=[],a.otherMachinesBaseX=[],a.otherMachinesBaseY=[],a.otherMachineShakers=[];for(var i=2;5>i;i++)a.otherMachines.push(e.getObjectByName("machine "+i.toString()));for(i=0,l=a.otherMachines.length;i<l;i++)a.otherMachinesBaseX.push(a.otherMachines[i].position.x),a.otherMachinesBaseY.push(a.otherMachines[i].position.y),a.otherMachineShakers.push(new Screenshake);a.otherMachineShakers[0].setOctaves(3),a.otherMachineShakers[0].setFrequency(.2),a.otherMachineShakers[0].setDistance(.8),a.otherMachineShakers[1].setOctaves(3),a.otherMachineShakers[1].setFrequency(.4),a.otherMachineShakers[1].setDistance(1.1),a.otherMachineShakers[2].setOctaves(3),a.otherMachineShakers[2].setFrequency(.5),a.otherMachineShakers[2].setDistance(1.2)}function animate8(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=0;Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+40*e.uiYPosOffset+5*e.gyroOffset.y+600*clamp(e.additionalYPos,-1,0)+80*clamp(e.additionalYPos,0,1),e.scenePosition[2]+40*e.uiZPosOffset),t.modTimeCounter+=.1*e.delta+.5*e.mouseVelocityAnim;for(var o=0,s=t.lights.length;s>o;o++)t.lightsAnimEnd[o]-=.15*e.mouseVelocityAnim,t.lightsAnimReset[o]-=.5*e.mouseVelocityAnim,t.lights[o].rotation.z=lerp(t.lightsAnimStartRotation[o],t.lightsAnimEndRotation[o],easeInOutQuad(inverseLerpClamped(t.modTimeCounter,t.lightsAnimStart[o],t.lightsAnimEnd[o]))),t.lights[o].rotation*=t.lightsRotationRange[o],t.lightsAnimReset[o]<t.modTimeCounter&&(t.lightsAnimStart[o]=t.modTimeCounter,t.lightsAnimEnd[o]=t.lightsAnimStart[o]+getRandomRange(1,3),t.lightsAnimReset[o]=t.lightsAnimEnd[o]+getRandomRange(.25,.8),t.lightsAnimStartRotation[o]=t.lights[o].rotation.z,t.lightsAnimEndRotation[o]=getRandomRange(-t.lightsRotationRange[o],t.lightsRotationRange[o]))}function firstRun8(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=0,a&&sceneContainer.scenes[8].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]);for(var i=0,n=t.lights.length;n>i;i++)t.lightsAnimStart[i]=0,t.lightsAnimEnd[i]=0,t.lightsAnimReset[i]=getRandomRange(0,9);t.modTimeCounter=0;var o=8;e.audioManager.setLoop("falter_Web_Szene08_Music",!0),e.audioManager.playSound("falter_Web_Szene08_Music",o),e.audioManager.setLoop("falter_Web_Szene08_SD_Hunde",!0),e.audioManager.playSound("falter_Web_Szene08_SD_Hunde",o),e.audioManager.setLoop("falter_Web_Szene08_SD_Kameras",!0),e.audioManager.playSound("falter_Web_Szene08_SD_Kameras",o,.14)}function setup8(e,t,a){a.ready=!0,t.cameraAspectOffsets[8]=75,a.lights=[],a.lightPositions=[],a.lightWorldPos=new THREE.Vector3,a.mouseWorldPos=new THREE.Vector3,a.lookAtVector=new THREE.Vector2;var i,n;for(i=1;5>=i;i++)a.lights.push(e.getObjectByName("spotlight"+i.toString()));for(a.lights[0].parent.updateMatrixWorld(),i=0,n=a.lights.length;n>i;i++)a.lightPositions.push(a.lights[i].position.clone());for(t.needsTime[8]=[],i=0,n=a.lights.length;n>i;i++){var o=a.lights[i].children[0].material.uniforms.map.value;a.lights[i].children[0].material=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:o},time:{type:"f",value:200*Math.random()}},vertexShader:document.getElementById("spotlightVertexShader").textContent,fragmentShader:document.getElementById("spotlightFragmentShader").textContent,side:THREE.DoubleSide,transparent:!0,blending:THREE.AdditiveBlending}),t.needsTime[8].push(a.lights[i].children[0].material)}for(a.lightsAnimStartRotation=[],a.lightsAnimEndRotation=[],a.lightsAnimStart=[],a.lightsAnimEnd=[],a.lightsAnimReset=[],a.lightsRotationRange=[],i=0,n=a.lights.length;n>i;i++){var s=getRandomRange(-3,9),r=s+getRandomRange(1,4),u=r+getRandomRange(1,8);a.lightsAnimStart.push(s),a.lightsAnimEnd.push(r),a.lightsAnimReset.push(u),a.lightsRotationRange.push(getRandomRange(.3,.6))}for(i=0,n=a.lights.length;n>i;i++)a.lightsAnimStartRotation.push(0),a.lightsAnimEndRotation.push(getRandomRange(-a.lightsRotationRange[i],a.lightsRotationRange[i]));a.modTimeCounter=0}function animate9(e,t){var a=-30*(e.mousePosCameraOffset.x-.5),i=10*(e.mousePosCameraOffset.y-.5),n=-20;if(Math.abs(a-e.scenePosition[0])>.01&&(e.scenePosition[0]=lerp(e.scenePosition[0],a,e.delta)),Math.abs(i-e.scenePosition[1])>.01&&(e.scenePosition[1]=lerp(e.scenePosition[1],i,e.delta)),Math.abs(n-e.scenePosition[2])>.01&&(e.scenePosition[2]=lerp(e.scenePosition[2],n,e.delta)),e.scene.children[0].children[0].position.set(e.scenePosition[0]+10*e.gyroOffset.x,e.scenePosition[1]+40*e.uiYPosOffset+5*e.gyroOffset.y+500*clamp(e.additionalYPos,-1,0)+450*clamp(e.additionalYPos,0,1),e.scenePosition[2]+40*e.uiZPosOffset),0===t.currentStage){t.topLookAtVector.set((e.mousePos.x-.5)*e.aspect,e.mousePos.y),t.topLookAtVector.normalize();var o=getDisatnce(e.mousePos.x,e.mousePos.y,.5,0);t.isDraggingHand?(t.topHand.position.y=mapClamped(o,.2,.6,40,-70),e.uiZPosOffset=lerp(e.uiZPosOffset,-1,4*e.delta)):(t.topHand.position.y=lerp(t.topHand.position.y,40,3*e.delta),e.uiZPosOffset=lerp(e.uiZPosOffset,0,4*e.delta));var s=Math.atan2(t.topLookAtVector.y,t.topLookAtVector.x);s-=.5*Math.PI,s=clamp(s,-.6,.6),t.topHandContainer.rotation.z=-s,t.topLookAtVector.set((e.mousePos.x-.5)*e.aspect,e.mousePos.y-1),t.topLookAtVector.normalize(),s=Math.atan2(t.topLookAtVector.y,t.topLookAtVector.x),s+=.5*Math.PI,s=clamp(s,-.7,.55),t.bottomArmContainer.rotation.z=lerp(t.bottomArmContainer.rotation.z,-s,6*e.delta),t.topHandPalmWorldPos.copy(t.topHandPalm.position),t.topHandPalmWorldPos.setFromMatrixPosition(t.topHandPalm.matrixWorld),t.bottomHandPalmWorldPos.copy(t.bottomHandPalm.position),t.bottomHandPalmWorldPos.setFromMatrixPosition(t.bottomHandPalm.matrixWorld),t.palmsDistance=t.topHandPalmWorldPos.distanceTo(t.bottomHandPalmWorldPos),t.bottomHand.position.y=lerp(t.bottomHand.position.y,mapClamped(e.mousePos.y,.3,.4,9,40),7*e.delta),t.didOneRun||(window.clearTimeout(t.tutorialFadeInId),t.tutorialFadeInId=window.setTimeout(function(){t.tutorialDiv.className="fadeIn"},1e3),t.handTutorialPos.x=t.tophandInWindow.x,t.handTutorialPos.y=t.tophandInWindow.y,t.didOneRun=!0),e.sceneShaker.setFrequency(mapClamped(t.palmsDistance,70,150,10,0)),e.sceneShaker.setDistance(mapClamped(t.palmsDistance,70,150,12,.5)),t.particleFade=mapClamped(t.palmsDistance,50,87,1,0),t.stage0ParticlesA.children[0].material.uniforms.fade.value=t.particleFade,t.stage0ParticlesB.children[0].material.uniforms.fade.value=t.particleFade,t.stage0ParticlesC.children[0].material.uniforms.fade.value=t.particleFade,e.audioManager.setVolume("wind-licht",mapClamped(t.palmsDistance,90,120,1,.1)),e.audioManager.setVolume("end-wirbelwind-licht",mapClamped(t.palmsDistance,30,50,1,0)),t.showingTutorial&&("de"===uiElements.lang&&uiElements.showMainText?t.canHideTutorial=!1:t.canHideTutorial=e.sceneTime>3,t.fixedTutorialPos||(lerpV2(t.handTutorialPos,e.mousePosAbs,t.handTutorialPos,6*e.delta),t.stringBuilder=[],t.stringBuilder.push("translate("),t.stringBuilder.push(t.handTutorialPos.x.toString()),t.stringBuilder.push("px,"),t.stringBuilder.push(t.handTutorialPos.y.toString()),t.stringBuilder.push("px)"),t.tutorialDiv.style.transform=t.stringBuilder.join(""))),t.isDraggingHand?e.forceClickedPointer=!0:e.forceClickedPointer=!1,t.palmsDistance<26&&t.isDraggingHand&&(t.currentStage=1,t.subScenes[0].visible=!1,t.subScenes[1].visible=!0,t.subSceneStart=e.sceneTime,e.audioManager.playSound("falter_Web_Szene09_SD_Wirbelwind",e.sceneId),e.audioManager.stopSound("falter_Web_Szene09_Music",e.sceneId),e.sceneShaker.setFrequency(15),e.sceneShaker.setDistance(17),e.largeNoiseSpecks.material.uniforms.alpha.value=1,e.largeNoiseSpecks.material.uniforms.scaler.value=2,e.sceneData[9].tutorialDiv.className="hidden")}else 1===t.currentStage?(t.subScenes[1].rotation.z=6e-4*e.sceneShaker.getOffset().x,e.scenesMaterial.uniforms.brightness.value=mapClamped(e.sceneTime-t.subSceneStart,t.stage2BrightnessStart,t.stage2BrightnessEnd,0,1),e.sceneTime>t.subSceneStart+t.stage2Duration&&(e.uiElements.pointer.visible=!1,t.currentStage=2,t.subScenes[1].visible=!1,t.subScenes[2].visible=!0,e.sceneShaker.setFrequency(0),e.sceneShaker.setDistance(0),e.scenePosition[2]=140,e.scenesMaterial.uniforms.brightness.value=1,t.subSceneStart=e.sceneTime,t.reader.material.uniforms.frame.value=0,t.birds.material.uniforms.frame.value=0,e.audioManager.stopSound("wind-licht",e.sceneId),e.audioManager.stopSound("end-wirbelwind-licht",e.sceneId),e.audioManager.playSound("endStart",e.sceneId),e.audioManager.playSound("falter_Web_Szene10_SD_Voegel",e.sceneId),e.largeNoiseSpecks.material.uniforms.alpha.value=.3,e.largeNoiseSpecks.material.uniforms.scaler.value=1,e.navigationController.showFinalSceneNav(),updateTexts(10),e.navigationController.updateNav(),window.setTimeout(function(){t.taglineDiv.className="fadeIn"},800))):2===t.currentStage&&(e.scenesMaterial.uniforms.brightness.value=mapClamped(e.sceneTime,t.subSceneStart,t.subSceneStart+t.stage3BrightnessFadeDuration,1,0),t.tagLineWorldPos.copy(t.tagline.position),t.tagLineWorldPos.setFromMatrixPosition(t.tagline.matrixWorld),toScreenXY(t.tagLineWorldPos,t.tagLineWindowPos,e.tmpProjector,e.sceneCamera),t.stringBuilder=[],t.stringBuilder.push("translate("),t.stringBuilder.push(t.tagLineWindowPos.x.toString()),t.stringBuilder.push("px,"),t.stringBuilder.push(t.tagLineWindowPos.y.toString()),t.stringBuilder.push("px)"),t.taglineDiv.style.transform=t.stringBuilder.join(""),t.boat.position.x-=e.delta,t.boat.position.x<-86&&(t.boat.position.x=600));
}function firstRun9(e,t,a){e.scenePosition[0]=0,e.scenePosition[1]=0,e.scenePosition[2]=0,a&&sceneContainer.scenes[9].children[0].children[0].position.set(e.scenePosition[0],e.scenePosition[1],e.scenePosition[2]),t.currentStage=0,t.didOneRun=!1,t.subScenes[0].visible=!0,t.subScenes[1].visible=!1,t.subScenes[2].visible=!1,t.isDraggingHand=!1,t.palmsDistance=999,t.topHand.position.y=5e3,t.bottomHand.position.y=9;var i=9;e.audioManager.setLoop("falter_Web_Szene09_Music",!0),e.audioManager.playSound("falter_Web_Szene09_Music",i),e.audioManager.setLoop("wind-licht",!0),e.audioManager.playSound("wind-licht",i,0),e.audioManager.setLoop("end-wirbelwind-licht",!0),e.audioManager.playSound("end-wirbelwind-licht",i,0),e.audioManager.setLoop("falter_Web_Szene10_Music",!0),e.audioManager.setLoop("falter_Web_Szene10_SD_Voegel",!0),t.tutorialDiv.className="hidden",t.showingTutorial=!0,t.handTutorialPos.x=e.mousePosAbs.x,t.handTutorialPos.y=window.innerHeight,t.tutorialDiv.style.transform=t.tutorialDivFixedPos,t.fixedTutorialPos=!e.usesMouse,t.fixedTutorialPos?(t.tutorialDiv.style.transform=t.tutorialDivFixedPos,t.tutorialTexDiv.style.marginLeft="-50%",t.tutorialTexDiv.style.marginTop="3vh"):(t.tutorialTexDiv.style.marginLeft="20%",t.tutorialTexDiv.style.marginTop="-1.5vh")}function setup9(e,t,a){a.ready=!0,a.subScenes=[];for(var i=0;3>i;i++)a.subScenes.push(e.children[i]),e.children[i].visible=!1;a.currentStage=0,a.subScenes[a.currentStage].visible=!0,a.tophandInWindow={x:0,y:0},a.handTutorialPos={x:0,y:0},a.reader=e.getObjectByName("endChar"),a.birds=e.getObjectByName("birds"),a.boat=e.getObjectByName("boat"),a.stage0ParticlesA=e.getObjectByName("particles0a"),a.stage0ParticlesB=e.getObjectByName("particles0b"),a.stage0ParticlesC=e.getObjectByName("particles0c"),a.particleFade=0,a.topHandContainer=e.getObjectByName("topArmContainer"),a.topHand=e.getObjectByName("topArm"),a.topHandPalm=e.getObjectByName("topHandPalm"),a.topHandPalmWorldPos=new THREE.Vector3,a.bottomArmContainer=e.getObjectByName("bottomArmContainer"),a.bottomHand=e.getObjectByName("bottomArm"),a.bottomHandPalm=e.getObjectByName("bottomHandPalm"),a.bottomHandPalmWorldPos=new THREE.Vector3,a.topHand.position.y=40,a.bottomHand.position.y=9,a.handBasePositions=[],a.handBasePositions.push(a.topHandContainer.position),a.handBasePositions.push(a.bottomArmContainer.position),a.projTopHandBasePositionsArray=[a.handBasePositions[0].x,a.handBasePositions[0].y,a.handBasePositions[0].z,a.handBasePositions[1].x,a.handBasePositions[1].y,a.handBasePositions[1].z],a.projPositions=null,a.topLookAtVector=new THREE.Vector2,a.topHand.position.y=40,a.bottomHand.position.y=9,a.palmsDistance=999,a.stage2Duration=2.3,a.stage2BrightnessStart=2.1,a.stage2BrightnessEnd=2.28,a.stage3BrightnessFadeDuration=.3,t.scenesMouseDownHandlers[9]=scene9MouseDown,t.scenesMouseUpHandlers[9]=scene9MouseUp,a.isDraggingHand=!1,a.godrays=e.getObjectByName("shine"),t.needsTime[9]=[];var n=a.godrays.material.uniforms.map.value;a.godrays.material=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:n},time:{type:"f",value:200*Math.random()}},vertexShader:document.getElementById("treeGodraysVertexShader").textContent,fragmentShader:document.getElementById("treeGodraysFragmentShader").textContent,side:THREE.DoubleSide,transparent:!0,blending:THREE.AdditiveBlending}),t.needsTime[9].push(a.godrays.material),a.canHideTutorial=!1,a.tutorialDiv=document.createElement("div"),a.tutorialDiv.id="scene9Tutorial",t.sceneTextsContainer.appendChild(a.tutorialDiv),a.tutorialDiv.style.position="absolute",a.tutorialDiv.style.top=0,a.tutorialDiv.style.left=0,a.tutorialDiv.style.transform="translate(-9999px, -9999px)",a.tutorialDiv.className="hidden",a.tutorialTexDiv=document.createElement("div"),a.tutorialTexDiv.style.fontFamily="bodyFont",a.tutorialTexDiv.style.fontSize="10px",a.tutorialTexDiv.style.letterSpacing="0.14em",a.tutorialTexDiv.style.textTransform="uppercase",a.tutorialTexDiv.style.color="white",a.tutorialTexDiv.innerText="-",a.tutorialDiv.appendChild(a.tutorialTexDiv),t.positionedDivTextUpdates.push({div:a.tutorialTexDiv,tag:"handTutorial"}),a.tagline=e.getObjectByName("tagline"),a.tagLineWorldPos=new THREE.Vector3,a.tagLineWindowPos={x:0,y:0},a.taglineDiv=document.createElement("div"),a.taglineDiv.id="scene9Tagline",t.sceneTextsContainer.appendChild(a.taglineDiv),a.taglineDiv.style.position="absolute",a.taglineDiv.style.top=0,a.taglineDiv.style.left=0,a.taglineDiv.className="hidden",a.taglineDiv.style.transform="translate(-9999px, -9999px)",a.stringBuilder=[],a.taglineTexDiv=document.createElement("div"),a.taglineTexDiv.style.fontFamily="Parkinson Cond",a.taglineTexDiv.style.fontSize="5vmin",a.taglineTexDiv.style.color="rgb(90, 90, 90)",a.taglineTexDiv.style.marginLeft="-50%",a.taglineTexDiv.style.marginTop="-10%",a.taglineTexDiv.innerText="-",a.taglineDiv.appendChild(a.taglineTexDiv),t.positionedDivTextUpdates.push({div:a.taglineTexDiv,tag:"tagline"}),a.tutorialDivFixedPos="translate(50vw, 20vh)"}function scene9MouseDown(){return 0===updateData.sceneData[9].currentStage?updateData.mousePos.x>.3&&updateData.mousePos.x<.7&&updateData.mousePos.y<.3?(updateData.sceneData[9].isDraggingHand=!0,!0):(updateData.sceneData[9].isDraggingHand=!1,!1):!0}function scene9MouseUp(){updateData.sceneData[9].isDraggingHand=!1}function setupLoadingBackground(){var e=new THREE.PlaneGeometry(2,2,1,1),t=new THREE.ShaderMaterial({uniforms:{color:{type:"f",value:.066},alpha:{type:"f",value:1}},vertexShader:document.getElementById("loadingBackgroundVertexShader").textContent,fragmentShader:document.getElementById("loadingBackgroundFragmentShader").textContent,transparent:!0,depthTest:!1,depthWrite:!1}),a=new THREE.Mesh(e,t);return a.frustumCulled=!1,a}function setupLoadingBar(){var e=new THREE.PlaneGeometry(2,.011,100,1),t=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:null},backColor:{type:"f",value:.27},frontColor:{type:"f",value:.85},time:{type:"f",value:0},mouseVelocity:{type:"f",value:0},mouseXPosition:{type:"f",value:.5},progress:{type:"f",value:0},alpha:{type:"f",value:-.8}},vertexShader:document.getElementById("loadingBarVertexShader").textContent,fragmentShader:document.getElementById("loadingBarFragmentShader").textContent,transparent:!0,depthTest:!1,depthWrite:!1}),a=new THREE.Mesh(e,t);return a.frustumCulled=!1,a}var AudioManager=function(){function e(e,t){this.sceneSounds={},this.loadingSounds={sounds:[],index:0,numSounds:1},this.transitionSounds={},this.uiSounds={},this.loadCounter=0,this.loadCounterTotal=0,loadSounds(this.sceneSounds,this.transitionSounds,this.loadingSounds,this.uiSounds,this.loadCounter,this.loadCounterTotal,this,t),this.sceneSoundKeys=Object.keys(this.sceneSounds),this.sceneAudio=[],this.ids={};for(var a=0;e>a;a++)this.sceneAudio.push([])}return e.prototype.setLoop=function(e,t){this.sceneSounds[e].loop(t)},e.prototype.setVolume=function(e,t){this.sceneSounds[e].volume(t)},e.prototype.playTransition=function(e){"undefined"!=typeof this.transitionSounds[e]&&this.transitionSounds[e].play()},e.prototype.fadeOutLoadingMusic=function(e){this.sceneSounds.loadingMusic.fade(this.sceneSounds.loadingMusic.volume(),0,e)},e.prototype.stopSound=function(e,t){this.sceneSounds[e].stop();var a=300;"undefined"!=typeof t&&(a=t),this.sceneSounds[e].fade(this.sceneSounds[e].volume,0,a,function(e){})},this.loadingSounds={sounds:[],index:0,numSounds:1},e.prototype.playLoadingSound=function(){this.loadingSounds.sounds[this.loadingSounds.index].play(),this.loadingSounds.index++,this.loadingSounds.index%=this.loadingSounds.numSounds},e.prototype.playUISound=function(e){this.uiSounds[e].play()},e.prototype.playSound=function(e,t,a){"undefined"!=typeof t&&this.sceneAudio[t].push(this.sceneSounds[e]),this.sceneSounds[e].play(),this.sceneSounds[e].volume(0);var i=1;"undefined"!=typeof a&&(i=a),this.sceneSounds[e].fade(0,i,400,function(e){})},e.prototype.stopSceneSounds=function(e){function t(){i++,i===a.sceneAudio[e].length&&(a.sceneAudio[e]=[])}if(this.sceneAudio[e].length>0)for(var a=this,i=0,n=0,o=this.sceneAudio[e].length;o>n;n++)this.sceneAudio[e][n].fade(this.sceneAudio[e][n].volume(),0,4e3,t)},e.prototype.instantStopAllSceneSounds=function(){updateData.isKillingPreviousSounds=!0;for(var e=0,t=this.sceneSoundKeys.length;t>e;e++)this.sceneSounds[this.sceneSoundKeys[e]].stop();updateData.isKillingPreviousSounds=!1},e}(),BufferParticles=function(){function e(e,t,a,i){renderer.extensions.get("ANGLE_instanced_arrays")===!1&&console.log("missing ANGLE_instanced_arrays webGL extension :("),this.numParticles=t.numParticles,"box"===t.spawner&&(e.geometry.computeBoundingBox(),this.spawnSize=[e.geometry.boundingBox.max.x,e.geometry.boundingBox.max.y,e.geometry.boundingBox.max.z]),this.maxLife=t.life,this.maxRespawnDelay=t.maxRespawnDelay,this.direction=t.direction,this.gravity=new THREE.Vector3,this.tmpGravity=new THREE.Vector3,"undefined"!=typeof t.gravity&&(this.gravity=new THREE.Vector3(t.gravity[0],t.gravity[1],t.gravity[2])),this.baseVelocityRandomness=t.directionRandomness,this.speed=t.speed,this.minSize=t.minSize,this.maxSize=t.maxSize,this.quadAspectRatio=t.quadAspectRatio,this.minAlpha=t.minAlpha,this.maxAlpha=t.maxAlpha,this.useCurlNoise=t.useCurlNoise,this.curlNoiseScale=t.curlNoiseScale,this.curlNoiseTimeMovement=t.curlNoiseTimeMovement,this.simplex0=new SimplexNoise,this.tmpVelocity=new THREE.Vector3,this.tmpOffset=new THREE.Vector3,this.lifeDurations=new Array(this.numParticles),this.respawnDelay=new Array(this.numParticles),this.lifeCounters=new Array(this.numParticles),this.useMouseVelocityDelta=t.useMouseVelocityDelta,this.useMouseVelocityDeltaAmount=1,"undefined"!=typeof t.useMouseVelocityDeltaAmount&&(this.useMouseVelocityDeltaAmount=t.useMouseVelocityDeltaAmount),this.runtime=0,this.material=new THREE.RawShaderMaterial({uniforms:{map:{type:"t",value:a},aspect:{type:"f",value:1},fade:{type:"f",value:1},fadeOut:{type:"f",value:1}},vertexShader:document.getElementById("particleVertexShader").textContent,fragmentShader:document.getElementById("particleFragmentShader").textContent,side:THREE.DoubleSide,transparent:!0,depthWrite:!1}),t.additve&&(this.material.blending=THREE.AdditiveBlending);var n=new THREE.Mesh(this.createBuffers(this.numParticles,i,e.userData.textureName),this.material);n.renderOrder=10,n.frustumCulled=!1,n.renderOrder=0,e.add(n),this.playAudioOnRevive=t.playAudioOnRevive,this.playAudioOnRevive&&(this.audioLifeLengthSwitch=t.audioLifeLengthSwitch,this.soundNames=t.soundNames)}return e.prototype.createBuffers=function(e,t,a){var i=new THREE.InstancedBufferGeometry,n=[],o=[],s=[],r=[];this.numTextures=1;var u,l;Array.isArray(a)?this.numTextures=a.length:a=[a];for(var d=0,m=0;m<this.numTextures;m++){var c=getPolygonDataFromSpritesheet(t,a[m]);for(u=0,l=c.positions.length;l>u;u+=3)n.push(c.positions[u]-.5,c.positions[u+1]-.5),r.push(m);for(u=0,l=c.uvs.length;l>u;u++)o.push(c.uvs[u]);for(u=0,l=c.indices.length;l>u;u++)s.push(d+c.indices[u]);d+=c.positions.length/3}for(i.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(o),2)),i.addAttribute("extrude",new THREE.BufferAttribute(new Float32Array(n),2)),i.addAttribute("textureId",new THREE.BufferAttribute(new Float32Array(r),1)),i.setIndex(new THREE.BufferAttribute(new Uint16Array(s),1)),this.offsets=new THREE.InstancedBufferAttribute(new Float32Array(3*e),3,1).setDynamic(!0),u=0,l=this.offsets.count;l>u;u++)this.setNewPositionAt(u);for(i.addAttribute("offset",this.offsets),this.velocities=new THREE.InstancedBufferAttribute(new Float32Array(3*e),3,1).setDynamic(!0),u=0,l=this.velocities.count;l>u;u++)this.setNewVelocityAt(u);for(i.addAttribute("velocity",this.velocities),this.sizes=new THREE.InstancedBufferAttribute(new Float32Array(2*e),2,1).setDynamic(!0),u=0,l=this.sizes.count;l>u;u++)this.sizes.setXY(u,getRandomRange(this.minSize,this.maxSize),getRandomRange(this.minSize,this.maxSize)*this.quadAspectRatio);for(i.addAttribute("size",this.sizes),this.durations=new THREE.InstancedBufferAttribute(new Float32Array(e),1,1).setDynamic(!0),u=0,l=this.durations.count;l>u;u++)this.durations.setX(u,0),this.setNewLifeAt(u);for(i.addAttribute("duration",this.durations),this.textureShowIds=new THREE.InstancedBufferAttribute(new Float32Array(e),1,1).setDynamic(!0),u=0,l=this.textureShowIds.count;l>u;u++)this.setNewTextureShowIdAt(u);for(i.addAttribute("textureShowId",this.textureShowIds),this.alphas=new THREE.InstancedBufferAttribute(new Float32Array(e),1,1).setDynamic(!0),u=0,l=this.alphas.count;l>u;u++)this.alphas.setX(u,getRandomRange(this.minAlpha,this.maxAlpha));return i.addAttribute("alpha",this.alphas),i},e.prototype.setNewPositionAt=function(e){var t=2*(Math.random()-.5)*this.spawnSize[0],a=2*(Math.random()-.5)*this.spawnSize[1],i=2*(Math.random()-.5)*this.spawnSize[2];this.offsets.setXYZ(e,t,a,i)},e.prototype.setNewVelocityAt=function(e){var t=this.direction[0]+getRandomRange(-this.baseVelocityRandomness,this.baseVelocityRandomness),a=this.direction[1]+getRandomRange(-this.baseVelocityRandomness,this.baseVelocityRandomness),i=this.direction[2]+getRandomRange(-this.baseVelocityRandomness,this.baseVelocityRandomness);this.velocities.setXYZ(e,t,a,i)},e.prototype.setNewLifeAt=function(e){this.lifeDurations[e]=this.maxLife*getRandomRange(.3,1),this.respawnDelay[e]=this.maxRespawnDelay*getRandomRange(.3,1),this.lifeCounters[e]=0},e.prototype.setNewTextureShowIdAt=function(e){this.textureShowIds.setX(e,Math.floor(this.numTextures*Math.random()))},e.prototype.update=function(e){this.curl=[0,0,0],this.runtime+=e.delta;for(var t=0,a=this.offsets.count;a>t;t++){var i=3*t;this.tmpOffset.set(this.offsets.array[i],this.offsets.array[i+1],this.offsets.array[i+2]),this.useCurlNoise?(computeCurl(this.tmpOffset.x*this.curlNoiseScale[0]+this.runtime*this.curlNoiseTimeMovement[0],this.tmpOffset.y*this.curlNoiseScale[1]+this.runtime*this.curlNoiseTimeMovement[1],this.tmpOffset.z*this.curlNoiseScale[2]+this.runtime*this.curlNoiseTimeMovement[2],this.curl,this.simplex0),this.tmpVelocity.set(lerp(this.velocities.array[i],this.curl[0],.2),lerp(this.velocities.array[i+1],this.curl[1],.2),lerp(this.velocities.array[i+2],this.curl[2],.2))):this.tmpVelocity.set(this.velocities.array[i],this.velocities.array[i+1],this.velocities.array[i+2]),this.tmpVelocity.normalize().multiplyScalar(e.delta*this.speed),this.tmpGravity.copy(this.gravity),this.tmpGravity.multiplyScalar(e.delta),this.tmpVelocity.add(this.tmpGravity),this.velocities.setXYZ(t,this.tmpVelocity.x,this.tmpVelocity.y,this.tmpVelocity.z),this.useMouseVelocityDelta&&this.tmpVelocity.multiplyScalar(1+100*e.mouseVelocityAnim*this.useMouseVelocityDeltaAmount),this.tmpOffset.add(this.tmpVelocity),this.offsets.setXYZ(t,this.tmpOffset.x,this.tmpOffset.y,this.tmpOffset.z),this.lifeCounters[t]+=e.delta,this.lifeCounters[t]>this.lifeDurations[t]+this.respawnDelay[t]&&(this.setNewPositionAt(t),this.setNewVelocityAt(t),this.setNewLifeAt(t),this.setNewTextureShowIdAt(t),this.playAudioOnRevive&&e.audioManager.playSound(this.lifeDurations[t]<this.audioLifeLengthSwitch?this.soundNames[0]:this.soundNames[1])),this.durations.setX(t,clamp(this.lifeCounters[t]/this.lifeDurations[t],0,1))}this.offsets.needsUpdate=!0,this.velocities.needsUpdate=!0,this.durations.needsUpdate=!0,this.material.uniforms.aspect.value=e.aspect},e}(),Screenshake=function(){function e(){this.timePosition=getRandomRange(0,200),this.simplex=new SimplexNoise,this.offset={x:0,y:0},this.frequency=1,this.distance=1,this.octaves=3,this.tempCoord={x:0,y:0},this.setBaseNoiseVectors(2)}return e.prototype.setBaseNoiseVectors=function(e){this.baseNoiseVectors=[],this.noisePositions=[];for(var t=0;e>t;t++){var a=Math.random()*Math.PI*2;this.baseNoiseVectors.push({x:Math.cos(a),y:Math.sin(a)}),this.noisePositions.push({x:0,y:0})}},e.prototype.updateNoisePosition=function(){for(var e=0,t=this.noisePositions.length;t>e;e++)this.noisePositions[e].x=this.baseNoiseVectors[e].x*this.timePosition,this.noisePositions[e].y=this.baseNoiseVectors[e].y*this.timePosition},e.prototype.setOctaves=function(e){this.octaves=e},e.prototype.setFrequency=function(e){this.frequency=e},e.prototype.setDistance=function(e){this.distance=e},e.prototype.step=function(e){this.timePosition+=e*this.frequency,this.updateNoisePosition(),this.offset.x=this.fbm(0,this.octaves),this.offset.y=this.fbm(1,this.octaves),this.offset.x*=this.distance,this.offset.y*=this.distance},e.prototype.getOffset=function(){return this.offset},e.prototype.fbm=function(e,t){this.f=0,this.w=1,this.tempCoord.x=this.noisePositions[e].x,this.tempCoord.y=this.noisePositions[e].y,this.noise=0;for(var a=0;t>a;a++)this.noise=this.simplex.noise(this.tempCoord.x,this.tempCoord.y),this.f+=this.w*this.noise,this.tempCoord.x*=2,this.tempCoord.y*=2,this.w*=.5;return this.f},e}(),uiConfig={pointerNormalInner:.029,pointerNormalOuter:.029,pointerClickedInner:0,pointerClickedOuter:.015,pointerNormalAlpha:.8,pointerOutsideInteractionAlpha:0,pointerOutsideInteractionInner:0,pointerOutsideInteractionOuter:0,pointerClickedAlpha:.95,transitionCirclesYOffset:.3,transitionCirclesYMouseClosingDistance:.07,transitionCirclesAlpha:.9,transitionCirclesSmall:.008,transitionCirclesBig:.03,transitionCirclesSelectedSize:.06,transitionStartDistance:.02,mouseValidYRange:{t:.7,b:-.7},touchTransitionMaxMovement:.001,touchTransitionMinHold:150,transitionQuadHeight:7.5,visibleTransitionQuadEdge:.04,mainTextMeshRelHeight:.8,maxVolume:.9,headlineAnimDuration:5,headlineAnimHoldDuration:.9},GoalDriver=function(){function e(e){this.params=e}return e.prototype.reset=function(){},e.prototype.update=function(e){},e}(),GoalDriverRandomLoop=function(){function e(e){this.params=e,this.reset()}return e.prototype.reset=function(){this.positionX=this.params.startPosition,this.positionXGoal=this.params.startGoal,this.timeToNextMove=this.params.startTimeToNextMove,this.velocity=this.params.startVelocity,this.startDelay=this.params.startDelay,this.startDriving=!1},e.prototype.update=function(e){if(this.startDriving=!1,this.startDelay>0)return this.startDelay-=e,this.positionX;var t;return t=this.positionX<this.positionXGoal?Math.min(this.params.maxSpeed,this.positionXGoal-this.positionX):0,this.velocity=lerpClamped(this.velocity,t,e*this.params.acceleration),this.positionXGoal-this.positionX<0&&(this.timeToNextMove-=e),this.positionX+=this.velocity,this.timeToNextMove<0&&(this.positionXGoal+=getRandomRange(this.params.minGoalDistance,this.params.maxGoalDistance),this.timeToNextMove=getRandomRange(this.params.minTimeToNextMove,this.params.maxTimeToNextMove),this.startDriving=!0),this.positionX>this.params.maxPosition&&(this.positionX=this.params.loopPosition,this.positionXGoal=this.params.loopGoal),this.positionX},e}();String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var a=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>a.length)&&(t=a.length),t-=e.length;var i=a.indexOf(e,t);return-1!==i&&i===t}),"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var a,i=arguments.length;for(a=0;i>a;a++)e=arguments[a],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:a.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",a="prototype",i=e.Element[a],n=Object,o=String[a].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[a].indexOf||function(e){for(var t=0,a=this.length;a>t;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},u=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},l=function(e){for(var t=o.call(e.getAttribute("class")||""),a=t?t.split(/\s+/):[],i=0,n=a.length;n>i;i++)this.push(a[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},d=l[a]=[],m=function(){return new l(this)};if(r[a]=Error[a],d.item=function(e){return this[e]||null},d.contains=function(e){return e+="",-1!==u(this,e)},d.add=function(){var e,t=arguments,a=0,i=t.length,n=!1;do e=t[a]+"",-1===u(this,e)&&(this.push(e),n=!0);while(++a<i);n&&this._updateClassName()},d.remove=function(){var e,t,a=arguments,i=0,n=a.length,o=!1;do for(e=a[i]+"",t=u(this,e);-1!==t;)this.splice(t,1),o=!0,t=u(this,e);while(++i<n);o&&this._updateClassName()},d.toggle=function(e,t){e+="";var a=this.contains(e),i=a?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!a},d.toString=function(){return this.join(" ")},n.defineProperty){var c={get:m,enumerable:!0,configurable:!0};try{n.defineProperty(i,t,c)}catch(p){-2146823252===p.number&&(c.enumerable=!1,n.defineProperty(i,t,c))}}else n[a].__defineGetter__&&i.__defineGetter__(t,m)}}(self));var Deg2Rad=Math.PI/180,Rad2Deg=180/Math.PI;CanvasRenderingContext2D&&!CanvasRenderingContext2D.renderText&&(CanvasRenderingContext2D.prototype.renderText=function(e,t,a,i){if(e&&"string"==typeof e&&0!==e.length){"undefined"==typeof i&&(i=0);var n,o=String.prototype.split.call(e,""),s=0,r=t,u=1;if("right"===this.textAlign)o=o.reverse(),u=-1;else if("center"===this.textAlign){for(var l=0,d=0;d<o.length;d++)l+=i;r=t-l/2}for(;s<e.length;)n=o[s++],this.fillText(n,r,a),r+=u*i}});var TouchesWrapper=function(){function e(){this.delta={x:0,y:0},this.startPos={x:0,y:0},this.stopPos={x:0,y:0},this.swipeDelta={x:0,y:0},this.startTime=99999999}return e.prototype.updateUpdateData=function(e,t,a){e.mousePos.x=this.posX,e.mousePos.y=this.posY,e.mouseVelocity=2*this.absVelocity,e.mouseXVelocity=this.delta.x,e.mouseYVelocity=this.delta.y,e.lockMouse||(t.uiMousePos.x=map(e.mousePos.x,0,1,-1,1),t.uiMousePos.y=map(e.mousePos.y,0,1,1,-1))},e.prototype.touchStart=function(e,t,a,i){this.posX=e.touches[0].pageX/window.innerWidth,this.posY=e.touches[0].pageY/window.innerHeight,this.posXOld=this.posX,this.posYOld=this.posY,this.startPos.x=this.posX,this.startPos.y=this.posY,this.delta.x=0,this.delta.y=0,this.absVelocity=0,this.updateUpdateData(t,a,i),this.startTime=Date.now()/1e3|0},e.prototype.touchMove=function(e,t,a,i){this.posXOld=this.posX,this.posYOld=this.posY,this.posX=clamp(e.touches[0].pageX/window.innerWidth,0,1),this.posY=clamp(e.touches[0].pageY/window.innerHeight,0,1),this.delta.x=clamp(this.posX-this.posXOld,0,1),this.delta.y=clamp(this.posY-this.posYOld,0,1),t.mouseXVelocity=this.delta.x,t.mouseYVelocity=this.delta.Y,this.absVelocity=clamp(Math.abs(this.delta.x)+Math.abs(this.delta.y),0,1),this.updateUpdateData(t,a,i),this.absVelocity>i.touchTransitionMaxMovement&&window.clearTimeout(t.touchTransitionTimeoutID)},e.prototype.touchEnd=function(e,t,a,i){this.stopPos.x=e.pageX/window.innerWidth,this.stopPos.y=e.pageY/window.innerHeight,this.swipeDelta.x=this.startPos.x-this.stopPos.x,this.swipeDelta.y=this.startPos.y-this.stopPos.y,9===t.sceneId&&t.sceneData[9].currentStage>0||!(t.sceneId>0)&&t.usesMouse||(t.uiElements.tutorialWasCompleted||!t.usesMouse)&&(Date.now()/1e3|0)-this.startTime<.03&&Math.abs(this.swipeDelta.x)<.3&&Math.abs(this.swipeDelta.y)>.23&&(this.swipeDelta.y>0?goToNextScene():goToPreviousScene())},e}();</script><div id=container></div><div id=sceneTextsContainer></div><div id=goDownInstructions syle="display: none"><div></div></div><div id=noWebGl style="display: none;"></div><script>
		var numScenes = 10;
	</script><script id=animatedSpriteVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float frame; attribute float frameIndex; varying vec2 vUV; void main() { vUV = uv; vec3 pos = position; if (frame < frameIndex || frame > frameIndex + 1.0) { pos = vec3(0.0, -999.0, 0.0); } gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0); }</script><script id=animatedSpriteColorFadeVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float frame; uniform vec3 marchDirection; uniform float marchAmount; uniform float yOffset; attribute float frameIndex; attribute vec3 centerPosition; attribute vec2 normalizedUv; varying vec2 vUV; varying float fade; varying float fadeWhite; varying float fadeBlack; float cubicPulse( float c, float w, float x ) { x = abs(x - c); if( x > w ) return 0.0; x /= w; return 1.0 - x*x*(3.0-2.0*x); } void main() { vUV = uv; vec3 pos = position; vec3 marchOffset = marchDirection * marchAmount; pos += marchOffset; if (frame < frameIndex || frame > frameIndex + 1.0) { pos = vec3(0.0, -999.0, 0.0); } marchOffset += centerPosition; vec4 mvPos = modelViewMatrix * vec4(marchOffset, 1.0); mvPos -= yOffset; float leftToRightGradient = smoothstep(300.0, -120.0, mvPos.x); fade = clamp(normalizedUv.y * smoothstep(-30.0, 90.0, mvPos.y) * (leftToRightGradient + 0.1), 0.0, 1.0); fade = cubicPulse(30.0, 150.0, mvPos.y); fade *= cubicPulse(-100.0, 400.0, mvPos.x); fade *= normalizedUv.y; fade -= -0.2 + 0.3 * normalizedUv.x; fade = clamp(fade, 0.0, 1.0); fadeWhite = mvPos.y; fadeWhite += 20.0 * leftToRightGradient; fadeWhite += 10.0 * normalizedUv.y; fadeWhite = smoothstep(50.0, 140.0, fadeWhite); fadeBlack = mvPos.y; fadeBlack += 20.0 * leftToRightGradient; fadeBlack += 10.0 * normalizedUv.y; fadeBlack = smoothstep(-30.0, -100.0, fadeBlack); gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0); }</script><script id=basicMeshVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float noiseOffset; uniform float alpha; varying vec2 vUV; void main() { vUV = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }</script><script id=cloudNoiseVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float cloudScale; uniform float offset; uniform float aspect; uniform float time; uniform float cloudSpeed; varying vec2 vPosition; varying vec2 vPositionDisplace; varying vec2 vUV; void main() { vUV = uv; vPosition = position.xy; vPosition.xy *= cloudScale; vPosition.x *= aspect; vPosition += offset; vPosition.y -= time * cloudSpeed; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }</script><script id=fadedtextVertexShader type=x-shader/x-fragment>uniform float xScale; uniform float yScale; uniform float yOffset; varying vec2 vUv; void main() { vUv = uv; vec3 vPosition = position; vPosition.y += yOffset; vPosition.x *= xScale; vPosition.y *= yScale; gl_Position = vec4(vPosition, 1.0 ); }</script><script id=horizontalWobblerVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); } float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i = floor(v + dot(v, C.yy) ); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x = a0.x * x0.x + h.x * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); } float cubicPulse( float c, float w, float x ) { x = abs(x - c); if( x>w ) return 0.0; x /= w; return 1.0 - x*x*(3.0-2.0*x); } uniform float time; uniform float mouseVelocityAnim; uniform float noiseStartOffset; uniform float topNoiseScale; uniform float topNoiseSpeed; uniform float topNoiseOffset; uniform float bottomNoiseScale; uniform float bottomNoiseSpeed; uniform float bottomNoiseOffset; attribute float isTop; varying vec2 vUV; void main() { vUV = uv; float topOffset = 0.0; float bottomOffset = 0.0; vec2 topNoisePosition = vec2(time * topNoiseSpeed, noiseStartOffset); topOffset = snoise(topNoisePosition * topNoiseScale) * topNoiseOffset; vec2 bottomNoisePosition = vec2(time * bottomNoiseSpeed, noiseStartOffset); bottomOffset = snoise(bottomNoisePosition * bottomNoiseScale) * bottomNoiseOffset; vec3 vPosition = position; vPosition.x += mix(bottomOffset, topOffset, isTop) * (1.0 + mouseVelocityAnim); gl_Position = projectionMatrix * modelViewMatrix * vec4(vPosition, 1.0); }</script><script id=loadingBackgroundVertexShader type=x-shader/x-vertex>precision mediump float; precision mediump int; uniform float color; uniform float alpha; varying vec4 vColor; void main() { vColor = vec4(color, color, color, alpha); gl_Position = vec4(position, 1.0); }</script><script id=loadingBarVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); } float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i = floor(v + dot(v, C.yy) ); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x = a0.x * x0.x + h.x * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); } float cubicPulse( float c, float w, float x ) { x = abs(x - c); if( x>w ) return 0.0; x /= w; return 1.0 - x*x*(3.0-2.0*x); } uniform float time; uniform float mouseVelocity; uniform float mouseXPosition; varying vec2 vUV; varying vec2 vTexUv; void main() { vUV = uv; vTexUv = uv; vTexUv.x *= 2.0; vTexUv.x += time * 0.2; vec3 vPosition = position; vec2 noisePosition = vec2(uv.x * 3.0 + time * 0.5, 0.0); vPosition.y *= 0.5 + abs(snoise(noisePosition * 100.0 + time * 0.5)) * 0.5; vPosition.y += snoise(noisePosition) * (0.03 + 2.0 * cubicPulse(mouseXPosition, 0.3, uv.x) * mouseVelocity); gl_Position = vec4(vPosition, 1.0); }</script><script id=noiseFadedTextureVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float time; uniform float fadeNoiseScale; uniform float fadeNoiseSpeed; varying vec2 vPosition; varying vec2 vUV; void main() { vUV = uv; vPosition = position.xy; vPosition -= time * fadeNoiseSpeed; vPosition.xy *= fadeNoiseScale; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }</script><script id=noiseSpecksVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; float rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } uniform float time; uniform float aspect; uniform float range; uniform float rangeSize; uniform float rangeEnd; uniform float scaler; attribute float offset; varying vec2 vUV; void main() { vUV = uv; vec3 pos = position; pos *= scaler; pos.x /= aspect; vec2 noisePos = vec2(time, offset); pos.x += rand(noisePos) * 2.0 - 1.0; noisePos.x += offset; pos.y += rand(noisePos) * 2.0 - 1.0; if (offset < range || offset > rangeEnd) { pos.x = 0.0; pos.y = 20.0; pos.z = 0.0; } gl_Position = vec4(pos, 1.0); }</script><script id=particleVertexShader type=x-shader/x-vertex>float pcurve( float x, float a, float b ) { float k = pow(a+b,a+b) / (pow(a,a)*pow(b,b)); return k * pow( x, a ) * pow( 1.0-x, b ); } precision highp float; uniform mat4 modelViewMatrix; uniform mat4 projectionMatrix; uniform float aspect; uniform float fade; uniform float fadeOut; attribute vec3 position; attribute vec3 offset; attribute vec2 extrude; attribute vec2 uv; attribute float textureId; attribute float textureShowId; attribute vec3 velocity; attribute vec2 size; attribute float duration; attribute float alpha; varying vec2 vUV; varying float vAlpha; void main() { vUV = extrude; vAlpha = pcurve(duration, 0.4, 0.6); vAlpha *= alpha; vAlpha *= fadeOut; vec4 mvPosition = modelViewMatrix * vec4( offset, 1.0 ); vec3 clampVel = velocity; clampVel.z = 0.0; clampVel.x *= 1.0 + aspect; mvPosition.xyz += normalize(clampVel) * vUV.x * -size.x; mvPosition.xyz += normalize(cross(clampVel, vec3(0.0, 0.0, -1.0))) * vUV.y * size.y ; vUV = uv; if (vAlpha > fade || textureId < textureShowId || textureId > textureShowId + 1.0) { mvPosition = vec4(0.0, 0.0, 0.0, 0.0); } gl_Position = projectionMatrix * mvPosition; }</script><script id=scenesOutputVertexShader type=x-shader/x-fragment>uniform float yOffset; varying vec2 vUv; void main() { vUv = uv; vec3 outPosition = position; outPosition.y += yOffset; gl_Position = vec4( outPosition, 1.0 ); }</script><script id=simpleTextVertexShader type=x-shader/x-fragment>uniform float alpha; uniform float color; varying vec4 vColor; varying vec2 vUv; void main() { vUv = uv; vColor = vec4(color, color, color, alpha); gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }</script><script id=spotlightVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float time; varying vec2 vLargeNoisePosition; varying vec2 vSmallNoisePosition; varying vec2 vUV; void main() { vUV = uv; vLargeNoisePosition = vUV; vLargeNoisePosition.x *= 0.2; vLargeNoisePosition.y *= 130.0; vLargeNoisePosition.x += time * 0.5; vSmallNoisePosition = 200.0 * (0.3 * modelViewMatrix[0][0] + vUV); vSmallNoisePosition.x *= 0.6; vSmallNoisePosition.y *= 1.5; vSmallNoisePosition.x += time * 1.3; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }</script><script id=textureControlledOverExposureVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float noiseOffset; uniform float alpha; attribute vec2 controlUVs; varying vec2 vUV; void main() { vUV = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }</script><script id=textureOverexposeVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float noiseOffset; uniform vec3 overlayColor; uniform float alpha; varying vec2 vUV; void main() { vUV = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }</script><script id=treeGodraysVertexShader type=x-shader/x-vertex>precision highp float; precision mediump int; uniform float time; varying vec2 vLargeNoisePosition; varying vec2 vUV; void main() { vUV = uv; vLargeNoisePosition = vUV; vLargeNoisePosition.x *= 0.2; vLargeNoisePosition.y *= 1500.0; vLargeNoisePosition.x += time * 0.9; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }</script><script id=transitionOverlayVertexShader type=x-shader/x-fragment>precision highp float; uniform float yOffset; uniform float frame; uniform float aspect; uniform float xUvOffset; attribute float frameIndex; varying vec2 vUv; void main() { vUv = uv; vec3 outPosition = position; outPosition.x += xUvOffset; outPosition.y += yOffset; if (frame < frameIndex || frame > frameIndex + 1.0) { outPosition = vec3(0.0, -999.0, 0.0); } gl_Position = vec4( outPosition, 1.0 ); }</script><script id=uiButtonVertexShader type=x-shader/x-vertex>precision highp float; uniform float alpha; uniform float aspect; varying vec2 vColor; void main() { vec3 vPosition = position; vPosition.x /= aspect; vColor = vec2(1.0,alpha); gl_Position = vec4(vPosition, 1.0); }</script><script id=uiCirclesVertexShader type=x-shader/x-vertex>precision highp float; uniform vec2 pos; uniform float innerSize; uniform float outerSize; uniform float alpha; uniform float aspect; attribute float fade; attribute float isInner; varying vec2 vColor; void main() { float vExtrude = mix(outerSize, innerSize, isInner); vec3 vPosition = position; vPosition *= vExtrude; vec3 outerFadeOffset = normalize(position) * 0.003; if (fade < 0.5) { if (isInner > 0.5 && innerSize > 0.0) { vPosition -= outerFadeOffset; } else { vPosition += outerFadeOffset; } } vPosition.x /= aspect; vPosition.xy += pos; vColor = vec2(1.0, fade * alpha); gl_Position = vec4(vPosition, 1.0); }</script><script id=uiTextureButtonVertexShader type=x-shader/x-vertex>precision highp float; uniform float alpha; uniform float aspect; varying vec2 vUV; varying vec2 vColor; void main() { vUV = uv; vec3 vPosition = position; vPosition.x /= aspect; vColor = vec2(1.0,alpha); gl_Position = vec4(vPosition, 1.0); }</script><script id=verticalBlurVertexShader type=x-shader/x-fragment>uniform vec2 mapSize; varying vec2 hHBlur[3]; varying vec2 vHBlur[7]; void main() { hHBlur[0] = uv + vec2(mapSize.x * -1.0); hHBlur[1] = uv; hHBlur[2] = uv + vec2(mapSize.x * -1.0); vHBlur[0] = uv + vec2(0.0, mapSize.y * -3.0); vHBlur[1] = uv + vec2(0.0, mapSize.y * -2.0); vHBlur[2] = uv + vec2(0.0, mapSize.y * -1.0); vHBlur[3] = uv; vHBlur[4] = uv + vec2(0.0, mapSize.y * 1.0); vHBlur[5] = uv + vec2(0.0, mapSize.y * 2.0); vHBlur[6] = uv + vec2(0.0, mapSize.y * 3.0); gl_Position = vec4( position, 1.0 ); }</script><script id=animatedSpriteFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; uniform sampler2D map; varying vec2 vUV; void main() { gl_FragColor = texture2D(map, vUV); }</script><script id=animatedSpriteColorFadeFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; uniform sampler2D map; varying vec2 vUV; varying float fade; varying float fadeWhite; varying float fadeBlack; void main() { vec4 color = texture2D(map, vUV); color.rgb = mix(color.rgb, vec3(1.3, 1.3, 1.3), fade); color.rgb = mix(color.rgb, vec3(0.1, 0.1, 0.1), fadeBlack); color.rgb = mix(color.rgb, vec3(0.8, 0.8, 0.8), fadeWhite); gl_FragColor = color; }</script><script id=basicMeshFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; uniform sampler2D map; varying vec2 vUV; void main() { vec2 uv = vUV; gl_FragColor = texture2D(map, uv); }</script><script id=cloudNoiseFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); } float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i = floor(v + dot(v, C.yy) ); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x = a0.x * x0.x + h.x * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); } precision mediump int; uniform sampler2D map; uniform float color; uniform float alpha; uniform float displaceAmount; uniform vec2 uvStart; uniform vec2 uvSize; varying highp vec2 vPosition; varying highp vec2 vPositionDisplace; varying vec2 vUV; void main() { float diplace = snoise(vPositionDisplace) * displaceAmount; diplace *= texture2D(map, vUV).r; vec2 repeatUV = vUV + diplace; repeatUV.x = uvStart.x + mod(repeatUV.x, uvSize.x); repeatUV.y = uvStart.y + mod(repeatUV.y, uvSize.y); float mapValue = texture2D(map, vUV).r; float col = snoise(vPosition) * 0.5 + 0.5; col *= mapValue; float outCol = col * color; gl_FragColor = vec4(outCol, outCol, outCol, col * alpha); }</script><script id=fadedtextFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; float rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); } float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i = floor(v + dot(v, C.yy) ); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x = a0.x * x0.x + h.x * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); } uniform sampler2D map; uniform sampler2D alphaMap; uniform float noiseOffset; uniform float alpha; uniform float modAlpha; uniform float xDirection; uniform float yDirection; varying vec2 vUv; void main() { float cAlpha = alpha + modAlpha; float colAlpha = texture2D(alphaMap, vUv).r; colAlpha = smoothstep(cAlpha, cAlpha + 0.4, colAlpha); vec2 modUv = vUv; float amount = (1.0 - colAlpha) * 3.0; vec2 noiseUv = vUv + amount * 3.0; noiseUv *= 0.2; float xOffset = snoise(noiseUv); xOffset += xDirection * 2.0; xOffset *= amount; xOffset *= 0.116; float yOffset = snoise(noiseUv - xOffset); yOffset += yDirection * 2.0; yOffset *= amount; yOffset *= 0.116; modUv.x += xOffset; modUv.y += yOffset; float hideVal = clamp( (1.5 - amount) * 9999.9, 0.0, 1.0 ); vec2 col = texture2D(map, modUv).aa; col.g *= smoothstep(1.2, 0.0, abs(xOffset) + abs(yOffset)); col.g *= hideVal; gl_FragColor = col.rrrg; }</script><script id=horizontalWobblerFragmentShader type=x-shader/x-fragment>precision mediump float; precision mediump int; uniform sampler2D map; varying vec2 vUV; void main() { gl_FragColor = texture2D(map, vUV); }</script><script id=loadingBackgroundFragmentShader type=x-shader/x-fragment>precision mediump float; precision mediump int; varying vec4 vColor; void main() { gl_FragColor = vColor; }</script><script id=loadingBarFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; float rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } float parabola( float x, float k ) { return pow( 4.0*x*(1.0-x), k ); } uniform sampler2D map; uniform float backColor; uniform float frontColor; uniform float progress; uniform float alpha; varying vec2 vUV; varying vec2 vTexUv; void main() { float col = backColor; if (vUV.x < progress) { col = frontColor; } float vAlpha = alpha; vAlpha *= parabola(vUV.y, 2.0); vAlpha *= 1.0 - texture2D(map, vTexUv).r; vAlpha *= 0.7 + rand(vTexUv) * 0.3; gl_FragColor = vec4(col, col, col, vAlpha); }</script><script id=noiseFadedTextureFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; float cubicPulse( float c, float w, float x ) { x = abs(x - c); if( x>w ) return 0.0; x /= w; return 1.0 - x*x*(3.0-2.0*x); } vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); } float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i = floor(v + dot(v, C.yy) ); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x = a0.x * x0.x + h.x * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); } uniform sampler2D map; uniform vec2 uvStart; uniform vec2 uvSize; uniform float fadeNoiseClampBottom; uniform float fadeNoiseClampTop; uniform float fadeNoiseMultiplier; uniform float numTextureRepeatX; uniform float numTextureRepeatY; uniform float repeatEdgeBSFadeOut; uniform float outColor; uniform float fadeOutY; uniform float fadeOutYMin; uniform float fadeOutYMax; varying highp vec2 vPosition; varying vec2 vUV; void main() { float col = snoise(vPosition); col = smoothstep(fadeNoiseClampBottom, fadeNoiseClampTop, col); col *= fadeNoiseMultiplier; vec2 repeatUV = vec2(0.0, 0.0); repeatUV.x = uvStart.x + mod(vUV.x * numTextureRepeatX, uvSize.x); repeatUV.y = uvStart.y + mod(vUV.y * numTextureRepeatY, uvSize.y); vec2 mapData = texture2D(map, repeatUV).ra; mapData.y = smoothstep(0.98, 0.99, mapData.y); float mapAlpha = mapData.x * mapData.y; mapAlpha -= smoothstep(fadeOutYMin, fadeOutYMax, vUV.y) * fadeOutY; mapAlpha *= col; gl_FragColor = vec4(outColor, outColor, outColor, mapAlpha); }</script><script id=noiseSpecksFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; uniform sampler2D map; uniform float alpha; varying vec2 vUV; void main() { vec4 col = texture2D(map, vUV); col.a *= alpha; gl_FragColor = col; }</script><script id=particleFragmentShader type=x-shader/x-fragment>precision mediump float; precision mediump int; uniform sampler2D map; varying vec2 vUV; varying float vAlpha; void main() { vec4 color = texture2D(map, vUV); color.a *= vAlpha; gl_FragColor = color; }</script><script id=scenesOutputFragmentShader type=x-shader/x-fragment>float rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } uniform sampler2D map; uniform sampler2D blurred; uniform float noiseOffset; uniform float blurAmount; uniform float alpha; uniform float brightness; uniform float brightnessMultiplier; uniform float xResolutionMod; uniform float yResolutionMod; varying vec2 vUv; void main() { vec2 uv = vUv; uv += rand(vec2(vUv.x* 0.5, vUv.y*0.5 + noiseOffset)) * 0.0007; vec4 color = mix(texture2D(map, uv), texture2D(blurred, uv), blurAmount); vec2 noisePos = vec2(vUv.x, vUv.y + noiseOffset); noisePos.x -= mod(noisePos.x, xResolutionMod); noisePos.y -= mod(noisePos.y, yResolutionMod); color.rgb += rand(noisePos) * 0.08; color.a *= alpha; color.rgb += brightness; color.rgb *= brightnessMultiplier; gl_FragColor = color; }</script><script id=simpleTextFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; uniform sampler2D map; varying vec4 vColor; varying vec2 vUv; void main() { float colAlpha = texture2D(map, vUv).a; vec4 color = vColor; color.a *= colAlpha; gl_FragColor = color; }</script><script id=spotlightFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; float rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); } float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i = floor(v + dot(v, C.yy) ); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x = a0.x * x0.x + h.x * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); } uniform sampler2D map; varying vec2 vLargeNoisePosition; varying vec2 vSmallNoisePosition; varying vec2 vUV; void main() { float largeNoise = snoise(vLargeNoisePosition); float smallNoise = snoise(vSmallNoisePosition); largeNoise += 0.4; largeNoise = 0.8 + 0.3 * smoothstep(-0.2, 1.0, largeNoise); smallNoise *= 0.0002 * largeNoise; vec2 mapAlpha = texture2D(map, vUV + smallNoise).ra; mapAlpha.r *= 0.3; mapAlpha.g *= largeNoise; gl_FragColor = mapAlpha.rrrg; }</script><script id=textureControlledOverExposureFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; float cubicPulse( float c, float w, float x ) { x = abs(x - c); if ( x > w ) return 0.0; x /= w; return 1.0 - x * x * (3.0 - 2.0 * x); } uniform sampler2D map; uniform float time; uniform float additionalWidth; uniform float exposureAmount; varying vec2 vUV; float center = 0.5; float width = 0.25; void main() { vec2 uv = vUV; vec3 color = texture2D(map, uv).rag; float controlColor = color.z; controlColor += time; controlColor = fract(controlColor); color.x += (exposureAmount * cubicPulse(center, width + additionalWidth, controlColor)) * color.r; gl_FragColor = vec4(color.xxxy); }</script><script id=textureOverexposeFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; uniform sampler2D map; uniform float overexpose; varying vec2 vUV; varying vec4 vColor; void main() { vec2 uv = vUV; vec3 color = texture2D(map, uv).rga; color.r += color.g * overexpose; gl_FragColor = color.rrrb; }</script><script id=treeGodraysFragmentShader type=x-shader/x-fragment>precision highp float; precision mediump int; float rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); } float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i = floor(v + dot(v, C.yy) ); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x = a0.x * x0.x + h.x * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); } uniform sampler2D map; varying vec2 vLargeNoisePosition; varying vec2 vUV; void main() { float largeNoise = snoise(vLargeNoisePosition); largeNoise += 0.4; largeNoise = 0.1 * smoothstep(-0.2, 1.0, largeNoise); vec2 mapAlpha = texture2D(map, vUV).ra; mapAlpha.r *= 0.2; mapAlpha.g *= largeNoise; gl_FragColor = mapAlpha.rrrg; }</script><script id=transitionOverlayFragmentShader type=x-shader/x-fragment>float rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } uniform sampler2D map; uniform float noiseOffset; uniform float alpha; varying vec2 vUv; void main() { vec2 uv = vUv; uv += rand(vec2(vUv.x* 0.5, vUv.y*0.5 + noiseOffset)) * 0.0007; vec4 color = texture2D(map, uv); color.rgb += rand(vec2(vUv.x, vUv.y + noiseOffset)) * 0.06; color.a *= alpha; gl_FragColor = color; }</script><script id=uiButtonFragmentShader type=x-shader/x-fragment>precision mediump float; precision mediump int; varying vec2 vColor; void main() { gl_FragColor = vColor.xxxy; }</script><script id=uiCirclesFragmentShader type=x-shader/x-fragment>precision mediump float; precision mediump int; varying vec2 vColor; void main() { gl_FragColor = vColor.xxxy; }</script><script id=uiTextureButtonFragmentShader type=x-shader/x-fragment>precision mediump float; precision mediump int; uniform sampler2D map; varying vec2 vUV; varying vec2 vColor; void main() { vec4 color = texture2D(map, vUV); color.rgb *= vColor.x; color.a *= vColor.y; gl_FragColor = color; }</script><script id=verticalBlurFragmentShader type=x-shader/x-fragment>float rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } uniform sampler2D map; varying vec2 hHBlur[3]; varying vec2 vHBlur[7]; void main() { float color = 0.0; color += 0.1 * texture2D(map, hHBlur[0]).r; color += 0.1 * texture2D(map, hHBlur[2]).r; float div = 1.0 / 8.0; color += div * texture2D(map, vHBlur[0]).r; color += div * texture2D(map, vHBlur[1]).r; color += div * texture2D(map, vHBlur[2]).r; color += div * texture2D(map, vHBlur[3]).r; color += div * texture2D(map, vHBlur[4]).r; color += div * texture2D(map, vHBlur[5]).r; color += div * texture2D(map, vHBlur[6]).r; gl_FragColor = vec4(color, color, color, 1.0); }</script><script>for(var sceneContainer={scenes:new Array(numScenes),setup:new Array(numScenes),firstRun:new Array(numScenes),animate:new Array(numScenes),sceneTextures:new Array(numScenes),transition:null,scenesDataRaw:null,spritesheetDataRaw:null,noiseSpecksTexture:null,largeNoiseSpecksTexture:null,hasShownText:new Array(numScenes)},i=0,l=sceneContainer.hasShownText.length;l>i;i++)sceneContainer.hasShownText[i]=!1;var uiElements={uiMousePos:{x:0,y:0},mousePosTransitionStart:{x:0,y:0},mouseTransitionYRange:{b:0,t:0},pointerIsInsideActiveRange:!1,pointer:null,topCircle:null,bottomCircle:null,toTopCircle:0,toBottomCircle:0,transitionMaterialBottomHiddenPosition:0,transitionMaterialTopHiddenPosition:0,transitionMaterialBottomEdgePosition:0,transitionMaterialTopEdgePosition:0,transitionMaterialBottomHalfPosition:0,transitionMaterialTopHalfPosition:0,sceneMaterialBottomEdgePosition:0,sceneMaterialTopEdgePosition:0,mainTextCloseButton:null,mainTextCloseButtonRangeStart:{x:0,y:0},mainTextCloseButtonRangeEnd:{x:0,y:0},showMainText:!1,currentMainTextTitle:"",currentMainText:"",mainTextMesh:null,mainTextCanvas:null,mainTextCanvasContext:null,showHeadText:!1,headTextMesh:null,headTextCanvas:null,headTextCanvasContext:null,lang:"de",uiTexture:null,tutorialWasShown:!1,tutorialWasCompleted:!1,mouseshakeInstructionsWereShown:!1,mouseshakeInstruction:null,mouseshakeInstructionId:null,sceneTitleInfo:document.querySelector(".scene-info-button"),closeButton:document.querySelector(".overrideCloseButton"),mobileIntro:document.querySelector(".falter-intro-mobile-container"),chapterNav:document.querySelector(".nav-inner")},loc=location.href,lastSlashIndex=loc.lastIndexOf("/");loc.endsWith("#en")||loc.endsWith("en",lastSlashIndex)?uiElements.lang="en":(loc.endsWith("#de")||loc.endsWith("de",lastSlashIndex))&&(uiElements.lang="de");for(var updateData={usesMouse:bowser.mobile||bowser.tablet?!1:!0,sceneId:0,scene:null,numScenesLoaded:0,sceneShaker:null,audioManager:null,audioGoalVolume:uiConfig.maxVolume,audioCurrentVolume:uiConfig.maxVolume,delta:0,unscaledDelta:0,pause:!1,sceneTime:0,mousePos:{x:0,y:0},mousePosOld:{x:0,y:0},mousePosAbs:{x:0,y:0},mousePosCameraOffset:{x:0,y:0},additionalYPos:0,gyroOffset:{x:0,y:0},gyroOffsetUnfiltered:{x:0,y:0},cloudNoiseMaterials:[],particleSystems:[],noiseUpdates:[],textNoiseUpdates:[],animatedSprites:[],animatedSpritesCustomRestart:[],animatedSpritesPingPong:[],animatedSpritesSoundTriggers:[],geometryWobblers:[],textureControllerOverExposures:[],noiseFadedTextures:[],mouseVelocity:0,mouseXVelocity:0,mouseYVelocity:0,mouseVelocityAnim:0,mouseVelocityBuildUp:0,scenePosition:[0,0,0],sceneData:new Array(numScenes),aspect:window.innerWidth/window.innerHeight,needsAspect:[],needsTime:[],mousePosTransitionStart:{x:0,y:0},lockMouse:!1,uiYPosOffset:0,overrideUiYPosOffset:0,uiZPosOffset:0,touchTransitionTimeoutID:-1,sceneCamera:null,scenesMaterial:null,uiElements:uiElements,scenesMouseDownHandlers:[],scenesMouseUpHandlers:[],cameraAspectOffsets:[],navigationController:null,partsLoadingProgress:0,setupAll:null,noiseSpecks:null,largeNoiseSpecks:null,showLargeNoiseSpecks:[],wasMuted:!1,isMuted:!1,wasFadedOut:!1,isFadedOut:!1,isFadedDown:!1,mouseIsInTopHalf:!1,mouseIsInTopHalfOld:!1,tmpProjector:new THREE.Projector,sceneTextsContainer:document.getElementById("sceneTextsContainer"),positionedDivTextUpdates:[],isKillingPreviousSounds:!1,quickJumpStartScene:-1,audioFadeTimeoutId:0,forceClickedPointer:!1,preventSceneChanges:!1,headlineAnimCounter:-1,showingHeadlineAnim:!1,accelerationDelta:0,shakeCounter:0,skipMainTextZoom:!1},i=0;i<numScenes;i++)updateData.sceneData[i]={},updateData.scenesMouseDownHandlers.push(null),updateData.scenesMouseUpHandlers.push(null),updateData.cameraAspectOffsets.push(0),updateData.showLargeNoiseSpecks.push(!0);var transitionData={transitionTotalDuration:4.3,runningTransition:!1,switchedScenes:!1,transitionTime:0,previousScene:0,nextScene:0,relTransitionTime:0,mapperdTransitionTime:0,uiActive:!1,goingDown:!0,transitionQuad:null,transitionMaterial:null,canGoUp:!1,canGoDown:!0,transitionToSceneOffset:0,texture:null},mainTextData={hasText:[],data:[]};</script><script>function updateProgress(){loadingProgress=(textureLoaded+updateData.partsLoadingProgress)/(textureTotal+3)}function setupAll(){updateData.partsLoadingProgress++,updateProgress(),updateData.partsLoadingProgress>9&&(updateData.navigationController=new FalterNavigationController,loadingProgress=1,loadingBar.material.uniforms.progress.value=loadingProgress,render(),updateData.audioManager.fadeOutLoadingMusic(1100),window.setTimeout(function(){finishedLoading=!0,window.setTimeout(function(){updateData.navigationController.showHeadphones(),window.setTimeout(function(){renderer.domElement.style.display="none",window.setTimeout(runFullSetup,300)},800)},800)},600))}var noWebGl=!1;if(Detector.webgl){updateData.sceneCamera=new THREE.PerspectiveCamera(updateFOV(window.innerWidth/window.innerHeight,1.75,40,70),window.innerWidth/window.innerHeight,1,1e3);var outputCamera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,1e3),smallerScreenSize={x:Math.floor(.5*window.innerWidth),y:Math.floor(.05*window.innerHeight)};document.body.addEventListener("mousedown",handleFirstInteraction),updateData.audioManager=new AudioManager(numScenes,updateData);var scenesScaler=1,scene=new THREE.Scene,scenesTexture=new THREE.WebGLRenderTarget(window.innerWidth*scenesScaler,window.innerHeight*scenesScaler,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat}),scenesSmallerTexture=new THREE.WebGLRenderTarget(smallerScreenSize.x*scenesScaler,smallerScreenSize.y*scenesScaler,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat}),blurredScene=new THREE.Scene,scenesBlurredTexture=new THREE.WebGLRenderTarget(smallerScreenSize.x*scenesScaler,smallerScreenSize.y*scenesScaler,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat}),finishedLoading=!1,loadingProgress=0,loadingManager=new THREE.LoadingManager,textureLoaded=0,textureTotal=13;loadingManager.onProgress=function(e,t,n){textureLoaded=t,textureTotal=n,updateProgress()},updateData.sceneShaker=new Screenshake,updateData.sceneShaker.setOctaves(3),updateData.sceneShaker.setFrequency(.3),updateData.sceneShaker.setDistance(.4);var transitionShaker=new Screenshake;transitionShaker.setOctaves(3),transitionShaker.setFrequency(4),transitionShaker.setDistance(.05),updateData.setupAll=setupAll,loadingManager.onLoad=function(){},loadMainTexts(mainTextData),WebFont.load({custom:{families:["Parkinson Cond","bodyFont"]},active:function(){setupAll()}});var blurredMaterial=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:scenesSmallerTexture},mapSize:{type:"v2",value:new THREE.Vector2(1/smallerScreenSize.x,1/smallerScreenSize.y)}},vertexShader:document.getElementById("verticalBlurVertexShader").textContent,fragmentShader:document.getElementById("verticalBlurFragmentShader").textContent,depthTest:!1,depthWrite:!1}),blurredSceneQuad=new THREE.Mesh(getFullScreenQuad(-1,1),blurredMaterial);blurredSceneQuad.frustumCulled=!1,blurredScene.add(blurredSceneQuad),updateData.scenesMaterial=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:scenesTexture},blurred:{type:"t",value:scenesBlurredTexture},yOffset:{type:"f",value:0},blurAmount:{type:"f",value:0},noiseOffset:{type:"f",value:0},alpha:{type:"f",value:1},brightness:{type:"f",value:0},brightnessMultiplier:{type:"f",value:1},xResolutionMod:{type:"f",value:1/window.innerWidth},yResolutionMod:{type:"f",value:1/window.innerHeight}},vertexShader:document.getElementById("scenesOutputVertexShader").textContent,fragmentShader:document.getElementById("scenesOutputFragmentShader").textContent,transparent:!0,depthTest:!1,depthWrite:!1});var sceneQuad=new THREE.Mesh(getFullScreenQuad(-1,1),updateData.scenesMaterial);sceneQuad.frustumCulled=!1,scene.add(sceneQuad),uiElements.pointer=getUiCircle(20,updateData,uiConfig.pointerNormalInner,uiConfig.pointerNormalOuter,uiConfig.pointerNormalAlpha),uiElements.pointer.visible=!1,scene.add(uiElements.pointer),uiElements.topCircle=getUiCircle(20,updateData,0,0,0),scene.add(uiElements.topCircle),uiElements.bottomCircle=getUiCircle(20,updateData,0,0,0),scene.add(uiElements.bottomCircle),transitionData.transitionMaterial=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:null},yOffset:{type:"f",value:0},xUvOffset:{type:"f",value:0},noiseOffset:{type:"f",value:0},alpha:{type:"f",value:1},frame:{type:"f",value:0},aspect:{type:"f",value:window.innerWidth/window.innerHeight}},vertexShader:document.getElementById("transitionOverlayVertexShader").textContent,fragmentShader:document.getElementById("transitionOverlayFragmentShader").textContent,depthTest:!1,depthWrite:!1,transparent:!0,side:THREE.DoubleSide}),uiElements.transitionMaterialBottomHiddenPosition=0,uiElements.transitionMaterialTopHiddenPosition=uiConfig.transitionQuadHeight+2,uiElements.transitionMaterialBottomEdgePosition=uiConfig.transitionQuadHeight*uiConfig.visibleTransitionQuadEdge,uiElements.transitionMaterialTopEdgePosition=uiConfig.transitionQuadHeight+2-uiConfig.transitionQuadHeight*uiConfig.visibleTransitionQuadEdge,uiElements.transitionMaterialBottomHalfPosition=.5*uiConfig.transitionQuadHeight,uiElements.transitionMaterialTopHalfPosition=uiConfig.transitionQuadHeight+2-.5*uiConfig.transitionQuadHeight,uiElements.sceneMaterialBottomEdgePosition=.9*uiConfig.visibleTransitionQuadEdge,uiElements.sceneMaterialTopEdgePosition=uiConfig.visibleTransitionQuadEdge*-.9,transitionData.transitionQuad=new THREE.Mesh(getFullScreenQuad(-1,1),transitionData.transitionMaterial),transitionData.transitionQuad.frustumCulled=!1,scene.add(transitionData.transitionQuad);var loadingBackground=setupLoadingBackground();scene.add(loadingBackground);var loadingBar=setupLoadingBar();scene.add(loadingBar),loadScenes(sceneContainer,numScenes,updateData,loadingManager,renderer,updateData.sceneCamera,scenesSmallerTexture),loadJSON("scenes.js",function(e){sceneContainer.scenesDataRaw=e,setupAll()}),loadJSON("maps.js",function(e){sceneContainer.spritesheetDataRaw=e,setupAll()});var loadingTexLoader=new THREE.TextureLoader(loadingManager);loadingTexLoader.load("images/loading.png",function(e){e.wrapS=THREE.RepeatWrapping,loadingBar.material.uniforms.map.value=e});var transitionTexLoader=new THREE.TextureLoader(loadingManager);transitionTexLoader.load("images/transition.map.png",function(e){transitionData.texture=e,setupAll()});var noiseSpecksTexLoader=new THREE.TextureLoader(loadingManager);noiseSpecksTexLoader.load("images/noiseSpecks.map.png",function(e){sceneContainer.noiseSpecksTexture=e,setupAll()});var largeNoiseSpecksTexLoader=new THREE.TextureLoader(loadingManager);largeNoiseSpecksTexLoader.load("images/largeNoiseSpecks.map.png",function(e){sceneContainer.largeNoiseSpecksTexture=e,setupAll()});var renderer=new THREE.WebGLRenderer;renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement);var uiTexloader=new THREE.TextureLoader(loadingManager);uiTexloader.load("images/ui.map.png",function(e){uiElements.uiTexture=e,setupAll()}),window.addEventListener("resize",onWindowResize,!1),onWindowResize(),document.body.addEventListener("mousemove",handleMouseMove),document.body.addEventListener("keydown",handleKeyDown),document.body.addEventListener("mousedown",handleMouseDown),document.body.addEventListener("mouseup",handleMouseUp),document.body.addEventListener("mouseleave",handleMouseLeave);var touches=new TouchesWrapper;document.addEventListener("touchstart",handleTouchStart),document.addEventListener("touchmove",handleTouchMove),document.addEventListener("touchend",handleTouchEnd),window.addEventListener("devicemotion",handleAcceleration),window.onfocus=function(){unmuteAudio()},window.onblur=function(){muteAudio()};var gn=new GyroNorm,alphaOld,betaOld,gammaOld,newX=0,newY=0,x,y;gn.init({orientationBase:GyroNorm.WORLD}).then(function(){gn.start(function(e){switch(alpha=.1*e.dm.alpha,beta=.1*e.dm.beta,gamma=.1*e.dm.gamma,window.orientation){case-90:updateData.gyroOffsetUnfiltered.x=-alpha,updateData.gyroOffsetUnfiltered.y=gamma;break;case 0:updateData.gyroOffsetUnfiltered.x=beta,updateData.gyroOffsetUnfiltered.y=-alpha;break;case 90:updateData.gyroOffsetUnfiltered.x=alpha,updateData.gyroOffsetUnfiltered.y=gamma;break;case 180:updateData.gyroOffsetUnfiltered.x=beta,updateData.gyroOffsetUnfiltered.y=alpha}updateData.gyroOffsetUnfiltered.x=clamp(updateData.gyroOffsetUnfiltered.x,-4,4),updateData.gyroOffsetUnfiltered.y=clamp(updateData.gyroOffsetUnfiltered.y,-4,4)})})["catch"](function(e){}),uiElements.closeButton.addEventListener("mousedown",function(){hideMainText()});var clock=new THREE.Clock;clock.start();var noiseTimer=0,noiseSpecksTimer=0}else{noWebGl=!0,document.getElementById("falter-nav").style.display="none";var container=document.getElementById("noWebGl");container.style.display="block";var noWebGlMessageTitle=document.createElement("h1");noWebGlMessageTitle.id="noWebGlMessageTitle",noWebGlMessageTitle.innerText="Tut uns Leid!";var noWebGlMessageText=document.createElement("h2");noWebGlMessageText.id="noWebGlMessageText",noWebGlMessageText.innerHTML=window.WebGLRenderingContext?"Dein PC ist leider ein bisschen zu alt für das moderne Falter Inferno.":"Dein Browser ist leider ein bisschen zu alt für das moderne Falter Inferno.</br><a href='http://outdatedbrowser.com/de'>Lade dir hier einen neuen browser runter, dann läuft alles.</a>",container.appendChild(noWebGlMessageTitle),container.appendChild(noWebGlMessageText),container.appendChild($('<a href="https://www.facebook.com/FALTER.Stadtzeitung/videos/1147801045235423/" target="_blank" class="simple-button no-webgl"></span><span class="copy">Video ansehen</span> <span class="hover-bar"></span></a>')[0]),document.body.style.background="url(assets/images/background-fallback.jpg)",document.body.style.backgroundSize="cover"}</script><script>function update(){requestAnimationFrame(update),animate()}function animate(){updateData.unscaledDelta=clamp(clock.getDelta(),0,.5),updateData.pause?updateData.delta=0:(updateData.delta=updateData.unscaledDelta,updateData.sceneTime+=updateData.delta),updateData.isMuted||(updateData.audioCurrentVolume=lerp(updateData.audioCurrentVolume,updateData.audioGoalVolume,5*updateData.unscaledDelta),Howler.volume(updateData.audioCurrentVolume)),updateData.mouseVelocityAnim<updateData.mouseVelocity?updateData.mouseVelocityAnim=updateData.mouseVelocity:updateData.mouseVelocityAnim>.001?updateData.mouseVelocityAnim=lerp(updateData.mouseVelocityAnim,0,3*updateData.delta):updateData.mouseVelocityAnim=0,uiElements.showMainText&&(updateData.mouseVelocityAnim>.03?(updateData.mouseVelocityBuildUp+=.11*updateData.mouseVelocityAnim,!isNaN(updateData.mouseXVelocity)&&updateData.mouseYVelocity?(uiElements.mainTextMesh.material.uniforms.xDirection.value=-updateData.mouseXVelocity,uiElements.mainTextMesh.material.uniforms.yDirection.value=-updateData.mouseYVelocity):(uiElements.mainTextMesh.material.uniforms.xDirection.value=0,uiElements.mainTextMesh.material.uniforms.yDirection.value=0)):updateData.mouseVelocityBuildUp=lerp(updateData.mouseVelocityBuildUp,0,.03*updateData.delta)),loadingBar.visible&&(updateData.mouseIsInTopHalf=updateData.mousePos.y<.5,updateData.mouseIsInTopHalf!==updateData.mouseIsInTopHalfOld&&(updateData.mouseVelocityAnim>.1&&updateData.audioManager.playLoadingSound(),updateData.mouseIsInTopHalfOld=updateData.mouseIsInTopHalf),loadingBar.material.uniforms.progress.value=lerp(loadingBar.material.uniforms.progress.value,loadingProgress,2*updateData.delta),loadingBar.material.uniforms.time.value+=updateData.delta+.5*updateData.mouseVelocityAnim,loadingBar.material.uniforms.mouseVelocity.value=updateData.mouseVelocityAnim,loadingBar.material.uniforms.mouseXPosition.value=updateData.mousePos.x,finishedLoading?(loadingBar.material.uniforms.alpha.value=lerp(loadingBar.material.uniforms.alpha.value,0,7*updateData.delta),loadingBar.material.uniforms.alpha.value<1e-4&&(loadingBar.visible=!1)):loadingBar.material.uniforms.alpha.value=lerp(loadingBar.material.uniforms.alpha.value,1,.8*updateData.delta)),loadingBackground.visible&&finishedLoading&&(loadingBackground.material.uniforms.alpha.value=lerp(loadingBackground.material.uniforms.alpha.value,0,updateData.delta),loadingBackground.material.uniforms.alpha.value<1e-4&&(loadingBackground.visible=!1)),updateData.mouseVelocity=lerp(updateData.mouseVelocity,0,updateData.delta),updateData.gyroOffset.x=lerp(updateData.gyroOffset.x,updateData.gyroOffsetUnfiltered.x,1.2*updateData.delta),updateData.gyroOffset.y=lerp(updateData.gyroOffset.y,updateData.gyroOffsetUnfiltered.y,1.2*updateData.delta),updateData.gyroOffsetUnfiltered.x=lerp(updateData.gyroOffsetUnfiltered.x,0,.05*updateData.delta),updateData.gyroOffsetUnfiltered.y=lerp(updateData.gyroOffsetUnfiltered.y,0,.05*updateData.delta),updateData.scene=sceneContainer.scenes[updateData.sceneId],animateUI(updateData,transitionData,uiElements),animateTransition(updateData,transitionData,updateData.scenesMaterial);var a,e;if("undefined"!=typeof updateData.cloudNoiseMaterials[updateData.sceneId])for(a=0,e=updateData.cloudNoiseMaterials[updateData.sceneId].length;e>a;a++)updateData.cloudNoiseMaterials[updateData.sceneId][a].uniforms.time.value+=.05*updateData.delta,updateData.cloudNoiseMaterials[updateData.sceneId][a].uniforms.time.value%=9999;if("undefined"!=typeof updateData.animatedSprites[updateData.sceneId])for(a=0,e=updateData.animatedSprites[updateData.sceneId].length;e>a;a++)updateData.animatedSprites[updateData.sceneId][a].uniforms.frame.value+=updateData.delta*updateData.animatedSprites[updateData.sceneId][a].uniforms.speed.value,updateData.animatedSprites[updateData.sceneId][a].uniforms.frame.value%=updateData.animatedSprites[updateData.sceneId][a].uniforms.numFrames.value;if("undefined"!=typeof updateData.animatedSpritesPingPong[updateData.sceneId])for(a=0,e=updateData.animatedSpritesPingPong[updateData.sceneId].length;e>a;a++)updateData.animatedSpritesPingPong[updateData.sceneId][a].uniforms.frameUnlooped.value+=updateData.delta*updateData.animatedSpritesPingPong[updateData.sceneId][a].uniforms.speed.value,updateData.animatedSpritesPingPong[updateData.sceneId][a].uniforms.frame.value=oscillate(Math.floor(updateData.animatedSpritesPingPong[updateData.sceneId][a].uniforms.frameUnlooped.value),0,updateData.animatedSpritesPingPong[updateData.sceneId][a].uniforms.numFrames.value);if("undefined"!=typeof updateData.animatedSpritesSoundTriggers[updateData.sceneId])for(a=0,e=updateData.animatedSpritesSoundTriggers[updateData.sceneId].length;e>a;a++)!updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].wasTriggered&&updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].material.uniforms.frame.value>updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].frame&&updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].material.uniforms.frame.value<updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].frame+.5?(updateData.audioManager.playSound(updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].sound),updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].wasTriggered=!0):updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].wasTriggered&&updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].material.uniforms.frame.value>updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].frame+2&&(updateData.animatedSpritesSoundTriggers[updateData.sceneId][a].wasTriggered=!1);if("undefined"!=typeof updateData.animatedSpritesCustomRestart[updateData.sceneId])for(a=0,e=updateData.animatedSpritesCustomRestart[updateData.sceneId].length;e>a;a++)updateData.animatedSpritesCustomRestart[updateData.sceneId][a].uniforms.frame.value+=updateData.delta*updateData.animatedSpritesCustomRestart[updateData.sceneId][a].uniforms.speed.value,updateData.animatedSpritesCustomRestart[updateData.sceneId][a].uniforms.frame.value>updateData.animatedSpritesCustomRestart[updateData.sceneId][a].uniforms.numFrames.value&&(updateData.animatedSpritesCustomRestart[updateData.sceneId][a].uniforms.frame.value=updateData.animatedSpritesCustomRestart[updateData.sceneId][a].uniforms.loopRestart.value-.5);if("undefined"!=typeof updateData.particleSystems[updateData.sceneId])for(a=0,e=updateData.particleSystems[updateData.sceneId].length;e>a;a++)updateData.particleSystems[updateData.sceneId][a].update(updateData);for(a=0,e=updateData.textNoiseUpdates.length;e>a;a++)updateData.textNoiseUpdates[a].uniforms.noiseOffset.value+=.4*updateData.delta,updateData.textNoiseUpdates[a].uniforms.noiseOffset.value%=9999;if("undefined"!=typeof updateData.needsTime[updateData.sceneId])for(a=0,e=updateData.needsTime[updateData.sceneId].length;e>a;a++)updateData.needsTime[updateData.sceneId][a].uniforms.time.value+=updateData.delta,updateData.needsTime[updateData.sceneId][a].uniforms.time.value%=9999.9;if(null!==uiElements.mainTextMesh&&null!==uiElements.mainTextCloseButton&&(uiElements.showMainText?(updateData.scenesMaterial.uniforms.alpha.value=lerp(updateData.scenesMaterial.uniforms.alpha.value,.75,3*updateData.delta),uiElements.mainTextMesh.material.uniforms.alpha.value=lerp(uiElements.mainTextMesh.material.uniforms.alpha.value,-.5,2*updateData.delta),uiElements.headTextMesh.material.uniforms.alpha.value=lerp(uiElements.headTextMesh.material.uniforms.alpha.value,-.5,2*updateData.delta),uiElements.mainTextMesh.material.uniforms.modAlpha.value=updateData.mouseVelocityBuildUp,uiElements.headTextMesh.material.uniforms.modAlpha.value=updateData.mouseVelocityBuildUp,updateData.skipMainTextZoom||(updateData.uiZPosOffset=lerp(updateData.uiZPosOffset,-1,1.4*updateData.delta)),updateData.mouseVelocityBuildUp>.75&&(hideMainText(),updateData.navigationController.forceCloseMainTextUi())):(uiElements.showHeadText?uiElements.headTextMesh.material.uniforms.alpha.value=lerp(uiElements.headTextMesh.material.uniforms.alpha.value,-.5,2*updateData.delta):uiElements.headTextMesh.material.uniforms.alpha.value=lerp(uiElements.headTextMesh.material.uniforms.alpha.value,1.25,2*updateData.delta),updateData.scenesMaterial.uniforms.alpha.value=lerp(updateData.scenesMaterial.uniforms.alpha.value,1,2*updateData.delta),uiElements.mainTextMesh.material.uniforms.alpha.value=lerp(uiElements.mainTextMesh.material.uniforms.alpha.value,1.2,2*updateData.delta))),"undefined"!=typeof updateData.noiseUpdates[updateData.sceneId])for(a=0,e=updateData.noiseUpdates[updateData.sceneId].length;e>a;a++)updateData.noiseUpdates[updateData.sceneId][a].uniforms.noiseOffset.value+=.4*updateData.unscaledDelta,updateData.noiseUpdates[updateData.sceneId][a].uniforms.noiseOffset.value%=9999;if(!updateData.pause&&"undefined"!=typeof updateData.geometryWobblers[updateData.sceneId])for(a=0,e=updateData.geometryWobblers[updateData.sceneId].length;e>a;a++)updateData.geometryWobblers[updateData.sceneId][a].uniforms.time.value+=updateData.delta+.3*updateData.mouseVelocityAnim,updateData.geometryWobblers[updateData.sceneId][a].uniforms.time.value%=9999,updateData.geometryWobblers[updateData.sceneId][a].uniforms.mouseVelocityAnim.value=2*updateData.mouseVelocityAnim;if(!updateData.pause&&"undefined"!=typeof updateData.textureControllerOverExposures[updateData.sceneId])for(a=0,e=updateData.textureControllerOverExposures[updateData.sceneId].length;e>a;a++)updateData.textureControllerOverExposures[updateData.sceneId][a].uniforms.time.value+=updateData.delta*updateData.textureControllerOverExposures[updateData.sceneId][a].uniforms.exposureCycleSpeed.value+updateData.mouseVelocityAnim*updateData.textureControllerOverExposures[updateData.sceneId][a].uniforms.interactionExposureCycleSpeed.value,updateData.textureControllerOverExposures[updateData.sceneId][a].uniforms.time.value%=9999,updateData.textureControllerOverExposures[updateData.sceneId][a].uniforms.additionalWidth.value=updateData.mouseVelocityAnim;if("undefined"!=typeof updateData.noiseFadedTextures[updateData.sceneId])for(a=0,e=updateData.noiseFadedTextures[updateData.sceneId].length;e>a;a++)updateData.noiseFadedTextures[updateData.sceneId][a].uniforms.time.value+=updateData.delta,updateData.noiseFadedTextures[updateData.sceneId][a].uniforms.time.value%=9999;!updateData.pause&&"undefined"!=typeof sceneContainer.scenes[updateData.sceneId]&&updateData.sceneData[updateData.sceneId].ready&&sceneContainer.animate[updateData.sceneId](updateData,updateData.sceneData[updateData.sceneId]),noiseTimer+=updateData.unscaledDelta,noiseTimer>.05&&(noiseTimer%=.05,updateData.scenesMaterial.uniforms.noiseOffset.value=Math.random()),noiseSpecksTimer+=updateData.unscaledDelta,noiseSpecksTimer>.07&&null!==updateData.largeNoiseSpecks&&(noiseSpecksTimer%=.07,updateData.noiseSpecks.material.uniforms.time.value=30*Math.random(),updateData.noiseSpecks.material.uniforms.range.value=Math.random(),updateData.noiseSpecks.material.uniforms.rangeEnd.value=updateData.noiseSpecks.material.uniforms.range.value+updateData.noiseSpecks.material.uniforms.rangeSize.value,updateData.largeNoiseSpecks.material.uniforms.time.value=30*Math.random(),updateData.largeNoiseSpecks.material.uniforms.range.value=Math.random(),updateData.largeNoiseSpecks.material.uniforms.rangeEnd.value=updateData.largeNoiseSpecks.material.uniforms.range.value+updateData.largeNoiseSpecks.material.uniforms.rangeSize.value),render()}function render(){"undefined"!=typeof sceneContainer.scenes[updateData.sceneId]&&(updateData.sceneCamera.position.x-=updateData.sceneShaker.getOffset().x,updateData.sceneCamera.position.y-=updateData.sceneShaker.getOffset().y,updateData.sceneShaker.step(updateData.delta),updateData.sceneCamera.position.x+=updateData.sceneShaker.getOffset().x,updateData.sceneCamera.position.y+=updateData.sceneShaker.getOffset().y,renderer.render(sceneContainer.scenes[updateData.sceneId],updateData.sceneCamera,scenesTexture,!0),updateData.scenesMaterial.uniforms.blurAmount.value>0&&(renderer.render(sceneContainer.scenes[updateData.sceneId],updateData.sceneCamera,scenesSmallerTexture,!0),renderer.render(blurredScene,updateData.sceneCamera,scenesBlurredTexture,!0))),renderer.render(scene,outputCamera)}noWebGl||update();</script><script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-46061691-3', 'auto');
	  ga('send', 'pageview');
	</script></body></html>